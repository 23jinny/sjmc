

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>1. Introduction &mdash; OpenMC Documentation</title>
    
    <link rel="stylesheet" href="../_static/haiku.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/print.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.5.3',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/theme_extras.js"></script>
    <link rel="top" title="OpenMC Documentation" href="../index.html" />
    <link rel="up" title="Theory and Methodology" href="index.html" />
    <link rel="next" title="2. Geometry" href="geometry.html" />
    <link rel="prev" title="Theory and Methodology" href="index.html" /> 
  </head>
  <body>
      <div class="header">
        <a href="../index.html">
          <img class="logo" src="../_static/openmc.png" alt="Logo"/>
        </a>
      </div>
      <div class="topnav">
      
        <p>
        «&#160;&#160;<a href="index.html">Theory and Methodology</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="../index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="geometry.html">2. Geometry</a>&#160;&#160;»
        </p>

      </div>
      <div class="content">
        
        
  <div class="section" id="introduction">
<span id="methods-introduction"></span><h1>1. Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h1>
<p>The physical process by which a population of particles evolves over time is
governed by a number of <a class="reference external" href="http://en.wikipedia.org/wiki/Probability_distribution">probability distributions</a>. For instance, given a
particle traveling through some material, there is a probability distribution
for the distance it will travel until its next collision (an exponential
distribution). Then, when it collides with a nucleus, there is associated
probability of undergoing each possible reaction with that nucleus. While the
behavior of any single particle is unpredictable, the average behavior of a
large population of particles originating from the same source is well defined.</p>
<p>If the probability distributions that govern the transport of a particle are
known, the process of single particles randomly streaming and colliding with
nuclei can be simulated directly with computers using a technique known as
<a class="reference external" href="http://en.wikipedia.org/wiki/Monte_Carlo_method">Monte Carlo</a> simulation. If enough particles are simulated this way, the
average behavior can be determined to within arbitrarily small statistical
error, a fact guaranteed by the <a class="reference external" href="http://en.wikipedia.org/wiki/Central_limit_theorem">central limit theorem</a>. To be more precise,
the central limit theorem tells us that the variance of the sample mean of some
physical parameter being estimated with Monte Carlo will be inversely
proportional to the number of realizations, i.e. the number of particles we
simulate:</p>
<div class="math">
<p><img src="../_images/math/5cdd0f764bde67cbb5088eb5c4d83e7f39042a6c.png" alt="\sigma^2 \propto \frac{1}{N}."/></p>
</div><p>where <img class="math" src="../_images/math/741fb9098efcb98055f467f87630a5d0ca599b6b.png" alt="\sigma^2"/> is the variance of the sample mean and <img class="math" src="../_images/math/fc97ef67268cd4e91bacdf12b8901d7036c9a056.png" alt="N"/> is the
number of realizations.</p>
<div class="section" id="overview-of-program-flow">
<h2>1.1. Overview of Program Flow<a class="headerlink" href="#overview-of-program-flow" title="Permalink to this headline">¶</a></h2>
<p>OpenMC performs a Monte Carlo simulation one particle at a time &#8211; at no point
is more than one particle being tracked on a single program instance. Before any
particles are tracked, the problem must be initialized. This involves the
following steps:</p>
<blockquote>
<div><ul class="simple">
<li>Read input files and building data structures for the geometry, materials,
tallies, and other associated variables.</li>
<li>Initialize the pseudorandom number generator.</li>
<li>Read ACE format cross sections specified in the problem.</li>
<li>If using a special energy grid treatment such as a union energy grid or
lethargy bins, that must be initialized as well.</li>
<li>In a fixed source problem, source sites are sampled from the specified
source. In an eigenvalue problem, source sites are sampled from some initial
source distribution or from a source file. The source sites consist of
coordinates, a direction, and an energy.</li>
</ul>
</div></blockquote>
<p>Once initialization is complete, the actual transport simulation can
proceed. The life of a single particle will proceed as follows:</p>
<blockquote>
<div><ol class="arabic">
<li><p class="first">The particle&#8217;s properties are initialized from a source site previously
sampled.</p>
</li>
<li><p class="first">Based on the particle&#8217;s coordinates, the current cell in which the particle
resides is determined.</p>
</li>
<li><p class="first">The energy-dependent cross sections for the material that the particle is
currently in are determined. Note that this includes the total
cross section, which is not pre-calculated.</p>
</li>
<li><p class="first">The distance to the nearest boundary of the particle&#8217;s cell is determined
based on the bounding surfaces to the cell.</p>
</li>
<li><p class="first">The distance to the next collision is sampled. If the total material
cross section is <img class="math" src="../_images/math/b5e850feb16eb83bd01af5524126befff31f202b.png" alt="\Sigma_t"/>, this can be shown to be</p>
<div class="math">
<p><img src="../_images/math/f858ab9fda0fbd2bd776f6027772ff17a08151da.png" alt="d = -\frac{\ln \xi}{\Sigma_t}"/></p>
</div><p>where <img class="math" src="../_images/math/ccfd1641d037d427d9dbf42cdd54b485a03eafe9.png" alt="\xi"/> is a <a class="reference external" href="http://en.wikipedia.org/wiki/Pseudorandom_number_generator">pseudorandom number</a> sampled from a uniform
distribution on <img class="math" src="../_images/math/bc1a809324034256fb4541c3b1d336e005d488ef.png" alt="[0,1)"/>.</p>
</li>
<li><p class="first">If the distance to the nearest boundary is less than the distance to the next
collision, the particle is moved forward to this boundary. Then, the process
is repeated from step 2. If the distance to collision is closer than the
distance to the nearest boundary, then the particle will undergo a collision.</p>
</li>
<li><p class="first">The material at the collision site may consist of multiple nuclides. First,
the nuclide with which the collision will happen is sampled based on the
total cross sections. If the total cross section of material <img class="math" src="../_images/math/34857b3ba74ce5cd8607f3ebd23e9015908ada71.png" alt="i"/> is
<img class="math" src="../_images/math/9370fd1a9c12c92cee13fe4202567905e145ebbc.png" alt="\Sigma_{t,i}"/>, then the probability that any nuclide is sampled is</p>
<div class="math">
<p><img src="../_images/math/f7df9cfe77fcdfe0919a31faa002a24ee2f57d87.png" alt="P(i) = \frac{\Sigma_{t,i}}{\Sigma_t}."/></p>
</div></li>
<li><p class="first">Once the specific nuclide is sampled, the random samples a reaction for
that nuclide based on the microscopic cross sections. If the microscopic
cross section for some reaction <img class="math" src="../_images/math/26eeb5258ca5099acf8fe96b2a1049c48c89a5e6.png" alt="x"/> is <img class="math" src="../_images/math/bbe11dfc13641cee6007e2a95183f5748f04a757.png" alt="\sigma_x"/> and the total
microscopic cross section for the nuclide is <img class="math" src="../_images/math/c7de8622e17cddfc652ab2dc62616c622ba3bcfb.png" alt="\sigma_t"/>, then the
probability that reaction <img class="math" src="../_images/math/26eeb5258ca5099acf8fe96b2a1049c48c89a5e6.png" alt="x"/> will occur is</p>
<div class="math">
<p><img src="../_images/math/eb30a459c3289b2855c466485f76637bb58d1db4.png" alt="P(x) = \frac{\sigma_x}{\sigma_t}."/></p>
</div></li>
<li><p class="first">If the sampled reaction is elastic or inelastic scattering, the outgoing
energy and angle is sampled from the appropriate distribution.  Reactions
of type <img class="math" src="../_images/math/11d9b3efac04551ca81659b5409aec4281b4bed3.png" alt="(n,xn)"/> are treated as scattering and the weight of the
particle is increased by the multiplicity of the reaction. The particle
then continues from step 3. If the reaction is absorption or fission, the
particle dies and if necessary, fission sites are created and stored in the
fission bank.</p>
</li>
</ol>
</div></blockquote>
<p>After all particles have been simulated, there are a few final tasks that must
be performed before the run is finished. This include the following:</p>
<blockquote>
<div><ul class="simple">
<li>With the accumulated sum and sum of squares for each tally, the sample mean
and its variance is calculated.</li>
<li>All tallies and other results are written to disk.</li>
<li>If requested, a source file is written to disk.</li>
<li>All allocatable arrays are deallocated.</li>
</ul>
</div></blockquote>
</div>
</div>


      </div>
      <div class="bottomnav">
      
        <p>
        «&#160;&#160;<a href="index.html">Theory and Methodology</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="../index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="geometry.html">2. Geometry</a>&#160;&#160;»
        </p>

      </div>


    <div class="footer">
        &copy; Copyright 2011-2013, Massachusetts Institute of Technology.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-30411614-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>

  </body>
</html>