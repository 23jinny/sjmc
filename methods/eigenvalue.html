

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>7. Eigenvalue Calculations &mdash; OpenMC Documentation</title>
    <link rel="stylesheet" href="../_static/haiku.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/print.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.5.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/theme_extras.js"></script>
    <link rel="top" title="OpenMC Documentation" href="../index.html" />
    <link rel="up" title="Theory and Methodology" href="index.html" />
    <link rel="next" title="8. Parallelization" href="parallelization.html" />
    <link rel="prev" title="6. Tallies" href="tallies.html" /> 
  </head>
  <body>
      <div class="header">
        <a href="../index.html">
          <img class="logo" src="../_static/openmc.png" alt="Logo"/>
        </a>
      </div>
      <div class="topnav">
      
        <p>
        «&#160;&#160;<a href="tallies.html">6. Tallies</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="../index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="parallelization.html">8. Parallelization</a>&#160;&#160;»
        </p>

      </div>
      <div class="content">
        
        
  <div class="section" id="eigenvalue-calculations">
<span id="methods-eigenvalue"></span><h1>7. Eigenvalue Calculations<a class="headerlink" href="#eigenvalue-calculations" title="Permalink to this headline">¶</a></h1>
<p>An eigenvalue calculation, also referred to as a criticality calculation, is a
transport simulation wherein the source of neutrons includes a fissionable
material. Some common eigenvalue calculations include the simulation of nuclear
reactors, spent fuel pools, nuclear weapons, and other fissile systems. The
reason they are called <em>eigenvalue</em> calculations is that the transport equation
becomes an eigenvalue equation if a fissionable source is present since then the
source of neutrons will depend on the flux of neutrons itself. Eigenvalue
simulations using Monte Carlo methods are becoming increasingly common with the
advent of high-performance computing.</p>
<p>This section will explore the theory behind and implementation of eigenvalue
calculations in a Monte Carlo code.</p>
<div class="section" id="method-of-successive-generations">
<span id="method-successive-generations"></span><h2>7.1. Method of Successive Generations<a class="headerlink" href="#method-of-successive-generations" title="Permalink to this headline">¶</a></h2>
<p>The method used to converge on the fission source distribution in an eigenvalue
calculation, known as the method of successive generations, was first introduced
by <a class="reference internal" href="#lieberoth">[Lieberoth]</a>. In this method, a finite number of neutron histories,
<img class="math" src="../_images/math/fc97ef67268cd4e91bacdf12b8901d7036c9a056.png" alt="N"/>, are tracked through their lifetime iteratively. If fission occurs,
rather than tracking the resulting fission neutrons, the spatial coordinates of
the fission site, the sampled outgoing energy and direction of the fission
neutron, and the weight of the neutron are stored for use in the subsequent
generation. In OpenMC, the array used for storing the fission site information
is called the <em>fission bank</em>. At the end of each fission generation, <img class="math" src="../_images/math/fc97ef67268cd4e91bacdf12b8901d7036c9a056.png" alt="N"/>
source sites for the next generation must be randomly sampled from the <img class="math" src="../_images/math/5d1e4485dc90c450e8c76826516c1b2ccb8fce16.png" alt="M"/>
fission sites that were stored to ensure that the neutron population does not
grow exponentially. The sampled source sites are stored in an array called the
<em>source bank</em> and can be retrieved during the subsequent generation.</p>
<p>It&#8217;s important to recognize that in the method of successive generations, we
must start with some assumption on how the fission source sites are distributed
since the distribution is not known <em>a priori</em>. Typically, a user will make a
guess as to what the distribution is &#8211; this guess could be a uniform
distribution over some region of the geometry or simply a point
source. Fortunately, regardless of the choice of initial source distribution,
the method is guaranteed to converge to the true source distribution. Until the
source distribution converges, tallies should not be scored to since they will
otherwise include contributions from an unconverged source distribution.</p>
<p>The method by which the fission source iterations are parallelized can have a
large impact on the achievable parallel scaling. This topic is discussed at length
in <a class="reference internal" href="parallelization.html#fission-bank-algorithms"><em>Fission Bank Algorithms</em></a>.</p>
</div>
<div class="section" id="source-convergence-issues">
<h2>7.2. Source Convergence Issues<a class="headerlink" href="#source-convergence-issues" title="Permalink to this headline">¶</a></h2>
<div class="section" id="diagnosing-convergence-with-shannon-entropy">
<h3>7.2.1. Diagnosing Convergence with Shannon Entropy<a class="headerlink" href="#diagnosing-convergence-with-shannon-entropy" title="Permalink to this headline">¶</a></h3>
<p>As discussed earlier, it is necessary to converge both <img class="math" src="../_images/math/56a4ca4edce4a1ea8da11edbc5adc54ed45163b2.png" alt="k_{eff}"/> and the
source distribution before any tallies can begin. Moreover, the convergence rate
of the source distribution is in general slower than that of
<img class="math" src="../_images/math/56a4ca4edce4a1ea8da11edbc5adc54ed45163b2.png" alt="k_{eff}"/>. One should thus examine not only the convergence of
<img class="math" src="../_images/math/56a4ca4edce4a1ea8da11edbc5adc54ed45163b2.png" alt="k_{eff}"/> but also the convergence of the source distribution in order to
make decisions on when to start active batches.</p>
<p>However, the representation of the source distribution makes it a bit more
difficult to analyze its convergence. Since <img class="math" src="../_images/math/56a4ca4edce4a1ea8da11edbc5adc54ed45163b2.png" alt="k_{eff}"/> is a scalar
quantity, it is easy to simply look at a line plot of <img class="math" src="../_images/math/56a4ca4edce4a1ea8da11edbc5adc54ed45163b2.png" alt="k_{eff}"/> versus the
number of batches and this should give the user some idea about whether it has
converged. On the other hand, the source distribution at any given batch is a
finite set of coordinates in Euclidean space. In order to analyze the
convergence, we would either need to use a method for assessing convergence of
an N-dimensional quantity or transform our set of coordinates into a scalar
metric. The latter approach has been developed considerably over the last decade
and a method now commonly used in Monte Carlo eigenvalue calculations is to use
a metric called the <a class="reference external" href="https://laws.lanl.gov/vhosts/mcnp.lanl.gov/pdf_files/la-ur-06-3737_entropy.pdf">Shannon entropy</a>, a concept borrowed from information
theory.</p>
<p>To compute the Shannon entropy of the source distribution, we first need to
discretize the source distribution rather than having a set of coordinates in
Euclidean space. This can be done by superimposing a structured mesh over the
geometry (containing at least all fissionable materials). Then, the fraction of
source sites that are present in each mesh element is counted:</p>
<div class="math" id="equation-fraction-source">
<p><span class="eqno">(1)</span><img src="../_images/math/3e3bda3f18b93acfcfbc4fee5bba064bbae2b0c4.png" alt="S_i = \frac{\text{Source sites in $i$-th mesh element}}{\text{Total number of
source sites}}" /></p>
</div><p>The Shannon entropy is then computed as</p>
<div class="math" id="equation-shannon-entropy">
<p><span class="eqno">(2)</span><img src="../_images/math/7473e93f886ae7e01cd1bd9fd7d21e5d365e4b0e.png" alt="H = - \sum_{i=1}^N S_i \log_2 S_i" /></p>
</div><p>where <img class="math" src="../_images/math/fc97ef67268cd4e91bacdf12b8901d7036c9a056.png" alt="N"/> is the number of mesh elements. With equation
<a href="#equation-shannon-entropy">(2)</a>, we now have a scalar metric that we can use to assess the
convergence of the source distribution by observing line plots of the Shannon
entropy versus the number of batches.</p>
<p>In recent years, researchers have started looking at ways of automatically
assessing source convergence to relieve the burden on the user of having to look
at plots of <img class="math" src="../_images/math/56a4ca4edce4a1ea8da11edbc5adc54ed45163b2.png" alt="k_{eff}"/> and the Shannon entropy. A number of methods have
been proposed (see e.g. <a class="reference internal" href="#romano">[Romano]</a>, <a class="reference internal" href="#ueki">[Ueki]</a>), but each of these is not without
problems.</p>
<table class="docutils citation" frame="void" id="lieberoth" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id1">[Lieberoth]</a></td><td>J. Lieberoth, &#8220;A Monte Carlo Technique to Solve the Static
Eigenvalue Problem of the Boltzmann Transport Equation,&#8221; <em>Nukleonik</em>, <strong>11</strong>,
213-219 (1968).</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="romano" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id2">[Romano]</a></td><td>Paul K. Romano, &#8220;Application of the Stochastic Oscillator to Assess
Source Convergence in Monte Carlo Criticality Calculations,&#8221;
<em>Proc. International Conference on Mathematics, Computational Methods, and
Reactor Physics</em>, Saratoga Springs, New York (2009).</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="ueki" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id3">[Ueki]</a></td><td>Taro Ueki, &#8220;On-the-Fly Judgments of Monte Carlo Fission Source
Convergence,&#8221; <em>Trans. Am. Nucl. Soc.</em>, <strong>98</strong>, 512 (2008).</td></tr>
</tbody>
</table>
</div>
</div>
</div>


      </div>
      <div class="bottomnav">
      
        <p>
        «&#160;&#160;<a href="tallies.html">6. Tallies</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="../index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="parallelization.html">8. Parallelization</a>&#160;&#160;»
        </p>

      </div>


    <div class="footer">
        &copy; Copyright 2011-2013, Massachusetts Institute of Technology.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.0.1.
    </div>
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-30411614-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>

  </body>
</html>