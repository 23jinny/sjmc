<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>4. Data Processing and Visualization &mdash; OpenMC Documentation</title>
    
    <link rel="stylesheet" href="../_static/haiku.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/print.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.6.2',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/theme_extras.js"></script>
    <link rel="top" title="OpenMC Documentation" href="../index.html" />
    <link rel="up" title="User’s Guide" href="index.html" />
    <link rel="next" title="5. Troubleshooting" href="troubleshoot.html" />
    <link rel="prev" title="3. Writing XML Input Files" href="input.html" /> 
  </head>
  <body>
      <div class="header">
        <a href="../index.html">
          <img class="logo" src="../_static/openmc.png" alt="Logo"/>
        </a>
      </div>
      <div class="topnav">
      
        <p>
        «&#160;&#160;<a href="input.html">3. Writing XML Input Files</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="../index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="troubleshoot.html">5. Troubleshooting</a>&#160;&#160;»
        </p>

      </div>
      <div class="content">
        
        
  <div class="section" id="data-processing-and-visualization">
<span id="usersguide-processing"></span><h1>4. Data Processing and Visualization<a class="headerlink" href="#data-processing-and-visualization" title="Permalink to this headline">¶</a></h1>
<p>This section is intended to explain in detail the recommended procedures for
carrying out common post-processing tasks with OpenMC. While several utilities
of varying complexity are provided to help automate the process, in many cases
it will be extremely beneficial to do some coding in Python to quickly obtain
results. In these cases, and for many of the provided utilities, it is necessary
for your Python installation to contain:</p>
<ul class="simple">
<li><a class="footnote-reference" href="#id7" id="id1">[1]</a> <a class="reference external" href="http://www.numpy.org/">Numpy</a></li>
<li><a class="footnote-reference" href="#id7" id="id2">[1]</a> <a class="reference external" href="http://www.scipy.org/">Scipy</a></li>
<li><a class="footnote-reference" href="#id8" id="id3">[2]</a> <a class="reference external" href="http://code.google.com/p/h5py/">h5py</a></li>
<li><a class="footnote-reference" href="#id9" id="id4">[3]</a> <a class="reference external" href="http://matplotlib.org/">Matplotlib</a></li>
<li><a class="footnote-reference" href="#id9" id="id5">[3]</a> <a class="reference external" href="https://github.com/nhorelik/silomesh">Silomesh</a></li>
<li><a class="footnote-reference" href="#id9" id="id6">[3]</a> <a class="reference external" href="http://www.vtk.org/">VTK</a></li>
</ul>
<p>Most of these are easily obtainable in Ubuntu through the package manager, or
are easily installed with distutils.</p>
<table class="docutils footnote" frame="void" id="id7" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[1]</td><td><em>(<a class="fn-backref" href="#id1">1</a>, <a class="fn-backref" href="#id2">2</a>)</em> Required for tally data extraction from statepoints with statepoint.py</td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id8" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id3">[2]</a></td><td>Required only if reading HDF5 statepoint files.</td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id9" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[3]</td><td><em>(<a class="fn-backref" href="#id4">1</a>, <a class="fn-backref" href="#id5">2</a>, <a class="fn-backref" href="#id6">3</a>)</em> Optional for plotting utilities</td></tr>
</tbody>
</table>
<div class="section" id="geometry-visualization">
<h2>4.1. Geometry Visualization<a class="headerlink" href="#geometry-visualization" title="Permalink to this headline">¶</a></h2>
<p>Geometry plotting is carried out by creating a plots.xml, specifying plots, and
running OpenMC with the -plot or -p command-line option (See
<a class="reference internal" href="input.html#usersguide-plotting"><em>Geometry Plotting Specification &#8211; plots.xml</em></a>).</p>
<div class="section" id="plotting-in-2d">
<h3>4.1.1. Plotting in 2D<a class="headerlink" href="#plotting-in-2d" title="Permalink to this headline">¶</a></h3>
<a class="reference internal image-reference" href="../_images/atr.png"><img alt="../_images/atr.png" src="../_images/atr.png" style="height: 200px;" /></a>
<p>See below for a simple example of a plots xml file that demonstrates the
capabilities of 2D slice plots. Here we assume that there is a <tt class="docutils literal"><span class="pre">geometry.xml</span></tt>
file containing 7 cells.</p>
<div class="highlight-xml"><div class="highlight"><pre><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="nt">&lt;plots&gt;</span>

  <span class="nt">&lt;plot</span> <span class="na">id=</span><span class="s">&quot;1&quot;</span> <span class="na">type=</span><span class="s">&quot;slice&quot;</span> <span class="na">color=</span><span class="s">&quot;cell&quot;</span> <span class="na">basis=</span><span class="s">&quot;xy&quot;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;filename&gt;</span> myplot <span class="nt">&lt;/filename&gt;</span>
      <span class="nt">&lt;origin&gt;</span> 0 0 <span class="nt">&lt;/origin&gt;</span>
      <span class="nt">&lt;width&gt;</span> 10 10 <span class="nt">&lt;/width&gt;</span>
      <span class="nt">&lt;pixels&gt;</span> 2000 2000 <span class="nt">&lt;/pixels&gt;</span>
      <span class="nt">&lt;background&gt;</span> 0 0 0 <span class="nt">&lt;/background&gt;</span>
      <span class="nt">&lt;col_spec</span> <span class="na">id=</span><span class="s">&quot;1&quot;</span> <span class="na">rgb=</span><span class="s">&quot;198 226 255&quot;</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;col_spec</span> <span class="na">id=</span><span class="s">&quot;2&quot;</span> <span class="na">rgb=</span><span class="s">&quot;255 218 185&quot;</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;col_spec</span> <span class="na">id=</span><span class="s">&quot;3&quot;</span> <span class="na">rgb=</span><span class="s">&quot;255 255 255&quot;</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;col_spec</span> <span class="na">id=</span><span class="s">&quot;4&quot;</span> <span class="na">rgb=</span><span class="s">&quot;101 101 101&quot;</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;col_spec</span> <span class="na">id=</span><span class="s">&quot;7&quot;</span> <span class="na">rgb=</span><span class="s">&quot;123 123 231&quot;</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;mask</span> <span class="na">background=</span><span class="s">&quot;255 255 255&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;components&gt;</span> 1 3 4 5 6 <span class="nt">&lt;/components&gt;</span>
      <span class="nt">&lt;/mask&gt;</span>
  <span class="nt">&lt;/plot&gt;</span>

<span class="nt">&lt;/plots&gt;</span>
</pre></div>
</div>
<p>In this example, OpenMC will produce a plot named <tt class="docutils literal"><span class="pre">myplot.ppm</span></tt> when run in
plotting mode. The picture will be on the xy-plane, depicting the rectangle
between points (-5,-5) and (5,5) with 2000 pixels along each dimension. The
color of each pixel is determined by placing a particle at the center of that
pixel and using OpenMC&#8217;s internal <tt class="docutils literal"><span class="pre">find_cell</span></tt> routine (the same one used for
particle tracking during simulation) to determine the cell and material at that
location. In this example, pixels are 10/2000=0.005 cm wide, so points will be
at (-4.9975,-4.9975), (-4.9950,-4.9975), (-4.9925,-4.9975), etc. This is pointed
out to demonstrate that this plot may miss any features smaller than 0.005 cm,
since they could exist between pixel centers. More pixels can be used to resolve
finer features, but could result in larger files.</p>
<p>The <tt class="docutils literal"><span class="pre">background</span></tt>, <tt class="docutils literal"><span class="pre">col_spec</span></tt>, and <tt class="docutils literal"><span class="pre">mask</span></tt> elements define how to set pixel
colors based on the cell ids at each pixel center. In this example, RGB colors
are specified for cells 1,2,3,4, and 7, a random color will be assigned to cells
5 and 6, and a black background color (<tt class="docutils literal"><span class="pre">rgb=&quot;0</span> <span class="pre">0</span> <span class="pre">0&quot;</span></tt>) will be applied to
locations where no cell is defined. However, the <tt class="docutils literal"><span class="pre">mask</span></tt> element here says that
only cells 1,3,4,5, and 6 should be displayed, with other cells taking a white
color (<tt class="docutils literal"><span class="pre">rgb=&quot;255</span> <span class="pre">255</span> <span class="pre">255&quot;</span></tt>), which overrides the <tt class="docutils literal"><span class="pre">col_spec</span></tt> for cell 2 and
the random color assigned to cell 7.</p>
<p>After running OpenMC to obtain PPM files, images should be saved to another
format before using them elsewhere. This cuts down the size of the file by
orders of magnitude.  Most image viewers and editors that can view PPM images
can also save to other formats (e.g. <a class="reference external" href="http://www.gimp.org/">Gimp</a>, <a class="reference external" href="http://www.irfanview.com/">IrfanView</a>, etc.).  However, more likely the user will want to
convert to another format on the command line.  This is easily accomplished with
the <tt class="docutils literal"><span class="pre">convert</span></tt> command available on most Linux distributions as part of the
<a class="reference external" href="http://www.imagemagick.org/script/convert.php">ImageMagick</a> package. (On
Ubuntu: <tt class="docutils literal"><span class="pre">sudo</span> <span class="pre">apt-get</span> <span class="pre">install</span> <span class="pre">imagemagick</span></tt>).  Images are then converted like:</p>
<div class="highlight-sh"><div class="highlight"><pre>convert myplot.ppm myplot.png
</pre></div>
</div>
</div>
<div class="section" id="plotting-in-3d">
<h3>4.1.2. Plotting in 3D<a class="headerlink" href="#plotting-in-3d" title="Permalink to this headline">¶</a></h3>
<a class="reference internal image-reference" href="../_images/3dgeomplot.png"><img alt="../_images/3dgeomplot.png" src="../_images/3dgeomplot.png" style="height: 200px;" /></a>
<p>See below for a simple example of a plots xml file that demonstrates the
capabilities of 3D voxel plots.</p>
<div class="highlight-xml"><div class="highlight"><pre><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="nt">&lt;plots&gt;</span>

  <span class="nt">&lt;plot</span> <span class="na">id=</span><span class="s">&quot;1&quot;</span> <span class="na">type=</span><span class="s">&quot;voxel&quot;</span> <span class="na">color=</span><span class="s">&quot;mat&quot;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;filename&gt;</span> myplot <span class="nt">&lt;/filename&gt;</span>
      <span class="nt">&lt;origin&gt;</span> 0 0 0 <span class="nt">&lt;/origin&gt;</span>
      <span class="nt">&lt;width&gt;</span> 10 10 10 <span class="nt">&lt;/width&gt;</span>
      <span class="nt">&lt;pixels&gt;</span> 500 500 500 <span class="nt">&lt;/pixels&gt;</span>
  <span class="nt">&lt;/plot&gt;</span>

<span class="nt">&lt;/plots&gt;</span>
</pre></div>
</div>
<p>Voxel plots are built the same way 2D slice plots are, by determining the cell
or material id of a particle at the center of each voxel. In this example, the
space covered is the cube between the points (-5,-5,-5) and (5,5,5), with voxel
centers 10/500 = 0.02 cm apart. The binary VOXEL files that are produced do not
specify any color - instead containing only material or cell ids (material id
in this example) - and thus the <tt class="docutils literal"><span class="pre">background</span></tt>, <tt class="docutils literal"><span class="pre">col_spec</span></tt>, and <tt class="docutils literal"><span class="pre">mask</span></tt>
elements are not used. If no cell is found at a voxel center, an id of -1 is
stored.</p>
<p>The binary VOXEL files output by OpenMC can not be viewed directly by any
existing viewers. In order to view them, they must be converted into a standard
mesh format that can be viewed in ParaView, Visit, etc. This typically will
compress the size of the file significantly. The provided utility voxel.py
accomplishes this for SILO:</p>
<div class="highlight-sh"><div class="highlight"><pre>&lt;openmc_root&gt;/src/utils/voxel.py myplot.voxel -o output.silo
</pre></div>
</div>
<p>and VTK file formats:</p>
<div class="highlight-sh"><div class="highlight"><pre>&lt;openmc_root&gt;/src/utils/voxel.py myplot.voxel --vtk -o output.vti
</pre></div>
</div>
<p>To use this utility you need either</p>
<ul class="simple">
<li><a class="reference external" href="https://github.com/nhorelik/silomesh">Silomesh</a></li>
</ul>
<p>or</p>
<ul class="simple">
<li><a class="reference external" href="http://www.vtk.org/">VTK</a> with python bindings - On Ubuntu, these are
easily obtained with <tt class="docutils literal"><span class="pre">sudo</span> <span class="pre">apt-get</span> <span class="pre">install</span> <span class="pre">python-vtk</span></tt></li>
</ul>
<p>Users can process the binary into any other format if desired by following the
example of voxel.py.  For the binary file structure, see <a class="reference internal" href="../devguide/voxel.html#devguide-voxel"><em>Voxel Plot Binary File Specifications</em></a>.</p>
<p>Once processed into a standard 3D file format, colors and masks can be defined
using the stored id numbers to better explore the geometry. The process for
doing this will depend on the 3D viewer, but should be straightforward.</p>
<a class="reference internal image-reference" href="../_images/3dba.png"><img alt="../_images/3dba.png" src="../_images/3dba.png" style="height: 200px;" /></a>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">3D voxel plotting can be very computer intensive for the viewing
program (Visit, ParaView, etc.) if the number of voxels is large (&gt;10
million or so).  Thus if you want an accurate picture that renders
smoothly, consider using only one voxel in a certain direction. For
instance, the 3D pin lattice figure at the beginning of this section
was generated with a 500x500x1 voxel mesh, which allows for resolution
of the cylinders without wasting too many voxels on the axial
dimension.</p>
</div>
</div>
</div>
<div class="section" id="tally-visualization">
<h2>4.2. Tally Visualization<a class="headerlink" href="#tally-visualization" title="Permalink to this headline">¶</a></h2>
<p>Tally results are saved in both a text file (tallies.out) as well as a binary
statepoint file. While the tallies.out file may be fine for simple tallies, in
many cases the user requires more information about the tally or the run, or
has to deal with a large number of result values (e.g. for mesh tallies).  In
these cases, extracting data from the statepoint file via Python scripting is
the preferred method of data analysis and visualization.</p>
<div class="section" id="data-extraction">
<h3>4.2.1. Data Extraction<a class="headerlink" href="#data-extraction" title="Permalink to this headline">¶</a></h3>
<p>A great deal of information is available in statepoint files (See
<a class="reference internal" href="../devguide/statepoint.html#devguide-statepoint"><em>State Point Binary File Specifications</em></a>), most of which is easily extracted by the provided
utility statepoint.py. This utility provides a Python class to load statepoints
and extract data - it is used in many of the provided plotting utilities, and
can be used in user-created scripts to carry out manipulations of the data. To
read tallies using this utility, make sure statepoint.py is in your PYTHONPATH,
and then import the class, instantiate it, and call read_results:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">statepoint</span> <span class="kn">import</span> <span class="n">StatePoint</span>
<span class="n">sp</span> <span class="o">=</span> <span class="n">StatePoint</span><span class="p">(</span><span class="s">&#39;statepoint.100.binary&#39;</span><span class="p">)</span>
<span class="n">sp</span><span class="o">.</span><span class="n">read_results</span><span class="p">()</span>
</pre></div>
</div>
<p>At this point the user can extract entire scores from tallies into a data
dictionary containing numpy arrays:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">tallyid</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">score</span> <span class="o">=</span> <span class="s">&#39;flux&#39;</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">extract_results</span><span class="p">(</span><span class="n">tallyid</span><span class="p">,</span> <span class="n">score</span><span class="p">)</span>
<span class="n">means</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;means&#39;</span><span class="p">]</span>
<span class="k">print</span> <span class="n">data</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
</pre></div>
</div>
<p>The results from this function contain all filter bins (all mesh points, all
energy groups, etc.), which can be reshaped with the bin ordering also contained
in the output dictionary. This is the best choice of output for easily
integrating ranges of data.</p>
<p>Alternatively the user can extract specific values for a single score/filter
combination:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">tallyid</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">score</span> <span class="o">=</span> <span class="s">&#39;flux&#39;</span>
<span class="n">filters</span> <span class="o">=</span> <span class="p">[(</span><span class="s">&#39;mesh&#39;</span><span class="p">,</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">)),</span> <span class="p">(</span><span class="s">&#39;energyin&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)]</span>
<span class="n">value</span><span class="p">,</span> <span class="n">error</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">get_value</span><span class="p">(</span><span class="n">tallyid</span><span class="p">,</span> <span class="n">filters</span><span class="p">,</span> <span class="n">score</span><span class="p">)</span>
</pre></div>
</div>
<p>In the future more documentation may become available here for statepoint.py and
the data extraction functions of StatePoint objects. However, for now it is up
to the user to explore the classes in statepoint.py to discover what data is
available in StatePoint objects (we highly recommend interactively exploring
with <a class="reference external" href="http://ipython.org/">IPython</a>). Many examples can be found by looking
through the other utilities that use statepoint.py, and a few common
visualization tasks will be described here in the following sections.</p>
</div>
<div class="section" id="id12">
<h3>4.2.2. Plotting in 2D<a class="headerlink" href="#id12" title="Permalink to this headline">¶</a></h3>
<a class="reference internal image-reference" href="../_images/plotmeshtally.png"><img alt="../_images/plotmeshtally.png" src="../_images/plotmeshtally.png" style="height: 200px;" /></a>
<p>For simple viewing of 2D slices of a mesh plot, the utility plot_mesh_tally.py
is provided.  This utility provides an interactive GUI to explore and plot
mesh tallies for any scores and filter bins.  It requires statepoint.py.</p>
<a class="reference internal image-reference" href="../_images/fluxplot.png"><img alt="../_images/fluxplot.png" src="../_images/fluxplot.png" style="height: 200px;" /></a>
<p>Alternatively, the user can write their own Python script to manipulate the data
appropriately. Consider a run where the first tally contains a 105x105x20 mesh
over a small core, with a flux score and two energyin filter bins. To explicitly
extract the data and create a plot with gnuplot, the following script can be
used. The script operates in several steps for clarity, and is not necessarily
the most efficient way to extract data from large mesh tallies. This creates the
two heatmaps in the previous figure.</p>
<div class="highlight-python"><div class="highlight"><pre>  <span class="c">#!/usr/bin/env python</span>

  <span class="kn">import</span> <span class="nn">os</span>

  <span class="kn">import</span> <span class="nn">statepoint</span>

  <span class="c"># load and parse the statepoint file</span>
  <span class="n">sp</span> <span class="o">=</span> <span class="n">statepoint</span><span class="o">.</span><span class="n">StatePoint</span><span class="p">(</span><span class="s">&#39;statepoint.300.binary&#39;</span><span class="p">)</span>
  <span class="n">sp</span><span class="o">.</span><span class="n">read_results</span><span class="p">()</span>

  <span class="n">tallyid</span> <span class="o">=</span> <span class="mi">0</span> <span class="c"># This is tally 1</span>
  <span class="n">score</span> <span class="o">=</span> <span class="mi">0</span>   <span class="c"># This corresponds to flux (see tally.scores)</span>

  <span class="c"># get mesh dimensions</span>
  <span class="n">meshid</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">tallies</span><span class="p">[</span><span class="n">tallyid</span><span class="p">]</span><span class="o">.</span><span class="n">filters</span><span class="p">[</span><span class="s">&#39;mesh&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">bins</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
  <span class="k">for</span> <span class="n">i</span><span class="p">,</span><span class="n">m</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">sp</span><span class="o">.</span><span class="n">meshes</span><span class="p">):</span>
      <span class="k">if</span> <span class="n">m</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="n">meshid</span><span class="p">:</span>
        <span class="n">mesh</span> <span class="o">=</span> <span class="n">m</span>
        <span class="k">break</span>
  <span class="n">nx</span><span class="p">,</span><span class="n">ny</span><span class="p">,</span><span class="n">nz</span> <span class="o">=</span> <span class="n">mesh</span><span class="o">.</span><span class="n">dimension</span>

  <span class="c"># loop through mesh and extract values to python dictionaries</span>
  <span class="n">thermal</span> <span class="o">=</span> <span class="p">{}</span>
  <span class="n">fast</span> <span class="o">=</span> <span class="p">{}</span>
  <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">nx</span><span class="o">+</span><span class="mi">1</span><span class="p">):</span>
      <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">ny</span><span class="o">+</span><span class="mi">1</span><span class="p">):</span>
          <span class="k">for</span> <span class="n">z</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">nz</span><span class="o">+</span><span class="mi">1</span><span class="p">):</span>
              <span class="n">val</span><span class="p">,</span><span class="n">err</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">get_value</span><span class="p">(</span><span class="n">tallyid</span><span class="p">,</span>
                                     <span class="p">[(</span><span class="s">&#39;mesh&#39;</span><span class="p">,(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">z</span><span class="p">)),(</span><span class="s">&#39;energyin&#39;</span><span class="p">,</span><span class="mi">0</span><span class="p">)],</span>
                                     <span class="n">score</span><span class="p">)</span>
              <span class="n">thermal</span><span class="p">[(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">z</span><span class="p">)]</span> <span class="o">=</span> <span class="n">val</span>
              <span class="n">val</span><span class="p">,</span><span class="n">err</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">get_value</span><span class="p">(</span><span class="n">tallyid</span><span class="p">,</span>
                                     <span class="p">[(</span><span class="s">&#39;mesh&#39;</span><span class="p">,(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">z</span><span class="p">)),(</span><span class="s">&#39;energyin&#39;</span><span class="p">,</span><span class="mi">1</span><span class="p">)],</span>
                                     <span class="n">score</span><span class="p">)</span>
              <span class="n">fast</span><span class="p">[(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">z</span><span class="p">)]</span> <span class="o">=</span> <span class="n">val</span>

  <span class="c"># sum up the axial values and write datafile for gnuplot</span>
  <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s">&#39;meshdata.dat&#39;</span><span class="p">,</span><span class="s">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fh</span><span class="p">:</span>
      <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">nx</span><span class="o">+</span><span class="mi">1</span><span class="p">):</span>
          <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">ny</span><span class="o">+</span><span class="mi">1</span><span class="p">):</span>
              <span class="n">thermalval</span> <span class="o">=</span> <span class="mf">0.</span>
              <span class="n">fastval</span> <span class="o">=</span> <span class="mf">0.</span>
              <span class="k">for</span> <span class="n">z</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">nz</span><span class="o">+</span><span class="mi">1</span><span class="p">):</span>
                <span class="n">thermalval</span> <span class="o">+=</span> <span class="n">thermal</span><span class="p">[(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">z</span><span class="p">)]</span>
                <span class="n">fastval</span> <span class="o">+=</span> <span class="n">fast</span><span class="p">[(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">z</span><span class="p">)]</span>
              <span class="n">fh</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&quot;{} {} {} {}</span><span class="se">\n</span><span class="s">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">thermalval</span><span class="p">,</span><span class="n">fastval</span><span class="p">))</span>

  <span class="c"># write gnuplot file</span>
  <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s">&#39;tmp.gnuplot&#39;</span><span class="p">,</span><span class="s">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fh</span><span class="p">:</span>
    <span class="n">fh</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">r&quot;&quot;&quot;set terminal png size 1000 400</span>
<span class="s">set output &#39;fluxplot.png&#39;</span>
<span class="s">set nokey</span>
<span class="s">set autoscale fix</span>
<span class="s">set multiplot layout 1,2 title &quot;Pin Mesh Flux Tally&quot;</span>
<span class="s">set title &quot;Thermal&quot;</span>
<span class="s">plot &#39;meshdata.dat&#39; using 1:2:3 with image</span>
<span class="s">set title &quot;Fast&quot;</span>
<span class="s">plot &#39;meshdata.dat&#39; using 1:2:4 with image</span>
<span class="s">&quot;&quot;&quot;</span><span class="p">)</span>

  <span class="c"># make plot</span>
  <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s">&quot;gnuplot &lt; tmp.gnuplot&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="id13">
<h3>4.2.3. Plotting in 3D<a class="headerlink" href="#id13" title="Permalink to this headline">¶</a></h3>
<a class="reference internal image-reference" href="../_images/3dcore.png"><img alt="../_images/3dcore.png" src="../_images/3dcore.png" style="height: 200px;" /></a>
<p>As with 3D plots of the geometry, meshtally data needs to be put into a standard
format for viewing. The utility statepoint_3d.py is provided to accomplish this
for both VTK and SILO. By default statepoint_3d.py processes a statepoint into a
3D file with all mesh tallies and filter/score combinations,</p>
<div class="highlight-sh"><div class="highlight"><pre>&lt;openmc_root&gt;/src/utils/statepoint_3d.py &lt;statepoint_file&gt; -o output.silo
&lt;openmc_root&gt;/src/utils/statepoint_3d.py &lt;statepoint_file&gt; --vtk -o output.vtm
</pre></div>
</div>
<p>but it also provides several command-line options to selectively process only
certain data arrays in order to keep file sizes down.</p>
<div class="highlight-sh"><div class="highlight"><pre>&lt;openmc_root&gt;/src/utils/statepoint_3d.py &lt;statepoint_file&gt; --tallies 2,4 --scores 4.1,4.3 -o output.silo
&lt;openmc_root&gt;/src/utils/statepoint_3d.py &lt;statepoint_file&gt; --filters 2.energyin.1 --vtk -o output.vtm
</pre></div>
</div>
<p>All available options for specifying a subset of tallies, scores, and filters
can be listed with the <tt class="docutils literal"><span class="pre">--list</span></tt> or <tt class="docutils literal"><span class="pre">-l</span></tt> command line options.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Note that while SILO files can contain multiple meshes in one file,
VTK needs to use a multi-block dataset, which stores each mesh piece
in a different file in a subfolder.  All meshes can be loaded at once
with the main VTM file, or each VTI file in the subfolder can be
loaded individually.</p>
</div>
<p>Alternatively, the user can write their own Python script to manipulate the data
appropriately before insertion into a SILO or VTK file.  For instance, if the
data has been extracted as was done in the 2D plotting example script above, a
SILO file can be created with:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">silomesh</span> <span class="kn">as</span> <span class="nn">sm</span>
<span class="n">sm</span><span class="o">.</span><span class="n">init_silo</span><span class="p">(</span><span class="s">&quot;fluxtally.silo&quot;</span><span class="p">)</span>
<span class="n">sm</span><span class="o">.</span><span class="n">init_mesh</span><span class="p">(</span><span class="s">&#39;tally_mesh&#39;</span><span class="p">,</span> <span class="o">*</span><span class="n">mesh</span><span class="o">.</span><span class="n">dimension</span><span class="p">,</span> <span class="o">*</span><span class="n">mesh</span><span class="o">.</span><span class="n">lower_left</span><span class="p">,</span> <span class="o">*</span><span class="n">mesh</span><span class="o">.</span><span class="n">upper_right</span><span class="p">)</span>
<span class="n">sm</span><span class="o">.</span><span class="n">init_var</span><span class="p">(</span><span class="s">&#39;flux_tally_thermal&#39;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">nx</span><span class="o">+</span><span class="mi">1</span><span class="p">):</span>
  <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">ny</span><span class="o">+</span><span class="mi">1</span><span class="p">):</span>
      <span class="k">for</span> <span class="n">z</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">nz</span><span class="o">+</span><span class="mi">1</span><span class="p">):</span>
        <span class="n">sm</span><span class="o">.</span><span class="n">set_value</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">thermal</span><span class="p">[(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">z</span><span class="p">)]),</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">z</span><span class="p">)</span>
<span class="n">sm</span><span class="o">.</span><span class="n">finalize_var</span><span class="p">()</span>
<span class="n">sm</span><span class="o">.</span><span class="n">init_var</span><span class="p">(</span><span class="s">&#39;flux_tally_fast&#39;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">nx</span><span class="o">+</span><span class="mi">1</span><span class="p">):</span>
  <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">ny</span><span class="o">+</span><span class="mi">1</span><span class="p">):</span>
      <span class="k">for</span> <span class="n">z</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">nz</span><span class="o">+</span><span class="mi">1</span><span class="p">):</span>
          <span class="n">sm</span><span class="o">.</span><span class="n">set_value</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">fast</span><span class="p">[(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">z</span><span class="p">)]),</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">z</span><span class="p">)</span>
<span class="n">sm</span><span class="o">.</span><span class="n">finalize_var</span><span class="p">()</span>
<span class="n">sm</span><span class="o">.</span><span class="n">finalize_mesh</span><span class="p">()</span>
<span class="n">sm</span><span class="o">.</span><span class="n">finalize_silo</span><span class="p">()</span>
</pre></div>
</div>
<p>and the equivalent VTK file with:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">vtk</span>

<span class="n">grid</span> <span class="o">=</span> <span class="n">vtk</span><span class="o">.</span><span class="n">vtkImageData</span><span class="p">()</span>
<span class="n">grid</span><span class="o">.</span><span class="n">SetDimensions</span><span class="p">(</span><span class="n">nx</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="n">ny</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="n">nz</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
<span class="n">grid</span><span class="o">.</span><span class="n">SetOrigin</span><span class="p">(</span><span class="o">*</span><span class="n">mesh</span><span class="o">.</span><span class="n">lower_left</span><span class="p">)</span>
<span class="n">grid</span><span class="o">.</span><span class="n">SetSpacing</span><span class="p">(</span><span class="o">*</span><span class="n">mesh</span><span class="o">.</span><span class="n">width</span><span class="p">)</span>

<span class="c"># vtk cell arrays have x on the inners, so we need to reorder the data</span>
<span class="n">idata</span> <span class="o">=</span> <span class="p">{}</span>
<span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nx</span><span class="p">):</span>
  <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">ny</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">z</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nz</span><span class="p">):</span>
      <span class="n">i</span> <span class="o">=</span> <span class="n">z</span><span class="o">*</span><span class="n">nx</span><span class="o">*</span><span class="n">ny</span> <span class="o">+</span> <span class="n">y</span><span class="o">*</span><span class="n">nx</span> <span class="o">+</span> <span class="n">x</span>
      <span class="n">idata</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">z</span><span class="p">)</span>

<span class="n">vtkfastdata</span> <span class="o">=</span> <span class="n">vtk</span><span class="o">.</span><span class="n">vtkDoubleArray</span><span class="p">()</span>
<span class="n">vtkfastdata</span><span class="o">.</span><span class="n">SetName</span><span class="p">(</span><span class="s">&quot;fast&quot;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nx</span><span class="o">*</span><span class="n">ny</span><span class="o">*</span><span class="n">nz</span><span class="p">):</span>
  <span class="n">vtkfastdata</span><span class="o">.</span><span class="n">InsertNextValue</span><span class="p">(</span><span class="n">fast</span><span class="p">[</span><span class="n">idata</span><span class="p">[</span><span class="n">i</span><span class="p">]])</span>

<span class="n">vtkthermaldata</span> <span class="o">=</span> <span class="n">vtk</span><span class="o">.</span><span class="n">vtkDoubleArray</span><span class="p">()</span>
<span class="n">vtkthermaldata</span><span class="o">.</span><span class="n">SetName</span><span class="p">(</span><span class="s">&quot;thermal&quot;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nx</span><span class="o">*</span><span class="n">ny</span><span class="o">*</span><span class="n">nz</span><span class="p">):</span>
  <span class="n">vtkthermaldata</span><span class="o">.</span><span class="n">InsertNextValue</span><span class="p">(</span><span class="n">thermal</span><span class="p">[</span><span class="n">idata</span><span class="p">[</span><span class="n">i</span><span class="p">]])</span>

<span class="n">grid</span><span class="o">.</span><span class="n">GetCellData</span><span class="p">()</span><span class="o">.</span><span class="n">AddArray</span><span class="p">(</span><span class="n">vtkfastdata</span><span class="p">)</span>
<span class="n">grid</span><span class="o">.</span><span class="n">GetCellData</span><span class="p">()</span><span class="o">.</span><span class="n">AddArray</span><span class="p">(</span><span class="n">vtkthermaldata</span><span class="p">)</span>

<span class="n">writer</span> <span class="o">=</span> <span class="n">vtk</span><span class="o">.</span><span class="n">vtkXMLImageDataWriter</span><span class="p">()</span>
<span class="n">writer</span><span class="o">.</span><span class="n">SetInput</span><span class="p">(</span><span class="n">grid</span><span class="p">)</span>
<span class="n">writer</span><span class="o">.</span><span class="n">SetFileName</span><span class="p">(</span><span class="s">&#39;tally.vti&#39;</span><span class="p">)</span>
<span class="n">writer</span><span class="o">.</span><span class="n">Write</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="getting-data-into-matlab">
<h3>4.2.4. Getting Data into MATLAB<a class="headerlink" href="#getting-data-into-matlab" title="Permalink to this headline">¶</a></h3>
<p>There is currently no front-end utility to dump tally data to MATLAB files, but
the process is straightforward. First extract the data using a custom Python
script with statepoint.py, put the data into appropriately-shaped numpy arrays,
and then use the <a class="reference external" href="http://docs.scipy.org/doc/scipy/reference/tutorial/io.html">Scipy MATLAB IO routines</a> to save to a MAT
file. Note that the data contained in the output from
<tt class="docutils literal"><span class="pre">StatePoint.extract_result</span></tt> is already in a Numpy array that can be reshaped
and dumped to MATLAB in one step.</p>
</div>
</div>
<div class="section" id="particle-track-visualization">
<h2>4.3. Particle Track Visualization<a class="headerlink" href="#particle-track-visualization" title="Permalink to this headline">¶</a></h2>
<a class="reference internal image-reference" href="../_images/Tracks.png"><img alt="../_images/Tracks.png" src="../_images/Tracks.png" style="height: 200px;" /></a>
<p>OpenMC can dump particle tracks—the position of particles as they are
transported through the geometry.  There are two ways to make OpenMC output
tracks: all particle tracks through a command line argument or specific particle
tracks through settings.xml.</p>
<p>Running OpenMC with the argument &#8220;-t&#8221;, &#8220;-track&#8221;, or &#8220;&#8211;track&#8221; will cause a track
file to be created for every particle transported in the code.</p>
<p>The settings.xml file can dictate that specific particle tracks are output.
These particles are specified within a &#8216;&#8217;track&#8217;&#8217; element.  The &#8216;&#8217;track&#8217;&#8217; element
should contain triplets of integers specifying the batch, generation, and
particle numbers, respectively.  For example, to output the tracks for particles
3 and 4 of batch 1 and generation 2 the settings.xml file should contain:</p>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;track&gt;</span>
  1 2 3
  1 2 4
<span class="nt">&lt;/track&gt;</span>
</pre></div>
</div>
<p>After running OpenMC, the directory should contain a file of the form
&#8220;track_(batch #)_(generation #)_(particle #).(binary or h5)&#8221; for each particle
tracked.  These track files can be converted into VTK poly data files with the
&#8220;track.py&#8221; utility.  The usage of track.py is of the form &#8220;track.py [-o OUT] IN&#8221;
where OUT is the optional output filename and IN is one or more filenames
describing track files.  The default output name is &#8220;track.pvtp&#8221;.  A common
usage of track.py is &#8220;track.py track*.binary&#8221; which will use the data from all
binary track files in the directory to write a &#8220;track.pvtp&#8221; VTK output file.
The .pvtp file can then be read and plotted by 3d visualization programs such as
ParaView.</p>
</div>
<div class="section" id="source-site-processing">
<h2>4.4. Source Site Processing<a class="headerlink" href="#source-site-processing" title="Permalink to this headline">¶</a></h2>
<p>For eigenvalue problems, OpenMC will store information on the fission source
sites in the statepoint file by default. For each source site, the weight,
position, sampled direction, and sampled energy are stored. To extract this data
from a statepoint file, the statepoint.py Python module can be used. Below is an
example of an interactive ipython session using the statepoint.py Python module:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">In</span> <span class="p">[</span><span class="mi">1</span><span class="p">]:</span> <span class="kn">import</span> <span class="nn">statepoint</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">2</span><span class="p">]:</span> <span class="n">sp</span> <span class="o">=</span> <span class="n">statepoint</span><span class="o">.</span><span class="n">StatePoint</span><span class="p">(</span><span class="s">&#39;statepoint.100.h5&#39;</span><span class="p">)</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">3</span><span class="p">]:</span> <span class="n">sp</span><span class="o">.</span><span class="n">read_source</span><span class="p">()</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">4</span><span class="p">]:</span> <span class="nb">len</span><span class="p">(</span><span class="n">sp</span><span class="o">.</span><span class="n">source</span><span class="p">)</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">4</span><span class="p">]:</span> <span class="mi">1000</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">5</span><span class="p">]:</span> <span class="n">sp</span><span class="o">.</span><span class="n">source</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">10</span><span class="p">]</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">5</span><span class="p">]:</span>
<span class="p">[</span><span class="o">&lt;</span><span class="n">SourceSite</span><span class="p">:</span> <span class="n">xyz</span><span class="o">=</span><span class="p">[</span>  <span class="mf">2.21980946</span>  <span class="o">-</span><span class="mf">8.92686048</span>  <span class="mf">87.93720485</span><span class="p">]</span> <span class="n">at</span> <span class="n">E</span><span class="o">=</span><span class="mf">0.932923263566</span><span class="o">&gt;</span><span class="p">,</span>
 <span class="o">&lt;</span><span class="n">SourceSite</span><span class="p">:</span> <span class="n">xyz</span><span class="o">=</span><span class="p">[</span>  <span class="mf">2.21980946</span>  <span class="o">-</span><span class="mf">8.92686048</span>  <span class="mf">87.93720485</span><span class="p">]</span> <span class="n">at</span> <span class="n">E</span><span class="o">=</span><span class="mf">0.349240220512</span><span class="o">&gt;</span><span class="p">,</span>
 <span class="o">&lt;</span><span class="n">SourceSite</span><span class="p">:</span> <span class="n">xyz</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mf">31.21542213</span> <span class="o">-</span><span class="mf">30.26762771</span>  <span class="mf">72.10845757</span><span class="p">]</span> <span class="n">at</span> <span class="n">E</span><span class="o">=</span><span class="mf">3.75843584486</span><span class="o">&gt;</span><span class="p">,</span>
 <span class="o">&lt;</span><span class="n">SourceSite</span><span class="p">:</span> <span class="n">xyz</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mf">31.21542213</span> <span class="o">-</span><span class="mf">30.26762771</span>  <span class="mf">72.10845757</span><span class="p">]</span> <span class="n">at</span> <span class="n">E</span><span class="o">=</span><span class="mf">0.80550137267</span><span class="o">&gt;</span><span class="p">,</span>
 <span class="o">&lt;</span><span class="n">SourceSite</span><span class="p">:</span> <span class="n">xyz</span><span class="o">=</span><span class="p">[</span>   <span class="mf">0.18805099</span>  <span class="o">-</span><span class="mf">69.13376508</span>  <span class="mf">103.67726838</span><span class="p">]</span> <span class="n">at</span> <span class="n">E</span><span class="o">=</span><span class="mf">1.67922461097</span><span class="o">&gt;</span><span class="p">,</span>
 <span class="o">&lt;</span><span class="n">SourceSite</span><span class="p">:</span> <span class="n">xyz</span><span class="o">=</span><span class="p">[</span>   <span class="mf">0.18805099</span>  <span class="o">-</span><span class="mf">69.13376508</span>  <span class="mf">103.67726838</span><span class="p">]</span> <span class="n">at</span> <span class="n">E</span><span class="o">=</span><span class="mf">1.16304110199</span><span class="o">&gt;</span><span class="p">,</span>
 <span class="o">&lt;</span><span class="n">SourceSite</span><span class="p">:</span> <span class="n">xyz</span><span class="o">=</span><span class="p">[</span> <span class="o">-</span><span class="mf">50.42189115</span>   <span class="o">-</span><span class="mf">9.96571672</span>  <span class="mf">123.34077905</span><span class="p">]</span> <span class="n">at</span> <span class="n">E</span><span class="o">=</span><span class="mf">0.710937974074</span><span class="o">&gt;</span><span class="p">,</span>
 <span class="o">&lt;</span><span class="n">SourceSite</span><span class="p">:</span> <span class="n">xyz</span><span class="o">=</span><span class="p">[</span> <span class="o">-</span><span class="mf">32.80427668</span>  <span class="o">-</span><span class="mf">15.49316628</span>  <span class="mf">125.26301151</span><span class="p">]</span> <span class="n">at</span> <span class="n">E</span><span class="o">=</span><span class="mf">1.61907104162</span><span class="o">&gt;</span><span class="p">,</span>
 <span class="o">&lt;</span><span class="n">SourceSite</span><span class="p">:</span> <span class="n">xyz</span><span class="o">=</span><span class="p">[</span>  <span class="mf">53.20376026</span>  <span class="o">-</span><span class="mf">15.38643708</span>  <span class="mf">120.58071044</span><span class="p">]</span> <span class="n">at</span> <span class="n">E</span><span class="o">=</span><span class="mf">3.33962024907</span><span class="o">&gt;</span><span class="p">,</span>
 <span class="o">&lt;</span><span class="n">SourceSite</span><span class="p">:</span> <span class="n">xyz</span><span class="o">=</span><span class="p">[</span>  <span class="mf">53.20376026</span>  <span class="o">-</span><span class="mf">15.38643708</span>  <span class="mf">120.58071044</span><span class="p">]</span> <span class="n">at</span> <span class="n">E</span><span class="o">=</span><span class="mf">1.90185680329</span><span class="o">&gt;</span><span class="p">]</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">6</span><span class="p">]:</span> <span class="n">site</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">source</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">7</span><span class="p">]:</span> <span class="n">site</span><span class="o">.</span><span class="n">weight</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">7</span><span class="p">]:</span> <span class="mf">1.0</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">8</span><span class="p">]:</span> <span class="n">site</span><span class="o">.</span><span class="n">xyz</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">8</span><span class="p">]:</span> <span class="n">array</span><span class="p">([</span>  <span class="mf">2.21980946</span><span class="p">,</span>  <span class="o">-</span><span class="mf">8.92686048</span><span class="p">,</span>  <span class="mf">87.93720485</span><span class="p">])</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">9</span><span class="p">]:</span> <span class="n">site</span><span class="o">.</span><span class="n">uvw</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">9</span><span class="p">]:</span> <span class="n">array</span><span class="p">([</span> <span class="mf">0.06740523</span><span class="p">,</span>  <span class="mf">0.50612814</span><span class="p">,</span>  <span class="mf">0.85982024</span><span class="p">])</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">10</span><span class="p">]:</span> <span class="n">site</span><span class="o">.</span><span class="n">E</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">10</span><span class="p">]:</span> <span class="mf">0.93292326356564159</span>
</pre></div>
</div>
</div>
</div>


      </div>
      <div class="bottomnav">
      
        <p>
        «&#160;&#160;<a href="input.html">3. Writing XML Input Files</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="../index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="troubleshoot.html">5. Troubleshooting</a>&#160;&#160;»
        </p>

      </div>


    <div class="footer">
        &copy; Copyright 2011-2014, Massachusetts Institute of Technology.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.
    </div>
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-30411614-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>

  </body>
</html>