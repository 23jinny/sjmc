<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>3. Writing XML Input Files &mdash; OpenMC Documentation</title>
    
    <link rel="stylesheet" href="../_static/haiku.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.7.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="OpenMC Documentation" href="../index.html" />
    <link rel="up" title="User’s Guide" href="index.html" />
    <link rel="next" title="4. Output File Formats" href="output/index.html" />
    <link rel="prev" title="2. Installation and Configuration" href="install.html" /> 
  </head>
  <body role="document">
      <div class="header" role="banner">
        <a href="../index.html">
          <img class="logo" src="../_static/openmc.png" alt="Logo"/>
        </a>
      </div>
      <div class="topnav" role="navigation" aria-label="top navigation">
      
        <p>
        «&#160;&#160;<a href="install.html">2. Installation and Configuration</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="../index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="output/index.html">4. Output File Formats</a>&#160;&#160;»
        </p>

      </div>
      <div class="content">
        
        
  <div class="section" id="writing-xml-input-files">
<span id="usersguide-input"></span><h1>3. Writing XML Input Files<a class="headerlink" href="#writing-xml-input-files" title="Permalink to this headline">¶</a></h1>
<p>Unlike many other Monte Carlo codes which use an arbitrary-format ASCII file
with &#8220;cards&#8221; to specify a particular geometry, materials, and associated run
settings, the input files for OpenMC are structured in a set of <a class="reference external" href="http://www.w3.org/XML/">XML</a> files. XML,
which stands for eXtensible Markup Language, is a simple format that allows data
to be exchanged efficiently between different programs and interfaces.</p>
<p>Anyone who has ever seen webpages written in HTML will be familiar with the
structure of XML whereby &#8220;tags&#8221; enclosed in angle brackets denote that a
particular piece of data will follow. Let us examine the follow example:</p>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;person&gt;</span>
  <span class="nt">&lt;firstname&gt;</span>John<span class="nt">&lt;/firstname&gt;</span>
  <span class="nt">&lt;lastname&gt;</span>Smith<span class="nt">&lt;/lastname&gt;</span>
  <span class="nt">&lt;age&gt;</span>27<span class="nt">&lt;/age&gt;</span>
  <span class="nt">&lt;occupation&gt;</span>Health Physicist<span class="nt">&lt;/occupation&gt;</span>
<span class="nt">&lt;/person&gt;</span>
</pre></div>
</div>
<p>Here we see that the first tag indicates that the following data will describe a
person. The nested tags <em>firstname</em>, <em>lastname</em>, <em>age</em>, and <em>occupation</em>
indicate characteristics about the person being described.</p>
<p>In much the same way, OpenMC input uses XML tags to describe the geometry, the
materials, and settings for a Monte Carlo simulation.</p>
<div class="section" id="overview-of-files">
<h2>3.1. Overview of Files<a class="headerlink" href="#overview-of-files" title="Permalink to this headline">¶</a></h2>
<p>To assemble a complete model for OpenMC, one needs to create separate XML files
for the geometry, materials, and settings. Additionally, there are three optional
input files. The first is a tallies XML file that specifies physical quantities
to be tallied. The second is a plots XML file that specifies regions of geometry
which should be plotted. The third is a CMFD XML file that specifies coarse mesh
acceleration geometry and execution parameters. OpenMC expects that these
files are called:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">geometry.xml</span></code></li>
<li><code class="docutils literal"><span class="pre">materials.xml</span></code></li>
<li><code class="docutils literal"><span class="pre">settings.xml</span></code></li>
<li><code class="docutils literal"><span class="pre">tallies.xml</span></code></li>
<li><code class="docutils literal"><span class="pre">plots.xml</span></code></li>
<li><code class="docutils literal"><span class="pre">cmfd.xml</span></code></li>
</ul>
</div>
<div class="section" id="validating-xml-files">
<h2>3.2. Validating XML Files<a class="headerlink" href="#validating-xml-files" title="Permalink to this headline">¶</a></h2>
<p>Input files can be checked before executing OpenMC using the
<code class="docutils literal"><span class="pre">openmc-validate-xml</span></code> script which is installed alongside the Python API. Two
command line arguments can be set when running <code class="docutils literal"><span class="pre">openmc-validate-xml</span></code>:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">-i</span></code>, <code class="docutils literal"><span class="pre">--input-path</span></code> - Location of OpenMC input files.
<em>Default</em>: current working directory</li>
<li><code class="docutils literal"><span class="pre">-r</span></code>, <code class="docutils literal"><span class="pre">--relaxng-path</span></code> - Location of OpenMC RelaxNG files.
<em>Default</em>: None</li>
</ul>
<p>If the RelaxNG path is not set, the script will search for these files because
it expects that the user is either running the script located in the install
directory <code class="docutils literal"><span class="pre">bin</span></code> folder or in <code class="docutils literal"><span class="pre">src/utils</span></code>. Once executed, it will match
OpenMC XML files with their RelaxNG schema and check if they are valid.  Below
is a table of the messages that will be printed after each file is checked.</p>
<table border="1" class="docutils">
<colgroup>
<col width="41%" />
<col width="59%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Message</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>[XML ERROR]</td>
<td>Cannot parse XML file.</td>
</tr>
<tr class="row-odd"><td>[NO RELAXNG FOUND]</td>
<td>No RelaxNG file found for XML file.</td>
</tr>
<tr class="row-even"><td>[NOT VALID]</td>
<td>XML file does not match RelaxNG.</td>
</tr>
<tr class="row-odd"><td>[VALID]</td>
<td>XML file matches RelaxNG.</td>
</tr>
</tbody>
</table>
<p>As an example, if OpenMC is installed in the directory <code class="docutils literal"><span class="pre">/opt/openmc/</span></code> and the
current working directory is where OpenMC XML input files are located, they can
be validated using the following command:</p>
<div class="highlight-bash"><div class="highlight"><pre>/opt/openmc/bin/openmc-validate-xml
</pre></div>
</div>
</div>
<div class="section" id="settings-specification-settings-xml">
<h2>3.3. Settings Specification &#8211; settings.xml<a class="headerlink" href="#settings-specification-settings-xml" title="Permalink to this headline">¶</a></h2>
<p>All simulation parameters and miscellaneous options are specified in the
settings.xml file.</p>
<div class="section" id="confidence-intervals-element">
<h3>3.3.1. <code class="docutils literal"><span class="pre">&lt;confidence_intervals&gt;</span></code> Element<a class="headerlink" href="#confidence-intervals-element" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal"><span class="pre">&lt;confidence_intervals&gt;</span></code> element has no attributes and has an accepted
value of &#8220;true&#8221; or &#8220;false&#8221;. If set to &#8220;true&#8221;, uncertainties on tally results
will be reported as the half-width of the 95% two-sided confidence interval. If
set to &#8220;false&#8221;, uncertainties on tally results will be reported as the sample
standard deviation.</p>
<blockquote>
<div><em>Default</em>: false</div></blockquote>
</div>
<div class="section" id="cross-sections-element">
<span id="cross-sections"></span><h3>3.3.2. <code class="docutils literal"><span class="pre">&lt;cross_sections&gt;</span></code> Element<a class="headerlink" href="#cross-sections-element" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal"><span class="pre">&lt;cross_sections&gt;</span></code> element has no attributes and simply indicates the path
to an XML cross section listing file (usually named cross_sections.xml). If this
element is absent from the settings.xml file, the <span class="target" id="index-0"></span><code class="xref std std-envvar docutils literal"><span class="pre">CROSS_SECTIONS</span></code>
environment variable will be used to find the path to the XML cross section
listing.</p>
</div>
<div class="section" id="cutoff-element">
<h3>3.3.3. <code class="docutils literal"><span class="pre">&lt;cutoff&gt;</span></code> Element<a class="headerlink" href="#cutoff-element" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal"><span class="pre">&lt;cutoff&gt;</span></code> element indicates the weight cutoff used below which particles
undergo Russian roulette. Surviving particles are assigned a user-determined
weight. Note that weight cutoffs and Russian rouletting are not turned on by
default. This element has the following attributes/sub-elements:</p>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">weight:</th><td class="field-body"><p class="first">The weight below which particles undergo Russian roulette.</p>
<p><em>Default</em>: 0.25</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">weight_avg:</th><td class="field-body"><p class="first">The weight that is assigned to particles that are not killed after Russian
roulette.</p>
<p class="last"><em>Default</em>: 1.0</p>
</td>
</tr>
</tbody>
</table>
</div></blockquote>
</div>
<div class="section" id="eigenvalue-element">
<span id="eigenvalue"></span><h3>3.3.4. <code class="docutils literal"><span class="pre">&lt;eigenvalue&gt;</span></code> Element<a class="headerlink" href="#eigenvalue-element" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal"><span class="pre">&lt;eigenvalue&gt;</span></code> element indicates that a <img class="math" src="../_images/math/e9203da50e1059455123460d4e716c9c7f440cc3.png" alt="k"/>-eigenvalue calculation
should be performed. It has the following attributes/sub-elements:</p>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">batches:</th><td class="field-body"><p class="first">The total number of batches, where each batch corresponds to multiple
fission source iterations. Batching is done to eliminate correlation between
realizations of random variables.</p>
<p><em>Default</em>: None</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">generations_per_batch:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body"><p class="first">The number of total fission source iterations per batch.</p>
<p><em>Default</em>: 1</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">inactive:</th><td class="field-body"><p class="first">The number of inactive batches. In general, the starting cycles in a
criticality calculation can not be used to contribute to tallies since the
fission source distribution and eigenvalue are generally not converged
immediately.</p>
<p><em>Default</em>: None</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">particles:</th><td class="field-body"><p class="first">The number of neutrons to simulate per fission source iteration.</p>
<p><em>Default</em>: None</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">keff_trigger:</th><td class="field-body"><p class="first">This tag specifies a precision trigger on the combined <img class="math" src="../_images/math/e45162800d593c2dee55555d800d84157e75ae00.png" alt="k_{eff}"/>. The
trigger is a convergence criterion on the uncertainty of the estimated
eigenvalue. It has the following attributes/sub-elements:</p>
<table class="last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">type:</th><td class="field-body"><p class="first">The type of precision trigger. Accepted options are &#8220;variance&#8221;, &#8220;std_dev&#8221;,
and &#8220;rel_err&#8221;.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">variance:</th><td class="field-body">Variance of the batch mean <img class="math" src="../_images/math/93c29bfedc993de115781b4fbb7e3a8b9e8d6b51.png" alt="\sigma^2"/></td>
</tr>
<tr class="field-even field"><th class="field-name">std_dev:</th><td class="field-body">Standard deviation of the batch mean <img class="math" src="../_images/math/2298cf1485084afe72757a9c8483af49a138d81f.png" alt="\sigma"/></td>
</tr>
<tr class="field-odd field"><th class="field-name">rel_err:</th><td class="field-body">Relative error of the batch mean <img class="math" src="../_images/math/c9c838f8fbbfc1a034d065ca86954b9960435b74.png" alt="\frac{\sigma}{\mu}"/></td>
</tr>
</tbody>
</table>
<p><em>Default</em>: None</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">threshold:</th><td class="field-body"><p class="first">The precision trigger&#8217;s convergence criterion for the
combined <img class="math" src="../_images/math/e45162800d593c2dee55555d800d84157e75ae00.png" alt="k_{eff}"/>.</p>
<p class="last"><em>Default</em>: None</p>
</td>
</tr>
</tbody>
</table>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">See section on the <a class="reference internal" href="#trigger"><span>&lt;trigger&gt; Element</span></a> for more information.</p>
</div>
</div></blockquote>
</div>
<div class="section" id="energy-grid-element">
<h3>3.3.5. <code class="docutils literal"><span class="pre">&lt;energy_grid&gt;</span></code> Element<a class="headerlink" href="#energy-grid-element" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal"><span class="pre">&lt;energy_grid&gt;</span></code> element determines the treatment of the energy grid during
a simulation. The valid options are &#8220;nuclide&#8221;, &#8220;logarithm&#8221;, and
&#8220;material-union&#8221;. Setting this element to &#8220;nuclide&#8221; will cause OpenMC to use a
nuclide&#8217;s energy grid when determining what points to interpolate between for
determining cross sections (i.e. non-unionized energy grid). Setting this
element to &#8220;logarithm&#8221; causes OpenMC to use a logarithmic mapping technique
described in <a class="reference external" href="https://laws.lanl.gov/vhosts/mcnp.lanl.gov/pdf_files/la-ur-14-24530.pdf">LA-UR-14-24530</a>. Setting this element to &#8220;material-union&#8221; will
cause OpenMC to create energy grids that are unionized material-by-material and
use these grids when determining the energy-cross section pairs to interpolate
cross section values between.</p>
<blockquote>
<div><em>Default</em>: logarithm</div></blockquote>
</div>
<div class="section" id="entropy-element">
<h3>3.3.6. <code class="docutils literal"><span class="pre">&lt;entropy&gt;</span></code> Element<a class="headerlink" href="#entropy-element" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal"><span class="pre">&lt;entropy&gt;</span></code> element describes a mesh that is used for calculating Shannon
entropy. This mesh should cover all possible fissionable materials in the
problem. It has the following attributes/sub-elements:</p>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">dimension:</th><td class="field-body"><p class="first">The number of mesh cells in the x, y, and z directions, respectively.</p>
<dl class="docutils">
<dt><em>Default</em>: If this tag is not present, the number of mesh cells is</dt>
<dd><p class="first last">automatically determined by the code.</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">lower_left:</th><td class="field-body"><p class="first">The Cartesian coordinates of the lower-left corner of the mesh.</p>
<p><em>Default</em>: None</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">upper_right:</th><td class="field-body"><p class="first">The Cartesian coordinates of the upper-right corner of the mesh.</p>
<p class="last"><em>Default</em>: None</p>
</td>
</tr>
</tbody>
</table>
</div></blockquote>
</div>
<div class="section" id="fixed-source-element">
<h3>3.3.7. <code class="docutils literal"><span class="pre">&lt;fixed_source&gt;</span></code> Element<a class="headerlink" href="#fixed-source-element" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal"><span class="pre">&lt;fixed_source&gt;</span></code> element indicates that a fixed source calculation should
be performed. It has the following attributes/sub-elements:</p>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">batches:</th><td class="field-body"><p class="first">The total number of batches. For fixed source calculations, each batch
represents a realization of random variables for tallies.</p>
<p><em>Default</em>: None</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">particles:</th><td class="field-body"><p class="first">The number of particles to simulate per batch.</p>
<p class="last"><em>Default</em>: None</p>
</td>
</tr>
</tbody>
</table>
</div></blockquote>
</div>
<div class="section" id="log-grid-bins-element">
<h3>3.3.8. <code class="docutils literal"><span class="pre">&lt;log_grid_bins&gt;</span></code> Element<a class="headerlink" href="#log-grid-bins-element" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal"><span class="pre">&lt;log_grid_bins&gt;</span></code> element indicates the number of bins to use for the
logarithmic-mapped energy grid. Using more bins will result in energy grid
searches over a smaller range at the expense of more memory. The default is
based on the recommended value in <a class="reference external" href="https://laws.lanl.gov/vhosts/mcnp.lanl.gov/pdf_files/la-ur-14-24530.pdf">LA-UR-14-24530</a>.</p>
<blockquote>
<div><em>Default</em>: 8000</div></blockquote>
</div>
<div class="section" id="natural-elements-element">
<span id="natural-elements"></span><h3>3.3.9. <code class="docutils literal"><span class="pre">&lt;natural_elements&gt;</span></code> Element<a class="headerlink" href="#natural-elements-element" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal"><span class="pre">&lt;natural_elements&gt;</span></code> element indicates to OpenMC what nuclides are
available in the cross section library when expanding an <code class="docutils literal"><span class="pre">&lt;element&gt;</span></code> into
separate isotopes (see <a class="reference internal" href="#material"><span>&lt;material&gt; Element</span></a>). The accepted values are:</p>
<blockquote>
<div><ul class="simple">
<li>ENDF/B-VII.0</li>
<li>ENDF/B-VII.1</li>
<li>JEFF-3.1.1</li>
<li>JEFF-3.1.2</li>
<li>JEFF-3.2</li>
<li>JENDL-3.2</li>
<li>JENDL-3.3</li>
<li>JENDL-4.0</li>
</ul>
</div></blockquote>
<p>Note that the value is case-insensitive, so &#8220;ENDF/B-VII.1&#8221; is equivalent to
&#8220;endf/b-vii.1&#8221;.</p>
<blockquote>
<div><em>Default</em>: ENDF/B-VII.1</div></blockquote>
</div>
<div class="section" id="no-reduce-element">
<h3>3.3.10. <code class="docutils literal"><span class="pre">&lt;no_reduce&gt;</span></code> Element<a class="headerlink" href="#no-reduce-element" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal"><span class="pre">&lt;no_reduce&gt;</span></code> element has no attributes and has an accepted value of
&#8220;true&#8221; or &#8220;false&#8221;. If set to &#8220;true&#8221;, all user-defined tallies and global tallies
will not be reduced across processors in a parallel calculation. This means that
the accumulate score in one batch on a single processor is considered as an
independent realization for the tally random variable. For a problem with large
tally data, this option can significantly improve the parallel efficiency.</p>
<blockquote>
<div><em>Default</em>: false</div></blockquote>
</div>
<div class="section" id="output-element">
<h3>3.3.11. <code class="docutils literal"><span class="pre">&lt;output&gt;</span></code> Element<a class="headerlink" href="#output-element" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal"><span class="pre">&lt;output&gt;</span></code> element determines what output files should be written to disk
during the run. The sub-elements are described below, where &#8220;true&#8221; will write
out the file and &#8220;false&#8221; will not.</p>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">cross_sections:</th><td class="field-body"><p class="first">Writes out an ASCII summary file of the cross sections that were read in.</p>
<p><em>Default</em>: false</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">summary:</th><td class="field-body"><p class="first">Writes out an ASCII summary file describing all of the user input files that
were read in.</p>
<p><em>Default</em>: false</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">tallies:</th><td class="field-body"><p class="first">Write out an ASCII file of tally results.</p>
<p class="last"><em>Default</em>: true</p>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The tally results will always be written to a binary/HDF5 state
point file.</p>
</div>
</div></blockquote>
</div>
<div class="section" id="output-path-element">
<h3>3.3.12. <code class="docutils literal"><span class="pre">&lt;output_path&gt;</span></code> Element<a class="headerlink" href="#output-path-element" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal"><span class="pre">&lt;output_path&gt;</span></code> element specifies an absolute or relative path where all
output files should be written to. The specified path must exist or else OpenMC
will abort.</p>
<blockquote>
<div><em>Default</em>: Current working directory</div></blockquote>
</div>
<div class="section" id="ptables-element">
<h3>3.3.13. <code class="docutils literal"><span class="pre">&lt;ptables&gt;</span></code> Element<a class="headerlink" href="#ptables-element" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal"><span class="pre">&lt;ptables&gt;</span></code> element determines whether probability tables should be used
in the unresolved resonance range if available. This element has no attributes
or sub-elements and can be set to either &#8220;false&#8221; or &#8220;true&#8221;.</p>
<blockquote>
<div><em>Default</em>: true</div></blockquote>
</div>
<div class="section" id="resonance-scattering-element">
<h3>3.3.14. <code class="docutils literal"><span class="pre">&lt;resonance_scattering&gt;</span></code> Element<a class="headerlink" href="#resonance-scattering-element" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal"><span class="pre">resonance_scattering</span></code> element can contain one or more of the following
attributes or sub-elements:</p>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">scatterer:</th><td class="field-body"><p class="first">An element with attributes/sub-elements called <code class="docutils literal"><span class="pre">nuclide</span></code>, <code class="docutils literal"><span class="pre">method</span></code>,
<code class="docutils literal"><span class="pre">xs_label</span></code>, <code class="docutils literal"><span class="pre">xs_label_0K</span></code>, <code class="docutils literal"><span class="pre">E_min</span></code>, and <code class="docutils literal"><span class="pre">E_max</span></code>. The <code class="docutils literal"><span class="pre">nuclide</span></code>
attribute is the name, as given by the <code class="docutils literal"><span class="pre">name</span></code> attribute within the
<code class="docutils literal"><span class="pre">nuclide</span></code> sub-element of the <code class="docutils literal"><span class="pre">material</span></code> element in <code class="docutils literal"><span class="pre">materials.xml</span></code>,
of the nuclide to which a resonance scattering treatment is to be applied.
The <code class="docutils literal"><span class="pre">method</span></code> attribute gives the type of resonance scattering treatment
that is to be applied to the <code class="docutils literal"><span class="pre">nuclide</span></code>.  Acceptable inputs - none of
which are case-sensitive - for the <code class="docutils literal"><span class="pre">method</span></code> attribute are <code class="docutils literal"><span class="pre">ARES</span></code>,
<code class="docutils literal"><span class="pre">CXS</span></code>, <code class="docutils literal"><span class="pre">WCM</span></code>, and <code class="docutils literal"><span class="pre">DBRC</span></code>.  Descriptions of each of these methods
are documented <a class="reference external" href="http://dx.doi.org/10.1016/j.anucene.2014.01.017">here</a>.  The <code class="docutils literal"><span class="pre">xs_label</span></code> attribute gives the label for the
cross section data of the <code class="docutils literal"><span class="pre">nuclide</span></code> at a given temperature.  The
<code class="docutils literal"><span class="pre">xs_label_0K</span></code> gives the label for the 0 K cross section data for the
<code class="docutils literal"><span class="pre">nuclide</span></code>.  The <code class="docutils literal"><span class="pre">E_min</span></code> attribute gives the minimum energy above
which the <code class="docutils literal"><span class="pre">method</span></code> is applied.  The <code class="docutils literal"><span class="pre">E_max</span></code> attribute gives the
maximum energy below which the <code class="docutils literal"><span class="pre">method</span></code> is applied.  One example would
be as follows:</p>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;resonance_scattering&gt;</span>
  <span class="nt">&lt;scatterer&gt;</span>
    <span class="nt">&lt;nuclide&gt;</span>U-238<span class="nt">&lt;/nuclide&gt;</span>
    <span class="nt">&lt;method&gt;</span>ARES<span class="nt">&lt;/method&gt;</span>
    <span class="nt">&lt;xs_label&gt;</span>92238.72c<span class="nt">&lt;/xs_label&gt;</span>
    <span class="nt">&lt;xs_label_0K&gt;</span>92238.00c<span class="nt">&lt;/xs_label_0K&gt;</span>
    <span class="nt">&lt;E_min&gt;</span>5.0e-6<span class="nt">&lt;/E_min&gt;</span>
    <span class="nt">&lt;E_max&gt;</span>40.0e-6<span class="nt">&lt;/E_max&gt;</span>
 <span class="nt">&lt;/scatterer&gt;</span>
 <span class="nt">&lt;scatterer&gt;</span>
    <span class="nt">&lt;nuclide&gt;</span>Pu-239<span class="nt">&lt;/nuclide&gt;</span>
    <span class="nt">&lt;method&gt;</span>dbrc<span class="nt">&lt;/method&gt;</span>
    <span class="nt">&lt;xs_label&gt;</span>94239.72c<span class="nt">&lt;/xs_label&gt;</span>
    <span class="nt">&lt;xs_label_0K&gt;</span>94239.00c<span class="nt">&lt;/xs_label_0K&gt;</span>
    <span class="nt">&lt;E_min&gt;</span>0.01e-6<span class="nt">&lt;/E_min&gt;</span>
    <span class="nt">&lt;E_max&gt;</span>210.0e-6<span class="nt">&lt;/E_max&gt;</span>
  <span class="nt">&lt;/scatterer&gt;</span>
<span class="nt">&lt;/resonance_scattering&gt;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If the <code class="docutils literal"><span class="pre">resonance_scattering</span></code> element is not given, the free gas,
constant cross section (<code class="docutils literal"><span class="pre">cxs</span></code>) scattering model, which has
historically been used by Monte Carlo codes to sample target
velocities, is used to treat the target motion of all nuclides.  If
<code class="docutils literal"><span class="pre">resonance_scattering</span></code> is present, the <code class="docutils literal"><span class="pre">cxs</span></code> method is applied
below <code class="docutils literal"><span class="pre">E_min</span></code> and the target-at-rest (asymptotic) kernel is used
above <code class="docutils literal"><span class="pre">E_max</span></code>.  An arbitrary number of <code class="docutils literal"><span class="pre">scatterer</span></code> elements may
be specified, each corresponding to a single nuclide at a single
temperature.</p>
</div>
<p class="last"><em>Defaults</em>: None (scatterer), ARES (method), 0.01 eV (E_min), 1.0 keV (E_max)</p>
</td>
</tr>
</tbody>
</table>
</div></blockquote>
</div>
<div class="section" id="run-cmfd-element">
<h3>3.3.15. <code class="docutils literal"><span class="pre">&lt;run_cmfd&gt;</span></code> Element<a class="headerlink" href="#run-cmfd-element" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal"><span class="pre">&lt;run_cmfd&gt;</span></code> element indicates whether or not CMFD acceleration should be
turned on or off. This element has no attributes or sub-elements and can be set
to either &#8220;false&#8221; or &#8220;true&#8221;.</p>
<blockquote>
<div><em>Defualt</em>: false</div></blockquote>
</div>
<div class="section" id="seed-element">
<h3>3.3.16. <code class="docutils literal"><span class="pre">&lt;seed&gt;</span></code> Element<a class="headerlink" href="#seed-element" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal"><span class="pre">seed</span></code> element is used to set the seed used for the linear congruential
pseudo-random number generator.</p>
<blockquote>
<div><em>Default</em>: 1</div></blockquote>
</div>
<div class="section" id="source-element">
<h3>3.3.17. <code class="docutils literal"><span class="pre">&lt;source&gt;</span></code> Element<a class="headerlink" href="#source-element" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal"><span class="pre">source</span></code> element gives information on an external source distribution to
be used either as the source for a fixed source calculation or the initial
source guess for criticality calculations. It takes the following
attributes/sub-elements:</p>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">file:</th><td class="field-body"><p class="first">If this attribute is given, it indicates that the source is to be read from
a binary source file whose path is given by the value of this element. Note,
the number of source sites needs to be the same as the number of particles
simulated in a fission source generation.</p>
<p><em>Default</em>: None</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">space:</th><td class="field-body"><p class="first">An element specifying the spatial distribution of source sites. This element
has the following attributes:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">type:</th><td class="field-body"><p class="first">The type of spatial distribution. Valid options are &#8220;box&#8221;, &#8220;fission&#8221;, and
&#8220;point&#8221;. A &#8220;box&#8221; spatial distribution has coordinates sampled uniformly in
a parallelepiped. A &#8220;fission&#8221; spatial distribution samples locations from
a &#8220;box&#8221; distribution but only locations in fissionable materials are
accepted. A &#8220;point&#8221; spatial distribution has coordinates specified by a
triplet.</p>
<p><em>Default</em>: None</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">parameters:</th><td class="field-body"><p class="first">For a &#8220;box&#8221; or &#8220;fission&#8221; spatial distribution, <code class="docutils literal"><span class="pre">parameters</span></code> should be
given as six real numbers, the first three of which specify the lower-left
corner of a parallelepiped and the last three of which specify the
upper-right corner. Source sites are sampled uniformly through that
parallelepiped.</p>
<p>For a &#8220;point&#8221; spatial distribution, <code class="docutils literal"><span class="pre">parameters</span></code> should be given as
three real numbers which specify the (x,y,z) location of an isotropic
point source</p>
<p class="last"><em>Default</em>: None</p>
</td>
</tr>
</tbody>
</table>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">angle:</th><td class="field-body"><p class="first">An element specifying the angular distribution of source sites. This element
has the following attributes:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">type:</th><td class="field-body"><p class="first">The type of angular distribution. Valid options are &#8220;isotropic&#8221; and
&#8220;monodirectional&#8221;. The angle of the particle emitted from a source site is
isotropic if the &#8220;isotropic&#8221; option is given. The angle of the particle
emitted from a source site is the direction specified in the &lt;parameters&gt;
attribute if &#8220;monodirectional&#8221; option is given.</p>
<p><em>Default</em>: isotropic</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">parameters:</th><td class="field-body"><p class="first">For an &#8220;isotropic&#8221; angular distribution, <code class="docutils literal"><span class="pre">parameters</span></code> should not be
specified.</p>
<p>For a &#8220;monodirectional&#8221; angular distribution, <code class="docutils literal"><span class="pre">parameters</span></code> should be
given as three real numbers which specify the angular cosines with respect
to each axis.</p>
<p class="last"><em>Default</em>: None</p>
</td>
</tr>
</tbody>
</table>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">energy:</th><td class="field-body"><p class="first">An element specifying the energy distribution of source sites. This element
has the following attributes:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">type:</th><td class="field-body"><p class="first">The type of energy distribution. Valid options are &#8220;monoenergetic&#8221;,
&#8220;watt&#8221;, and &#8220;maxwell&#8221;. The &#8220;monoenergetic&#8221; option produces source sites at
a single energy. The &#8220;watt&#8221; option produces source sites whose energy is
sampled from a Watt fission spectrum. The &#8220;maxwell&#8221; option produce source
sites whose energy is sampled from a Maxwell fission spectrum.</p>
<p><em>Default</em>: watt</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">parameters:</th><td class="field-body"><p class="first">For a &#8220;monoenergetic&#8221; energy distribution, <code class="docutils literal"><span class="pre">parameters</span></code> should be
given as the energy in MeV of the source sites.</p>
<p>For a &#8220;watt&#8221; energy distribution, <code class="docutils literal"><span class="pre">parameters</span></code> should be given as two
real numbers <img class="math" src="../_images/math/7dd2a5ea01fbd72ad2a58dd1f3d6ecbfde6208a1.png" alt="a"/> and <img class="math" src="../_images/math/5e87bf41a96deddf6cb485ff530f153f2590e9cc.png" alt="b"/> that parameterize the distribution
<img class="math" src="../_images/math/ebe2dcd5d61a719dd0d414151fdc2916ddd399fc.png" alt="p(E) dE = c e^{-E/a} \sinh \sqrt{b \, E} dE"/>.</p>
<p>For a &#8220;maxwell&#8221; energy distribution, <code class="docutils literal"><span class="pre">parameters</span></code> should be given as one
real number <img class="math" src="../_images/math/7dd2a5ea01fbd72ad2a58dd1f3d6ecbfde6208a1.png" alt="a"/> that parameterizes the distribution <img class="math" src="../_images/math/a4d3f7c21336eaee4841e5026145a83563306556.png" alt="p(E) dE =
c E e^{-E/a} dE"/>.</p>
<p class="last"><em>Default</em>: 0.988 2.249</p>
</td>
</tr>
</tbody>
</table>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">write_initial:</th><td class="field-body"><p class="first">An element specifying whether to write out the initial source bank used at
the beginning of the first batch. The output file is named
&#8220;initial_source.binary(h5)&#8221;</p>
<blockquote class="last">
<div><p><em>Default</em>: false</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</div></blockquote>
</div>
<div class="section" id="state-point-element">
<h3>3.3.18. <code class="docutils literal"><span class="pre">&lt;state_point&gt;</span></code> Element<a class="headerlink" href="#state-point-element" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal"><span class="pre">&lt;state_point&gt;</span></code> element indicates at what batches a state point file
should be written. A state point file can be used to restart a run or to get
tally results at any batch. The default behavior when using this tag is to
write out the source bank in the state_point file. This behavior can be
customized by using the <code class="docutils literal"><span class="pre">&lt;source_point&gt;</span></code> element. This element has the
following attributes/sub-elements:</p>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">batches:</th><td class="field-body"><p class="first">A list of integers separated by spaces indicating at what batches a state
point file should be written.</p>
<p><em>Default</em>: Last batch only</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">interval:</th><td class="field-body"><p class="first">A single integer <img class="math" src="../_images/math/413f8a8e40062a9090d9d50b88bc7b551b314c26.png" alt="n"/> indicating that a state point should be written
every <img class="math" src="../_images/math/413f8a8e40062a9090d9d50b88bc7b551b314c26.png" alt="n"/> batches. This option can be given in lieu of listing
batches explicitly.</p>
<p class="last"><em>Default</em>: None</p>
</td>
</tr>
</tbody>
</table>
</div></blockquote>
</div>
<div class="section" id="source-point-element">
<h3>3.3.19. <code class="docutils literal"><span class="pre">&lt;source_point&gt;</span></code> Element<a class="headerlink" href="#source-point-element" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal"><span class="pre">&lt;source_point&gt;</span></code> element indicates at what batches the source bank
should be written. The source bank can be either written out within a state
point file or separately in a source point file. This element has the following
attributes/sub-elements:</p>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">batches:</th><td class="field-body"><p class="first">A list of integers separated by spaces indicating at what batches a state
point file should be written. It should be noted that if the <code class="docutils literal"><span class="pre">separate</span></code>
attribute is not set to &#8220;true&#8221;, this list must be a subset of state point
batches.</p>
<p><em>Default</em>: Last batch only</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">interval:</th><td class="field-body"><p class="first">A single integer <img class="math" src="../_images/math/413f8a8e40062a9090d9d50b88bc7b551b314c26.png" alt="n"/> indicating that a state point should be written
every <img class="math" src="../_images/math/413f8a8e40062a9090d9d50b88bc7b551b314c26.png" alt="n"/> batches. This option can be given in lieu of listing batches
explicitly. It should be noted that if the <code class="docutils literal"><span class="pre">separate</span></code> attribute is not set
to &#8220;true&#8221;, this value should produce a list of batches that is a subset of
state point batches.</p>
<p><em>Default</em>: None</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">separate:</th><td class="field-body"><p class="first">If this element is set to &#8220;true&#8221;, a separate binary source point file will
be written. Otherwise, the source sites will be written in the state point
directly.</p>
<p><em>Default</em>: false</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">source_write:</th><td class="field-body"><p class="first">If this element is set to &#8220;false&#8221;, source sites are not written
to the state point or source point file. This can substantially reduce the
size of state points if large numbers of particles per batch are used.</p>
<p><em>Default</em>: true</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">overwrite_latest:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body"><p class="first">If this element is set to &#8220;true&#8221;, a source point file containing
the source bank will be written out to a separate file named
<code class="docutils literal"><span class="pre">source.binary</span></code> or <code class="docutils literal"><span class="pre">source.h5</span></code> depending on if HDF5 is enabled.
This file will be overwritten at every single batch so that the latest
source bank will be available. It should be noted that a user can set both
this element to &#8220;true&#8221; and specify batches to write a permanent source bank.</p>
<p class="last"><em>Default</em>: false</p>
</td>
</tr>
</tbody>
</table>
</div></blockquote>
</div>
<div class="section" id="survival-biasing-element">
<h3>3.3.20. <code class="docutils literal"><span class="pre">&lt;survival_biasing&gt;</span></code> Element<a class="headerlink" href="#survival-biasing-element" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal"><span class="pre">&lt;survival_biasing&gt;</span></code> element has no attributes and has an accepted value
of &#8220;true&#8221; or &#8220;false&#8221;. If set to &#8220;true&#8221;, this option will enable the use of
survival biasing, otherwise known as implicit capture or absorption.</p>
<blockquote>
<div><em>Default</em>: false</div></blockquote>
</div>
<div class="section" id="threads-element">
<h3>3.3.21. <code class="docutils literal"><span class="pre">&lt;threads&gt;</span></code> Element<a class="headerlink" href="#threads-element" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal"><span class="pre">&lt;threads&gt;</span></code> element indicates the number of OpenMP threads to be used for
a simulation. It has no attributes and accepts a positive integer value.</p>
<blockquote>
<div><em>Default</em>: None (Determined by environment variable <span class="target" id="index-1"></span><code class="xref std std-envvar docutils literal"><span class="pre">OMP_NUM_THREADS</span></code>)</div></blockquote>
</div>
<div class="section" id="trace-element">
<span id="trace"></span><h3>3.3.22. <code class="docutils literal"><span class="pre">&lt;trace&gt;</span></code> Element<a class="headerlink" href="#trace-element" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal"><span class="pre">&lt;trace&gt;</span></code> element can be used to print out detailed information about a
single particle during a simulation. This element should be followed by three
integers: the batch number, generation number, and particle number.</p>
<blockquote>
<div><em>Default</em>: None</div></blockquote>
</div>
<div class="section" id="track-element">
<span id="track"></span><h3>3.3.23. <code class="docutils literal"><span class="pre">&lt;track&gt;</span></code> Element<a class="headerlink" href="#track-element" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal"><span class="pre">&lt;track&gt;</span></code> element specifies particles for which OpenMC will output binary
files describing particle position at every step of its transport. This element
should be followed by triplets of integers.  Each triplet describes one
particle. The integers in each triplet specify the batch number, generation
number, and particle number, respectively.</p>
<blockquote>
<div><em>Default</em>: None</div></blockquote>
</div>
<div class="section" id="trigger-element">
<span id="trigger"></span><h3>3.3.24. <code class="docutils literal"><span class="pre">&lt;trigger&gt;</span></code> Element<a class="headerlink" href="#trigger-element" title="Permalink to this headline">¶</a></h3>
<p>OpenMC includes tally precision triggers which allow the user to define
uncertainty thresholds on <img class="math" src="../_images/math/e45162800d593c2dee55555d800d84157e75ae00.png" alt="k_{eff}"/> in the <code class="docutils literal"><span class="pre">&lt;eigenvalue&gt;</span></code> subelement of
<code class="docutils literal"><span class="pre">settings.xml</span></code>, and/or tallies in <code class="docutils literal"><span class="pre">tallies.xml</span></code>. When using triggers,
OpenMC will run until it completes as many batches as defined by <code class="docutils literal"><span class="pre">&lt;batches&gt;</span></code>.
At this point, the uncertainties on all tallied values are computed and
compared with their corresponding trigger thresholds. If any triggers have not
been met, OpenMC will continue until either all trigger thresholds have been
satisfied or <code class="docutils literal"><span class="pre">&lt;max_batches&gt;</span></code> has been reached.</p>
<p>The <code class="docutils literal"><span class="pre">&lt;trigger&gt;</span></code> element provides an active &#8220;toggle switch&#8221; for tally
precision trigger(s), the maximum number of batches and the batch interval. It
has the following attributes/sub-elements:</p>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">active:</th><td class="field-body"><p class="first">This determines whether or not to use trigger(s). Trigger(s) are used when
this tag is set to &#8220;true&#8221;.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">max_batches:</th><td class="field-body"><p class="first">This describes the maximum number of batches allowed when using trigger(s).</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">When max_batches is set, the number of <code class="docutils literal"><span class="pre">batches</span></code> shown in
<code class="docutils literal"><span class="pre">&lt;eigenvalue&gt;</span></code> element represents minimum number of batches to
simulate when using the trigger(s).</p>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">batch_interval:</th><td class="field-body"><p class="first">This tag describes the number of  batches in between convergence checks.
OpenMC will check if the trigger has been reached at each batch defined
by <code class="docutils literal"><span class="pre">batch_interval</span></code> after the minimum number of batches is reached.</p>
<div class="last admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If this tag is not present, the <code class="docutils literal"><span class="pre">batch_interval</span></code> is predicted
dynamically by OpenMC for each convergence check. The predictive
model assumes no correlation between fission sources
distributions from batch-to-batch. This assumption is reasonable
for fixed source and small criticality calculations, but is very
optimistic for highly coupled full-core reactor problems.</p>
</div>
</td>
</tr>
</tbody>
</table>
</div></blockquote>
</div>
<div class="section" id="uniform-fs-element">
<h3>3.3.25. <code class="docutils literal"><span class="pre">&lt;uniform_fs&gt;</span></code> Element<a class="headerlink" href="#uniform-fs-element" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal"><span class="pre">&lt;uniform_fs&gt;</span></code> element describes a mesh that is used for re-weighting
source sites at every generation based on the uniform fission site methodology
described in Kelly et al., &#8220;MC21 Analysis of the Nuclear Energy Agency Monte
Carlo Performance Benchmark Problem,&#8221; Proceedings of <em>Physor 2012</em>, Knoxville,
TN (2012). This mesh should cover all possible fissionable materials in the
problem. It has the following attributes/sub-elements:</p>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">dimension:</th><td class="field-body"><p class="first">The number of mesh cells in the x, y, and z directions, respectively.</p>
<p><em>Default</em>: None</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">lower_left:</th><td class="field-body"><p class="first">The Cartesian coordinates of the lower-left corner of the mesh.</p>
<p><em>Default</em>: None</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">upper_right:</th><td class="field-body"><p class="first">The Cartesian coordinates of the upper-right corner of the mesh.</p>
<p class="last"><em>Default</em>: None</p>
</td>
</tr>
</tbody>
</table>
</div></blockquote>
</div>
<div class="section" id="verbosity-element">
<h3>3.3.26. <code class="docutils literal"><span class="pre">&lt;verbosity&gt;</span></code> Element<a class="headerlink" href="#verbosity-element" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal"><span class="pre">&lt;verbosity&gt;</span></code> element tells the code how much information to display to
the standard output. A higher verbosity corresponds to more information being
displayed. This element takes the following attributes:</p>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">value:</th><td class="field-body"><p class="first">The specified verbosity between 1 and 10.</p>
<p class="last"><em>Default</em>: 5</p>
</td>
</tr>
</tbody>
</table>
</div></blockquote>
</div>
</div>
<div class="section" id="geometry-specification-geometry-xml">
<h2>3.4. Geometry Specification &#8211; geometry.xml<a class="headerlink" href="#geometry-specification-geometry-xml" title="Permalink to this headline">¶</a></h2>
<p>The geometry in OpenMC is described using <a class="reference external" href="http://en.wikipedia.org/wiki/Constructive_solid_geometry">constructive solid geometry</a> (CSG),
also sometimes referred to as combinatorial geometry. CSG allows a user to
create complex objects using Boolean operators on a set of simpler surfaces. In
the geometry model, each unique volume is defined by its bounding surfaces. In
OpenMC, most <a class="reference external" href="http://en.wikipedia.org/wiki/Quadric">quadratic surfaces</a> can be modeled and used as bounding surfaces.</p>
<p>Every geometry.xml must have an XML declaration at the beginning of the file and
a root element named geometry. Within the root element the user can define any
number of cells, surfaces, and lattices. Let us look at the following example:</p>
<div class="highlight-xml"><div class="highlight"><pre><span class="cp">&lt;?xml version=&quot;1.0&quot;?&gt;</span>
<span class="nt">&lt;geometry&gt;</span>
  <span class="c">&lt;!-- This is a comment --&gt;</span>

  <span class="nt">&lt;surface&gt;</span>
    <span class="nt">&lt;id&gt;</span>1<span class="nt">&lt;/id&gt;</span>
    <span class="nt">&lt;type&gt;</span>sphere<span class="nt">&lt;/type&gt;</span>
    <span class="nt">&lt;coeffs&gt;</span>0.0 0.0 0.0 5.0<span class="nt">&lt;/coeffs&gt;</span>
    <span class="nt">&lt;boundary&gt;</span>vacuum<span class="nt">&lt;/boundary&gt;</span>
  <span class="nt">&lt;surface&gt;</span>

  <span class="nt">&lt;cell&gt;</span>
    <span class="nt">&lt;id&gt;</span>1<span class="nt">&lt;/id&gt;</span>
    <span class="nt">&lt;universe&gt;</span>0<span class="nt">&lt;/universe&gt;</span>
    <span class="nt">&lt;material&gt;</span>1<span class="nt">&lt;/material&gt;</span>
    <span class="nt">&lt;region&gt;</span>-1<span class="nt">&lt;/region&gt;</span>
  <span class="nt">&lt;/cell&gt;</span>
<span class="nt">&lt;/geometry&gt;</span>
</pre></div>
</div>
<p>At the beginning of this file is a comment, denoted by a tag starting with
<code class="docutils literal"><span class="pre">&lt;!--</span></code> and ending with <code class="docutils literal"><span class="pre">--&gt;</span></code>. Comments, as well as any other type of input,
may span multiple lines. One convenient feature of the XML input format is that
sub-elements of the <code class="docutils literal"><span class="pre">cell</span></code> and <code class="docutils literal"><span class="pre">surface</span></code> elements can also be equivalently
expressed of attributes of the original element, e.g. the geometry file above
could be written as:</p>
<div class="highlight-xml"><div class="highlight"><pre><span class="cp">&lt;?xml version=&quot;1.0&quot;?&gt;</span>
<span class="nt">&lt;geometry&gt;</span>
  <span class="c">&lt;!-- This is a comment --&gt;</span>

  <span class="nt">&lt;surface</span> <span class="na">id=</span><span class="s">&quot;1&quot;</span> <span class="na">type=</span><span class="s">&quot;sphere&quot;</span> <span class="na">coeffs=</span><span class="s">&quot;0.0 0.0 0.0 5.0&quot;</span> <span class="na">boundary=</span><span class="s">&quot;vacuum&quot;</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;cell</span> <span class="na">id=</span><span class="s">&quot;1&quot;</span> <span class="na">universe=</span><span class="s">&quot;0&quot;</span> <span class="na">material=</span><span class="s">&quot;1&quot;</span> <span class="na">region=</span><span class="s">&quot;-1&quot;</span> <span class="nt">/&gt;</span>

<span class="nt">&lt;/geometry&gt;</span>
</pre></div>
</div>
<div class="section" id="surface-element">
<span id="id1"></span><h3>3.4.1. <code class="docutils literal"><span class="pre">&lt;surface&gt;</span></code> Element<a class="headerlink" href="#surface-element" title="Permalink to this headline">¶</a></h3>
<p>Each <code class="docutils literal"><span class="pre">&lt;surface&gt;</span></code> element can have the following attributes or sub-elements:</p>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">id:</th><td class="field-body"><p class="first">A unique integer that can be used to identify the surface.</p>
<p><em>Default</em>: None</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">name:</th><td class="field-body"><p class="first">An optional string name to identify the surface in summary output
files. This string is limited to 52 characters for formatting purposes.</p>
<p><em>Default</em>: &#8220;&#8221;</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">type:</th><td class="field-body"><p class="first">The type of the surfaces. This can be &#8220;x-plane&#8221;, &#8220;y-plane&#8221;, &#8220;z-plane&#8221;,
&#8220;plane&#8221;, &#8220;x-cylinder&#8221;, &#8220;y-cylinder&#8221;, &#8220;z-cylinder&#8221;, &#8220;sphere&#8221;, &#8220;x-cone&#8221;,
&#8220;y-cone&#8221;, &#8220;z-cone&#8221;, or &#8220;quadric&#8221;.</p>
<p><em>Default</em>: None</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">coeffs:</th><td class="field-body"><p class="first">The corresponding coefficients for the given type of surface. See below for
a list a what coefficients to specify for a given surface</p>
<p><em>Default</em>: None</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">boundary:</th><td class="field-body"><p class="first">The boundary condition for the surface. This can be &#8220;transmission&#8221;,
&#8220;vacuum&#8221;, or &#8220;reflective&#8221;.</p>
<p class="last"><em>Default</em>: &#8220;transmission&#8221;</p>
</td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>The following quadratic surfaces can be modeled:</p>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">x-plane:</th><td class="field-body">A plane perpendicular to the x axis, i.e. a surface of the form <img class="math" src="../_images/math/2da8bdfc0727e7f2270df68b7edebd2d2786aefd.png" alt="x -
x_0 = 0"/>. The coefficients specified are &#8220;<img class="math" src="../_images/math/c3c08496f07567285212e468b173bea9ca153fab.png" alt="x_0"/>&#8221;.</td>
</tr>
<tr class="field-even field"><th class="field-name">y-plane:</th><td class="field-body">A plane perpendicular to the y axis, i.e. a surface of the form <img class="math" src="../_images/math/c8b0a3f732d28a9a7c37eacd33b620da4aa6b92a.png" alt="y -
y_0 = 0"/>. The coefficients specified are &#8220;<img class="math" src="../_images/math/f7e73389b494d356293b5ad9e3601a3a61609e96.png" alt="y_0"/>&#8221;.</td>
</tr>
<tr class="field-odd field"><th class="field-name">z-plane:</th><td class="field-body">A plane perpendicular to the z axis, i.e. a surface of the form <img class="math" src="../_images/math/0b2b7782fc91425bc215af2459ff33e7974f1157.png" alt="z -
z_0 = 0"/>. The coefficients specified are &#8220;<img class="math" src="../_images/math/693faad2f042b0565c90df7cfced16cb9413c166.png" alt="z_0"/>&#8221;.</td>
</tr>
<tr class="field-even field"><th class="field-name">plane:</th><td class="field-body">An arbitrary plane of the form <img class="math" src="../_images/math/e8bd2b0146269623a84749648d9fdfcc7739c12c.png" alt="Ax + By + Cz = D"/>. The coefficients
specified are &#8220;<img class="math" src="../_images/math/780babc751bf3046536b0e910c7788aa06ddc2b4.png" alt="A \: B \: C \: D"/>&#8221;.</td>
</tr>
<tr class="field-odd field"><th class="field-name">x-cylinder:</th><td class="field-body">An infinite cylinder whose length is parallel to the x-axis. This is a
quadratic surface of the form <img class="math" src="../_images/math/d2c236590767c2c039cccbf4658e5f5a15eef64d.png" alt="(y - y_0)^2 + (z - z_0)^2 = R^2"/>. The
coefficients specified are &#8220;<img class="math" src="../_images/math/b83c42845b88d516166a305715e9cb2e795fdb47.png" alt="y_0 \: z_0 \: R"/>&#8221;.</td>
</tr>
<tr class="field-even field"><th class="field-name">y-cylinder:</th><td class="field-body">An infinite cylinder whose length is parallel to the y-axis. This is a
quadratic surface of the form <img class="math" src="../_images/math/3747efba6351883638de083d8f6bca42211cfe36.png" alt="(x - x_0)^2 + (z - z_0)^2 = R^2"/>. The
coefficients specified are &#8220;<img class="math" src="../_images/math/4def4e814267b901234354e5624941e073de965a.png" alt="x_0 \: z_0 \: R"/>&#8221;.</td>
</tr>
<tr class="field-odd field"><th class="field-name">z-cylinder:</th><td class="field-body">An infinite cylinder whose length is parallel to the z-axis. This is a
quadratic surface of the form <img class="math" src="../_images/math/9471a7a7c9e3809d4b6a42edda0a108d29fb39c2.png" alt="(x - x_0)^2 + (y - y_0)^2 = R^2"/>. The
coefficients specified are &#8220;<img class="math" src="../_images/math/be3240b7138430b0c4d848fffb277c12ed81de93.png" alt="x_0 \: y_0 \: R"/>&#8221;.</td>
</tr>
<tr class="field-even field"><th class="field-name">sphere:</th><td class="field-body">A sphere of the form <img class="math" src="../_images/math/047af9e6ebc8efc10c19ad1230bf5297090c421f.png" alt="(x - x_0)^2 + (y - y_0)^2 + (z - z_0)^2 =
R^2"/>. The coefficients specified are &#8220;<img class="math" src="../_images/math/cb488e6b6c695abf9245b63e5fdc7e87d1bd60ba.png" alt="x_0 \: y_0 \: z_0 \: R"/>&#8221;.</td>
</tr>
<tr class="field-odd field"><th class="field-name">x-cone:</th><td class="field-body">A cone parallel to the x-axis of the form <img class="math" src="../_images/math/decd2c2611e51c2150c5f6e1f5e357381d4a7446.png" alt="(y - y_0)^2 + (z - z_0)^2 =
R^2 (x - x_0)^2"/>. The coefficients specified are &#8220;<img class="math" src="../_images/math/de75128ffb336ee9feee90a9cb946de93ac2cf0e.png" alt="x_0 \: y_0 \: z_0
\: R^2"/>&#8221;.</td>
</tr>
<tr class="field-even field"><th class="field-name">y-cone:</th><td class="field-body">A cone parallel to the y-axis of the form <img class="math" src="../_images/math/80d7959bf679e0a57adb57d916c9692d8d556677.png" alt="(x - x_0)^2 + (z - z_0)^2 =
R^2 (y - y_0)^2"/>. The coefficients specified are &#8220;<img class="math" src="../_images/math/de75128ffb336ee9feee90a9cb946de93ac2cf0e.png" alt="x_0 \: y_0 \: z_0
\: R^2"/>&#8221;.</td>
</tr>
<tr class="field-odd field"><th class="field-name">z-cone:</th><td class="field-body">A cone parallel to the x-axis of the form <img class="math" src="../_images/math/76a33761ccef4515da31d00bfd374f17f00dc875.png" alt="(x - x_0)^2 + (y - y_0)^2 =
R^2 (z - z_0)^2"/>. The coefficients specified are &#8220;<img class="math" src="../_images/math/de75128ffb336ee9feee90a9cb946de93ac2cf0e.png" alt="x_0 \: y_0 \: z_0
\: R^2"/>&#8221;.</td>
</tr>
<tr class="field-even field"><th class="field-name">quadric:</th><td class="field-body">A general quadric surface of the form <img class="math" src="../_images/math/38d22b7d58794e86808b2ebff1de726e16656617.png" alt="Ax^2 + By^2 + Cz^2 + Dxy +
Eyz + Fxz + Gx + Hy + Jz + K = 0"/> The coefficients specified are &#8220;<img class="math" src="../_images/math/ac0b3c998a0208c7143deb1d64325bc106e2ac44.png" alt="A
\: B \: C \: D \: E \: F \: G \: H \: J \: K"/>&#8221;.</td>
</tr>
</tbody>
</table>
</div></blockquote>
</div>
<div class="section" id="cell-element">
<h3>3.4.2. <code class="docutils literal"><span class="pre">&lt;cell&gt;</span></code> Element<a class="headerlink" href="#cell-element" title="Permalink to this headline">¶</a></h3>
<p>Each <code class="docutils literal"><span class="pre">&lt;cell&gt;</span></code> element can have the following attributes or sub-elements:</p>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">id:</th><td class="field-body"><p class="first">A unique integer that can be used to identify the cell.</p>
<p><em>Default</em>: None</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">name:</th><td class="field-body"><p class="first">An optional string name to identify the cell in summary output files.
This string is limmited to 52 characters for formatting purposes.</p>
<p><em>Default</em>: &#8220;&#8221;</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">universe:</th><td class="field-body"><p class="first">The <code class="docutils literal"><span class="pre">id</span></code> of the universe that this cell is contained in.</p>
<p><em>Default</em>: 0</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">fill:</th><td class="field-body"><p class="first">The <code class="docutils literal"><span class="pre">id</span></code> of the universe that fills this cell.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If a fill is specified, no material should be given.</p>
</div>
<p><em>Default</em>: None</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">material:</th><td class="field-body"><p class="first">The <code class="docutils literal"><span class="pre">id</span></code> of the material that this cell contains. If the cell should
contain no material, this can also be set to &#8220;void&#8221;.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If a material is specified, no fill should be given.</p>
</div>
<p><em>Default</em>: None</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">region:</th><td class="field-body"><p class="first">A Boolean expression of half-spaces that defines the spatial region which
the cell occupies. Each half-space is identified by the unique ID of the
surface prefixed by <cite>-</cite> or <cite>+</cite> to indicate that it is the negative or
positive half-space, respectively. The <cite>+</cite> sign for a positive half-space
can be omitted. Valid Boolean operators are parentheses, union <cite>|</cite>,
complement <cite>~</cite>, and intersection. Intersection is implicit and indicated by
the presence of whitespace. The order of operator precedence is parentheses,
complement, intersection, and then union.</p>
<p>As an example, the following code gives a cell that is the union of the
negative half-space of surface 3 and the complement of the intersection of
the positive half-space of surface 5 and the negative half-space of surface
2:</p>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;cell</span> <span class="na">id=</span><span class="s">&quot;1&quot;</span> <span class="na">material=</span><span class="s">&quot;1&quot;</span> <span class="na">region=</span><span class="s">&quot;-3 | ~(5 -2)&quot;</span> <span class="nt">/&gt;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The <code class="docutils literal"><span class="pre">region</span></code> attribute/element can be omitted to make a cell
fill its entire universe.</p>
</div>
<p><em>Default</em>: A region filling all space.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">rotation:</th><td class="field-body"><p class="first">If the cell is filled with a universe, this element specifies the angles in
degrees about the x, y, and z axes that the filled universe should be
rotated. Should be given as three real numbers. For example, if you wanted
to rotate the filled universe by 90 degrees about the z-axis, the cell
element would look something like:</p>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;cell</span> <span class="na">fill=</span><span class="s">&quot;...&quot;</span> <span class="na">rotation=</span><span class="s">&quot;0 0 90&quot;</span> <span class="nt">/&gt;</span>
</pre></div>
</div>
<p><em>Default</em>: None</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">translation:</th><td class="field-body"><p class="first">If the cell is filled with a universe, this element specifies a vector that
is used to translate (shift) the universe. Should be given as three real
numbers.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Any translation operation is applied after a rotation, if also
specified.</p>
</div>
<p class="last"><em>Default</em>: None</p>
</td>
</tr>
</tbody>
</table>
</div></blockquote>
</div>
<div class="section" id="lattice-element">
<h3>3.4.3. <code class="docutils literal"><span class="pre">&lt;lattice&gt;</span></code> Element<a class="headerlink" href="#lattice-element" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal"><span class="pre">&lt;lattice&gt;</span></code> can be used to represent repeating structures (e.g. fuel pins
in an assembly) or other geometry which fits onto a rectilinear grid. Each cell
within the lattice is filled with a specified universe. A <code class="docutils literal"><span class="pre">&lt;lattice&gt;</span></code> accepts
the following attributes or sub-elements:</p>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">id:</th><td class="field-body"><p class="first">A unique integer that can be used to identify the lattice.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">name:</th><td class="field-body"><p class="first">An optional string name to identify the lattice in summary output
files. This string is limited to 52 characters for formatting purposes.</p>
<p><em>Default</em>: &#8220;&#8221;</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">dimension:</th><td class="field-body"><p class="first">Two or three integers representing the number of lattice cells in the x- and
y- (and z-) directions, respectively.</p>
<p><em>Default</em>: None</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">lower_left:</th><td class="field-body"><p class="first">The coordinates of the lower-left corner of the lattice. If the lattice is
two-dimensional, only the x- and y-coordinates are specified.</p>
<p><em>Default</em>: None</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">pitch:</th><td class="field-body"><p class="first">If the lattice is 3D, then three real numbers that express the distance
between the centers of lattice cells in the x-, y-, and z- directions.  If
the lattice is 2D, then omit the third value.</p>
<p><em>Default</em>: None</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">outer:</th><td class="field-body"><p class="first">The unique integer identifier of a universe that will be used to fill all
space outside of the lattice.  The universe will be tiled repeatedly as if
it were placed in a lattice of infinite size.  This element is optional.</p>
<p><em>Default</em>: An error will be raised if a particle leaves a lattice with no
outer universe.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">universes:</th><td class="field-body"><p class="first">A list of the universe numbers that fill each cell of the lattice.</p>
<p class="last"><em>Default</em>: None</p>
</td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>Here is an example of a properly defined 2d rectangular lattice:</p>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;lattice</span> <span class="na">id=</span><span class="s">&quot;10&quot;</span> <span class="na">dimension=</span><span class="s">&quot;3 3&quot;</span> <span class="na">outer=</span><span class="s">&quot;1&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;lower_left&gt;</span> -1.5 -1.5 <span class="nt">&lt;/lower_left&gt;</span>
    <span class="nt">&lt;pitch&gt;</span> 1.0 1.0 <span class="nt">&lt;/pitch&gt;</span>
    <span class="nt">&lt;universes&gt;</span>
      2 2 2
      2 1 2
      2 2 2
    <span class="nt">&lt;/universes&gt;</span>
<span class="nt">&lt;/lattice&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="hex-lattice-element">
<h3>3.4.4. <code class="docutils literal"><span class="pre">&lt;hex_lattice&gt;</span></code> Element<a class="headerlink" href="#hex-lattice-element" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal"><span class="pre">&lt;hex_lattice&gt;</span></code> can be used to represent repeating structures (e.g. fuel
pins in an assembly) or other geometry which naturally fits onto a hexagonal
grid or hexagonal prism grid. Each cell within the lattice is filled with a
specified universe. This lattice uses the &#8220;flat-topped hexagon&#8221; scheme where two
of the six edges are perpendicular to the y-axis.  A <code class="docutils literal"><span class="pre">&lt;hex_lattice&gt;</span></code> accepts
the following attributes or sub-elements:</p>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">id:</th><td class="field-body"><p class="first">A unique integer that can be used to identify the lattice.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">name:</th><td class="field-body"><p class="first">An optional string name to identify the hex_lattice in summary output
files. This string is limited to 52 characters for formatting purposes.</p>
<p><em>Default</em>: &#8220;&#8221;</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">n_rings:</th><td class="field-body"><p class="first">An integer representing the number of radial ring positions in the xy-plane.
Note that this number includes the degenerate center ring which only has one
element.</p>
<p><em>Default</em>: None</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">n_axial:</th><td class="field-body"><p class="first">An integer representing the number of positions along the z-axis.  This
element is optional.</p>
<p><em>Default</em>: None</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">center:</th><td class="field-body"><p class="first">The coordinates of the center of the lattice. If the lattice does not have
axial sections then only the x- and y-coordinates are specified.</p>
<p><em>Default</em>: None</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">pitch:</th><td class="field-body"><p class="first">If the lattice is 3D, then two real numbers that express the distance
between the centers of lattice cells in the xy-plane and along the z-axis,
respectively.  If the lattice is 2D, then omit the second value.</p>
<p><em>Default</em>: None</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">outer:</th><td class="field-body"><p class="first">The unique integer identifier of a universe that will be used to fill all
space outside of the lattice.  The universe will be tiled repeatedly as if
it were placed in a lattice of infinite size.  This element is optional.</p>
<p><em>Default</em>: An error will be raised if a particle leaves a lattice with no
outer universe.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">universes:</th><td class="field-body"><p class="first">A list of the universe numbers that fill each cell of the lattice.</p>
<p class="last"><em>Default</em>: None</p>
</td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>Here is an example of a properly defined 2d hexagonal lattice:</p>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;hex_lattice</span> <span class="na">id=</span><span class="s">&quot;10&quot;</span> <span class="na">n_rings=</span><span class="s">&quot;3&quot;</span> <span class="na">outer=</span><span class="s">&quot;1&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;center&gt;</span> 0.0 0.0 <span class="nt">&lt;/center&gt;</span>
    <span class="nt">&lt;pitch&gt;</span> 1.0 <span class="nt">&lt;/pitch&gt;</span>
    <span class="nt">&lt;universes&gt;</span>
              202
           202   202
        202   202   202
           202   202
        202   101   202
           202   202
        202   202   202
           202   202
              202
    <span class="nt">&lt;/universes&gt;</span>
<span class="nt">&lt;/hex_lattice&gt;</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="materials-specification-materials-xml">
<h2>3.5. Materials Specification &#8211; materials.xml<a class="headerlink" href="#materials-specification-materials-xml" title="Permalink to this headline">¶</a></h2>
<div class="section" id="material-element">
<span id="material"></span><h3>3.5.1. <code class="docutils literal"><span class="pre">&lt;material&gt;</span></code> Element<a class="headerlink" href="#material-element" title="Permalink to this headline">¶</a></h3>
<p>Each <code class="docutils literal"><span class="pre">material</span></code> element can have the following attributes or sub-elements:</p>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">id:</th><td class="field-body"><p class="first">A unique integer that can be used to identify the material.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">name:</th><td class="field-body"><p class="first">An optional string name to identify the material in summary output
files. This string is limited to 52 characters for formatting purposes.</p>
<p><em>Default</em>: &#8220;&#8221;</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">density:</th><td class="field-body"><p class="first">An element with attributes/sub-elements called <code class="docutils literal"><span class="pre">value</span></code> and <code class="docutils literal"><span class="pre">units</span></code>. The
<code class="docutils literal"><span class="pre">value</span></code> attribute is the numeric value of the density while the <code class="docutils literal"><span class="pre">units</span></code>
can be &#8220;g/cm3&#8221;, &#8220;kg/m3&#8221;, &#8220;atom/b-cm&#8221;, &#8220;atom/cm3&#8221;, or &#8220;sum&#8221;. The &#8220;sum&#8221; unit
indicates that values appearing in <code class="docutils literal"><span class="pre">ao</span></code> attributes for <code class="docutils literal"><span class="pre">&lt;nuclide&gt;</span></code> and
<code class="docutils literal"><span class="pre">&lt;element&gt;</span></code> sub-elements are to be interpreted as nuclide/element
densities in atom/b-cm, and the total density of the material is taken as
the sum of all nuclides/elements. The &#8220;sum&#8221; option cannot be used in
conjunction with weight percents.</p>
<p><em>Default</em>: None</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">nuclide:</th><td class="field-body"><p class="first">An element with attributes/sub-elements called <code class="docutils literal"><span class="pre">name</span></code>, <code class="docutils literal"><span class="pre">xs</span></code>, and <code class="docutils literal"><span class="pre">ao</span></code>
or <code class="docutils literal"><span class="pre">wo</span></code>. The <code class="docutils literal"><span class="pre">name</span></code> attribute is the name of the cross-section for a
desired nuclide while the <code class="docutils literal"><span class="pre">xs</span></code> attribute is the cross-section
identifier. Finally, the <code class="docutils literal"><span class="pre">ao</span></code> and <code class="docutils literal"><span class="pre">wo</span></code> attributes specify the atom or
weight percent of that nuclide within the material, respectively. One
example would be as follows:</p>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;nuclide</span> <span class="na">name=</span><span class="s">&quot;H-1&quot;</span> <span class="na">xs=</span><span class="s">&quot;70c&quot;</span> <span class="na">ao=</span><span class="s">&quot;2.0&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;nuclide</span> <span class="na">name=</span><span class="s">&quot;O-16&quot;</span> <span class="na">xs=</span><span class="s">&quot;70c&quot;</span> <span class="na">ao=</span><span class="s">&quot;1.0&quot;</span> <span class="nt">/&gt;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If one nuclide is specified in atom percent, all others must also
be given in atom percent. The same applies for weight percentages.</p>
</div>
<p>An optional attribute/sub-element for each nuclide is <code class="docutils literal"><span class="pre">scattering</span></code>. This
attribute may be set to &#8220;data&#8221; to use the scattering laws specified by the
cross section library (default). Alternatively, when set to &#8220;iso-in-lab&#8221;,
the scattering laws are used to sample the outgoing energy but an
isotropic-in-lab  distribution is used to sample the outgoing angle at each
scattering interaction. The <code class="docutils literal"><span class="pre">scattering</span></code> attribute may be most useful
when using OpenMC to compute multi-group cross-sections for deterministic
transport codes and to quantify the effects of anisotropic scattering.</p>
<p><em>Default</em>: None</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">element:</th><td class="field-body"><p class="first">Specifies that a natural element is present in the material. The natural
element is split up into individual isotopes based on <a class="reference external" href="http://pac.iupac.org/publications/pac/pdf/2011/pdf/8302x0397.pdf">IUPAC Isotopic
Compositions of the Elements 2009</a>. This element has
attributes/sub-elements called <code class="docutils literal"><span class="pre">name</span></code>, <code class="docutils literal"><span class="pre">xs</span></code>, and <code class="docutils literal"><span class="pre">ao</span></code>. The <code class="docutils literal"><span class="pre">name</span></code>
attribute is the atomic symbol of the element while the <code class="docutils literal"><span class="pre">xs</span></code> attribute is
the cross-section identifier. Finally, the <code class="docutils literal"><span class="pre">ao</span></code> attribute specifies the
atom percent of the element within the material, respectively. One example
would be as follows:</p>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;element</span> <span class="na">name=</span><span class="s">&quot;Al&quot;</span> <span class="na">ao=</span><span class="s">&quot;8.7115e-03&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;element</span> <span class="na">name=</span><span class="s">&quot;Mg&quot;</span> <span class="na">ao=</span><span class="s">&quot;1.5498e-04&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;element</span> <span class="na">name=</span><span class="s">&quot;Mn&quot;</span> <span class="na">ao=</span><span class="s">&quot;2.7426e-05&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;element</span> <span class="na">name=</span><span class="s">&quot;Cu&quot;</span> <span class="na">ao=</span><span class="s">&quot;1.6993e-04&quot;</span> <span class="nt">/&gt;</span>
</pre></div>
</div>
<p>In some cross section libraries, certain naturally occurring isotopes do not
have cross sections. The <a class="reference internal" href="#natural-elements"><span>&lt;natural_elements&gt; Element</span></a> option determines how a
natural element is split into isotopes in these cases.</p>
<p><em>Default</em>: None</p>
<p>An optional attribute/sub-element for each element is <code class="docutils literal"><span class="pre">scattering</span></code>. This
attribute may be set to &#8220;data&#8221; to use the scattering laws specified by the
cross section library (default). Alternatively, when set to &#8220;iso-in-lab&#8221;,
the scattering laws are used to sample the outgoing energy but an
isotropic-in-lab  distribution is used to sample the outgoing angle at each
scattering interaction. The <code class="docutils literal"><span class="pre">scattering</span></code> attribute may be most useful
when using OpenMC to compute multi-group cross-sections for deterministic
transport codes and to quantify the effects of anisotropic scattering.</p>
<p><em>Default</em>: None</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">sab:</th><td class="field-body"><p class="first">Associates an S(a,b) table with the material. This element has
attributes/sub-elements called <code class="docutils literal"><span class="pre">name</span></code> and <code class="docutils literal"><span class="pre">xs</span></code>. The <code class="docutils literal"><span class="pre">name</span></code> attribute
is the name of the S(a,b) table that should be associated with the material,
and <code class="docutils literal"><span class="pre">xs</span></code> is the cross-section identifier for the table.</p>
<p class="last"><em>Default</em>: None</p>
</td>
</tr>
</tbody>
</table>
</div></blockquote>
</div>
<div class="section" id="default-xs-element">
<h3>3.5.2. <code class="docutils literal"><span class="pre">&lt;default_xs&gt;</span></code> Element<a class="headerlink" href="#default-xs-element" title="Permalink to this headline">¶</a></h3>
<p>In some circumstances, the cross-section identifier may be the same for many or
all nuclides in a given problem. In this case, rather than specifying the
<code class="docutils literal"><span class="pre">xs=...</span></code> attribute on every nuclide, a <code class="docutils literal"><span class="pre">&lt;default_xs&gt;</span></code> element can be used to
set the default cross-section identifier for any nuclide without an identifier
explicitly listed. This element has no attributes and accepts a 3-letter string
that indicates the default cross-section identifier, e.g. &#8220;70c&#8221;.</p>
<blockquote>
<div><em>Default</em>: None</div></blockquote>
</div>
</div>
<div class="section" id="tallies-specification-tallies-xml">
<h2>3.6. Tallies Specification &#8211; tallies.xml<a class="headerlink" href="#tallies-specification-tallies-xml" title="Permalink to this headline">¶</a></h2>
<p>The tallies.xml file allows the user to tell the code what results he/she is
interested in, e.g. the fission rate in a given cell or the current across a
given surface. There are two pieces of information that determine what
quantities should be scored. First, one needs to specify what region of phase
space should count towards the tally and secondly, the actual quantity to be
scored also needs to be specified. The first set of parameters we call <em>filters</em>
since they effectively serve to filter events, allowing some to score and
preventing others from scoring to the tally.</p>
<p>The structure of tallies in OpenMC is flexible in that any combination of
filters can be used for a tally. The following types of filter are available:
cell, universe, material, surface, birth region, pre-collision energy,
post-collision energy, and an arbitrary structured mesh.</p>
<p>The three valid elements in the tallies.xml file are <code class="docutils literal"><span class="pre">&lt;tally&gt;</span></code>, <code class="docutils literal"><span class="pre">&lt;mesh&gt;</span></code>,
and <code class="docutils literal"><span class="pre">&lt;assume_separate&gt;</span></code>.</p>
<div class="section" id="tally-element">
<span id="tally"></span><h3>3.6.1. <code class="docutils literal"><span class="pre">&lt;tally&gt;</span></code> Element<a class="headerlink" href="#tally-element" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal"><span class="pre">&lt;tally&gt;</span></code> element accepts the following sub-elements:</p>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">name:</th><td class="field-body"><p class="first">An optional string name to identify the tally in summary output
files. This string is limited to 52 characters for formatting purposes.</p>
<p><em>Default</em>: &#8220;&#8221;</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">filter:</th><td class="field-body"><p class="first">Specify a filter that restricts contributions to the tally to particles
within certain regions of phase space. This element and its
attributes/sub-elements are described below.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You may specify zero, one, or multiple filters to apply to the tally. To
specify multiple filters, you must use multiple <code class="docutils literal"><span class="pre">&lt;filter&gt;</span></code> elements.</p>
</div>
<p>The <code class="docutils literal"><span class="pre">filter</span></code> element has the following attributes/sub-elements:</p>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">type:</th><td class="field-body"><p class="first">The type of the filter. Accepted options are &#8220;cell&#8221;, &#8220;cellborn&#8221;,
&#8220;material&#8221;, &#8220;universe&#8221;, &#8220;energy&#8221;, &#8220;energyout&#8221;, &#8220;mesh&#8221;, &#8220;distribcell&#8221;,
and &#8220;delayedgroup&#8221;.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">bins:</th><td class="field-body"><p class="first">For each filter type, the corresponding <code class="docutils literal"><span class="pre">bins</span></code> entry is given as
follows:</p>
<table class="last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">cell:</th><td class="field-body"><p class="first">A list of cells in which the tally should be accumulated.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">cellborn:</th><td class="field-body"><p class="first">This filter allows the tally to be scored to only when particles were
originally born in a specified cell.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">surface:</th><td class="field-body"><p class="first">A list of surfaces for which the tally should be accumulated.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">material:</th><td class="field-body"><p class="first">A list of materials for which the tally should be accumulated.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">universe:</th><td class="field-body"><p class="first">A list of universes for which the tally should be accumulated.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">energy:</th><td class="field-body"><p class="first">A monotonically increasing list of bounding <strong>pre-collision</strong> energies
for a number of groups. For example, if this filter is specified as</p>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;filter</span> <span class="na">type=</span><span class="s">&quot;energy&quot;</span> <span class="na">bins=</span><span class="s">&quot;0.0 1.0 20.0&quot;</span> <span class="nt">/&gt;</span>
</pre></div>
</div>
<p>then two energy bins will be created, one with energies between 0 and
1 MeV and the other with energies between 1 and 20 MeV.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">energyout:</th><td class="field-body"><p class="first">A monotonically increasing list of bounding <strong>post-collision</strong>
energies for a number of groups. For example, if this filter is
specified as</p>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;filter</span> <span class="na">type=</span><span class="s">&quot;energyout&quot;</span> <span class="na">bins=</span><span class="s">&quot;0.0 1.0 20.0&quot;</span> <span class="nt">/&gt;</span>
</pre></div>
</div>
<p>then two post-collision energy bins will be created, one with energies
between 0 and 1 MeV and the other with energies between 1 and 20 MeV.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">mu:</th><td class="field-body"><p class="first">A monotonically increasing list of bounding <strong>post-collision</strong> cosines
of the change in a particle&#8217;s angle (i.e., <img class="math" src="../_images/math/1c03aee7981b994864deb372377f9e45ab6cf1e0.png" alt="\mu = \hat{\Omega}
\cdot \hat{\Omega}'"/>), which represents a portion of the possible
values of <img class="math" src="../_images/math/11d586f6b5c3a0445fa328423430a9390fd2834b.png" alt="[-1,1]"/>.  For example, spanning all of <img class="math" src="../_images/math/11d586f6b5c3a0445fa328423430a9390fd2834b.png" alt="[-1,1]"/>
with five equi-width bins can be specified as:</p>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;filter</span> <span class="na">type=</span><span class="s">&quot;mu&quot;</span> <span class="na">bins=</span><span class="s">&quot;-1.0 -0.6 -0.2 0.2 0.6 1.0&quot;</span> <span class="nt">/&gt;</span>
</pre></div>
</div>
<p>Alternatively, if only one value is provided as a bin, OpenMC will
interpret this to mean the complete range of <img class="math" src="../_images/math/11d586f6b5c3a0445fa328423430a9390fd2834b.png" alt="[-1,1]"/> should
be automatically subdivided in to the provided value for the bin.
That is, the above example of five equi-width bins spanning
<img class="math" src="../_images/math/11d586f6b5c3a0445fa328423430a9390fd2834b.png" alt="[-1,1]"/> can be instead written as:</p>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;filter</span> <span class="na">type=</span><span class="s">&quot;mu&quot;</span> <span class="na">bins=</span><span class="s">&quot;5&quot;</span> <span class="nt">/&gt;</span>
</pre></div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">polar:</th><td class="field-body"><p class="first">A monotonically increasing list of bounding particle polar angles
which represents a portion of the possible values of <img class="math" src="../_images/math/1b989a72aeaf778381894e0025fe309783e17235.png" alt="[0,\pi]"/>.
For example, spanning all of <img class="math" src="../_images/math/1b989a72aeaf778381894e0025fe309783e17235.png" alt="[0,\pi]"/> with five equi-width
bins can be specified as:</p>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;filter</span> <span class="na">type=</span><span class="s">&quot;polar&quot;</span> <span class="na">bins=</span><span class="s">&quot;0.0 0.6283 1.2566 1.8850 2.5132 3.1416&quot;</span><span class="nt">/&gt;</span>
</pre></div>
</div>
<p>Alternatively, if only one value is provided as a bin, OpenMC will
interpret this to mean the complete range of <img class="math" src="../_images/math/1b989a72aeaf778381894e0025fe309783e17235.png" alt="[0,\pi]"/> should
be automatically subdivided in to the provided value for the bin.
That is, the above example of five equi-width bins spanning
<img class="math" src="../_images/math/1b989a72aeaf778381894e0025fe309783e17235.png" alt="[0,\pi]"/> can be instead written as:</p>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;filter</span> <span class="na">type=</span><span class="s">&quot;polar&quot;</span> <span class="na">bins=</span><span class="s">&quot;5&quot;</span> <span class="nt">/&gt;</span>
</pre></div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">azimuthal:</th><td class="field-body"><p class="first">A monotonically increasing list of bounding particle azimuthal angles
which represents a portion of the possible values of <img class="math" src="../_images/math/fba73f999a8f7a592fe5217a2006a9e6a07e78b6.png" alt="[-\pi,\pi)"/>.
For example, spanning all of <img class="math" src="../_images/math/fba73f999a8f7a592fe5217a2006a9e6a07e78b6.png" alt="[-\pi,\pi)"/> with two equi-width
bins can be specified as:</p>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;filter</span> <span class="na">type=</span><span class="s">&quot;azimuthal&quot;</span> <span class="na">bins=</span><span class="s">&quot;0.0 3.1416 6.2832&quot;</span> <span class="nt">/&gt;</span>
</pre></div>
</div>
<p>Alternatively, if only one value is provided as a bin, OpenMC will
interpret this to mean the complete range of <img class="math" src="../_images/math/fba73f999a8f7a592fe5217a2006a9e6a07e78b6.png" alt="[-\pi,\pi)"/> should
be automatically subdivided in to the provided value for the bin.
That is, the above example of five equi-width bins spanning
<img class="math" src="../_images/math/fba73f999a8f7a592fe5217a2006a9e6a07e78b6.png" alt="[-\pi,\pi)"/> can be instead written as:</p>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;filter</span> <span class="na">type=</span><span class="s">&quot;azimuthal&quot;</span> <span class="na">bins=</span><span class="s">&quot;2&quot;</span> <span class="nt">/&gt;</span>
</pre></div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">mesh:</th><td class="field-body"><p class="first">The <code class="docutils literal"><span class="pre">id</span></code> of a structured mesh to be tallied over.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">distribcell:</th><td class="field-body"><p class="first">The single cell which should be tallied uniquely for all instances.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The distribcell filter will take a single cell ID and will tally
each unique occurrence of that cell separately. This filter will
not accept more than one cell ID. It is not recommended to combine
this filter with a cell or mesh filter.</p>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">delayedgroup:</th><td class="field-body"><p class="first">A list of delayed neutron precursor groups for which the tally should
be accumulated. For instance, to tally to all 6 delayed groups in the
ENDF/B-VII.1 library the filter is specified as:</p>
<div class="last highlight-xml"><div class="highlight"><pre><span class="nt">&lt;filter</span> <span class="na">type=</span><span class="s">&quot;delayedgroup&quot;</span> <span class="na">bins=</span><span class="s">&quot;1 2 3 4 5 6&quot;</span> <span class="nt">/&gt;</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
</td>
</tr>
</tbody>
</table>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">nuclides:</th><td class="field-body"><p class="first">If specified, the scores listed will be for particular nuclides, not the
summation of reactions from all nuclides. The format for nuclides should be
[Atomic symbol]-[Mass number], e.g. &#8220;U-235&#8221;. The reaction rate for all
nuclides can be obtained with &#8220;total&#8221;. For example, to obtain the reaction
rates for U-235, Pu-239, and all nuclides in a material, this element should
be:</p>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;nuclides&gt;</span>U-235 Pu-239 total<span class="nt">&lt;/nuclides&gt;</span>
</pre></div>
</div>
<p><em>Default</em>: total</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">estimator:</th><td class="field-body"><p class="first">The estimator element is used to force the use of either <code class="docutils literal"><span class="pre">analog</span></code>,
<code class="docutils literal"><span class="pre">collision</span></code>, or <code class="docutils literal"><span class="pre">tracklength</span></code> tally estimation.  <code class="docutils literal"><span class="pre">analog</span></code> is generally
the least efficient though it can be used with every score type.
<code class="docutils literal"><span class="pre">tracklength</span></code> is generally the most efficient, but neither <code class="docutils literal"><span class="pre">tracklength</span></code>
nor <code class="docutils literal"><span class="pre">collision</span></code> can be used to score a tally that requires post-collision
information.  For example, a scattering tally with outgoing energy filters
cannot be used with <code class="docutils literal"><span class="pre">tracklength</span></code> or <code class="docutils literal"><span class="pre">collision</span></code> because the code will
not know the outgoing energy distribution.</p>
<p><em>Default</em>: <code class="docutils literal"><span class="pre">tracklength</span></code> but will revert to <code class="docutils literal"><span class="pre">analog</span></code> if necessary.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">scores:</th><td class="field-body"><p class="first">A space-separated list of the desired responses to be accumulated. Accepted
options are &#8220;flux&#8221;, &#8220;total&#8221;, &#8220;scatter&#8221;, &#8220;absorption&#8221;, &#8220;fission&#8221;,
&#8220;nu-fission&#8221;, &#8220;delayed-nu-fission&#8221;, &#8220;kappa-fission&#8221;, &#8220;nu-scatter&#8221;,
&#8220;scatter-N&#8221;, &#8220;scatter-PN&#8221;, &#8220;scatter-YN&#8221;, &#8220;nu-scatter-N&#8221;, &#8220;nu-scatter-PN&#8221;,
&#8220;nu-scatter-YN&#8221;, &#8220;flux-YN&#8221;, &#8220;total-YN&#8221;, &#8220;current&#8221;, &#8220;inverse-velocity&#8221; and
&#8220;events&#8221;. These correspond to the following physical quantities:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">flux:</th><td class="field-body"><p class="first">Total flux in particle-cm per source particle.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The <code class="docutils literal"><span class="pre">analog</span></code> estimator is actually identical to the <code class="docutils literal"><span class="pre">collision</span></code>
estimator for the flux score.</p>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">total:</th><td class="field-body"><p class="first">Total reaction rate in reactions per source particle.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">scatter:</th><td class="field-body"><p class="first">Total scattering rate. Can also be identified with the <code class="docutils literal"><span class="pre">scatter-0</span></code>
response type. Units are reactions per source particle.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">absorption:</th><td class="field-body"><p class="first">Total absorption rate. This accounts for all reactions which do not
produce secondary neutrons. Units are reactions per source particle.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">fission:</th><td class="field-body"><p class="first">Total fission rate in reactions per source particle.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">nu-fission:</th><td class="field-body"><p class="first">Total production of neutrons due to fission. Units are neutrons produced
per source neutron.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">delayed-nu-fission:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body"><p class="first">Total production of delayed neutrons due to fission. Units are neutrons produced
per source neutron.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">kappa-fission:</th><td class="field-body"><p class="first">The recoverable energy production rate due to fission. The recoverable
energy is defined as the fission product kinetic energy, prompt and
delayed neutron kinetic energies, prompt and delayed <img class="math" src="../_images/math/0ebb67342b546ca42a1c634b1ef03c893c4cdedb.png" alt="\gamma"/>-ray
total energies, and the total energy released by the delayed <img class="math" src="../_images/math/8ce03f78ed945f2ef3dac87c8799b55b393527e7.png" alt="\beta"/>
particles. The neutrino energy does not contribute to this response. The
prompt and delayed <img class="math" src="../_images/math/0ebb67342b546ca42a1c634b1ef03c893c4cdedb.png" alt="\gamma"/>-rays are assumed to deposit their energy
locally. Units are MeV per source particle.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">scatter-N:</th><td class="field-body"><p class="first">Tally the N<sup>th</sup> scattering moment, where N is the Legendre
expansion order of the change in particle angle <img class="math" src="../_images/math/7da619f2d4a1b1851f09ac6bc11d3483998c98e4.png" alt="\left(\mu\right)"/>.
N must be between 0 and 10. As an example, tallying the 2<sup>nd</sup> scattering moment would be specified as <code class="docutils literal"><span class="pre">&lt;scores&gt;</span> <span class="pre">scatter-2</span>
<span class="pre">&lt;/scores&gt;</span></code>. Units are reactions per source particle.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">scatter-PN:</th><td class="field-body"><p class="first">Tally all of the scattering moments from order 0 to N, where N is the
Legendre expansion order of the change in particle angle
<img class="math" src="../_images/math/7da619f2d4a1b1851f09ac6bc11d3483998c98e4.png" alt="\left(\mu\right)"/>. That is, <code class="docutils literal"><span class="pre">scatter-P1</span></code> is equivalent to
requesting tallies of <code class="docutils literal"><span class="pre">scatter-0</span></code> and <code class="docutils literal"><span class="pre">scatter-1</span></code>.  Like for
<code class="docutils literal"><span class="pre">scatter-N</span></code>, N must be between 0 and 10. As an example, tallying up to
the 2<sup>nd</sup> scattering moment would be specified as <code class="docutils literal"><span class="pre">&lt;scores&gt;</span>
<span class="pre">scatter-P2</span> <span class="pre">&lt;/scores&gt;</span></code>. Units are reactions per source particle.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">scatter-YN:</th><td class="field-body"><p class="first"><code class="docutils literal"><span class="pre">scatter-YN</span></code> is similar to <code class="docutils literal"><span class="pre">scatter-PN</span></code> except an additional expansion
is performed for the incoming particle direction
<img class="math" src="../_images/math/94dea2b917efe3b755b49b6c9de1f2270ddcb436.png" alt="\left(\Omega\right)"/> using the real spherical harmonics.  This is
useful for performing angular flux moment weighting of the scattering
moments. Like <code class="docutils literal"><span class="pre">scatter-PN</span></code>, <code class="docutils literal"><span class="pre">scatter-YN</span></code> will tally all of the moments
from order 0 to N; N again must be between 0 and 10. Units are reactions
per source particle.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">nu-scatter, nu-scatter-N, nu-scatter-PN, nu-scatter-YN:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body"><p class="first">These scores are similar in functionality to their <code class="docutils literal"><span class="pre">scatter*</span></code>
equivalents except the total production of neutrons due to scattering is
scored vice simply the scattering rate. This accounts for multiplicity
from (n,2n), (n,3n), and (n,4n) reactions. Units are neutrons produced per
source particle.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">flux-YN:</th><td class="field-body"><p class="first">Spherical harmonic expansion of the direction of motion
<img class="math" src="../_images/math/94dea2b917efe3b755b49b6c9de1f2270ddcb436.png" alt="\left(\Omega\right)"/> of the total flux.  This score will tally all
of the harmonic moments of order 0 to N.  N must be between 0
and 10. Units are particle-cm per source particle.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">total-YN:</th><td class="field-body"><p class="first">The total reaction rate expanded via spherical harmonics about the
direction of motion of the neutron, <img class="math" src="../_images/math/b39932b8cbb311eeee9815738f6be3757737b2ff.png" alt="\Omega"/>.
This score will tally all of the harmonic moments of order 0 to N.  N must
be between 0 and 10. Units are reactions per source particle.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">current:</th><td class="field-body"><p class="first">Partial currents on the boundaries of each cell in a mesh. Units are
particles per source particle.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This score can only be used if a mesh filter has been
specified. Furthermore, it may not be used in conjunction with any
other score.</p>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">inverse-velocity:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body"><p class="first">The flux-weighted inverse velocity where the velocity is in units of
centimeters per second.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The <code class="docutils literal"><span class="pre">analog</span></code> estimator is actually identical to the <code class="docutils literal"><span class="pre">collision</span></code>
estimator for the inverse-velocity score.</p>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">events:</th><td class="field-body"><p class="first last">Number of scoring events. Units are events per source particle.</p>
</td>
</tr>
</tbody>
</table>
</td>
</tr>
<tr class="field-even field"><th class="field-name">trigger:</th><td class="field-body"><blockquote class="first">
<div><p>Precision trigger applied to all filter bins and nuclides for this tally.
It must specify the trigger&#8217;s type, threshold and scores to which it will
be applied. It has the following attributes/sub-elements:</p>
</div></blockquote>
<table class="last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">type:</th><td class="field-body"><p class="first">The type of the trigger. Accepted options are &#8220;variance&#8221;, &#8220;std_dev&#8221;,
and &#8220;rel_err&#8221;.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">variance:</th><td class="field-body">Variance of the batch mean <img class="math" src="../_images/math/93c29bfedc993de115781b4fbb7e3a8b9e8d6b51.png" alt="\sigma^2"/></td>
</tr>
<tr class="field-even field"><th class="field-name">std_dev:</th><td class="field-body">Standard deviation of the batch mean <img class="math" src="../_images/math/2298cf1485084afe72757a9c8483af49a138d81f.png" alt="\sigma"/></td>
</tr>
<tr class="field-odd field"><th class="field-name">rel_err:</th><td class="field-body">Relative error of the batch mean <img class="math" src="../_images/math/c9c838f8fbbfc1a034d065ca86954b9960435b74.png" alt="\frac{\sigma}{\mu}"/></td>
</tr>
</tbody>
</table>
<p><em>Default</em>: None</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">threshold:</th><td class="field-body"><p class="first">The precision trigger&#8217;s convergence criterion for tallied values.</p>
<p><em>Default</em>: None</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">scores:</th><td class="field-body"><p class="first">The score(s) in this tally to which the trigger should be applied.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The <code class="docutils literal"><span class="pre">scores</span></code> in <code class="docutils literal"><span class="pre">trigger</span></code> must have been defined in
<code class="docutils literal"><span class="pre">scores</span></code> in <code class="docutils literal"><span class="pre">tally</span></code>. An optional &#8220;all&#8221; may be used to
select all scores in this tally.</p>
</div>
<p class="last"><em>Default</em>: &#8220;all&#8221;</p>
</td>
</tr>
</tbody>
</table>
</td>
</tr>
</tbody>
</table>
</div></blockquote>
</div>
<div class="section" id="mesh-element">
<h3>3.6.2. <code class="docutils literal"><span class="pre">&lt;mesh&gt;</span></code> Element<a class="headerlink" href="#mesh-element" title="Permalink to this headline">¶</a></h3>
<p>If a structured mesh is desired as a filter for a tally, it must be specified in
a separate element with the tag name <code class="docutils literal"><span class="pre">&lt;mesh&gt;</span></code>. This element has the following
attributes/sub-elements:</p>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">type:</th><td class="field-body">The type of structured mesh. The only valid option is &#8220;regular&#8221;.</td>
</tr>
<tr class="field-even field"><th class="field-name">dimension:</th><td class="field-body">The number of mesh cells in each direction.</td>
</tr>
<tr class="field-odd field"><th class="field-name">lower_left:</th><td class="field-body">The lower-left corner of the structured mesh. If only two coordinates are
given, it is assumed that the mesh is an x-y mesh.</td>
</tr>
<tr class="field-even field"><th class="field-name">upper_right:</th><td class="field-body">The upper-right corner of the structured mesh. If only two coordinates are
given, it is assumed that the mesh is an x-y mesh.</td>
</tr>
<tr class="field-odd field"><th class="field-name">width:</th><td class="field-body">The width of mesh cells in each direction.</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">One of <code class="docutils literal"><span class="pre">&lt;upper_right&gt;</span></code> or <code class="docutils literal"><span class="pre">&lt;width&gt;</span></code> must be specified, but not both
(even if they are consistent with one another).</p>
</div>
</div></blockquote>
</div>
<div class="section" id="assume-separate-element">
<h3>3.6.3. <code class="docutils literal"><span class="pre">&lt;assume_separate&gt;</span></code> Element<a class="headerlink" href="#assume-separate-element" title="Permalink to this headline">¶</a></h3>
<p>In cases where the user needs to specify many different tallies each of which
are spatially separate, this tag can be used to cut down on some of the tally
overhead. The effect of assuming all tallies are spatially separate is that once
one tally is scored to, the same event is assumed not to score to any other
tallies. This element should be followed by &#8220;true&#8221; or &#8220;false&#8221;.</p>
<blockquote>
<div><div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">If used incorrectly, the assumption that all tallies are
spatially separate can lead to incorrect results.</p>
</div>
<p><em>Default</em>: false</p>
</div></blockquote>
</div>
</div>
<div class="section" id="geometry-plotting-specification-plots-xml">
<span id="usersguide-plotting"></span><h2>3.7. Geometry Plotting Specification &#8211; plots.xml<a class="headerlink" href="#geometry-plotting-specification-plots-xml" title="Permalink to this headline">¶</a></h2>
<p>Basic plotting capabilities are available in OpenMC by creating a plots.xml
file and subsequently running with the command-line flag <code class="docutils literal"><span class="pre">-plot</span></code>. The root
element of the plots.xml is simply <code class="docutils literal"><span class="pre">&lt;plots&gt;</span></code> and any number output plots can
be defined with <code class="docutils literal"><span class="pre">&lt;plot&gt;</span></code> sub-elements.  Two plot types are currently
implemented in openMC:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">slice</span></code>  2D pixel plot along one of the major axes. Produces a PPM image
file.</li>
<li><code class="docutils literal"><span class="pre">voxel</span></code>  3D voxel data dump. Produces a binary file containing voxel xyz
position and cell or material id.</li>
</ul>
<div class="section" id="plot-element">
<h3>3.7.1. <code class="docutils literal"><span class="pre">&lt;plot&gt;</span></code> Element<a class="headerlink" href="#plot-element" title="Permalink to this headline">¶</a></h3>
<p>Each plot is specified by a combination of the following attributes or
sub-elements:</p>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">id:</th><td class="field-body"><p class="first">The unique <code class="docutils literal"><span class="pre">id</span></code> of the plot.</p>
<p><em>Default</em>: None - Required entry</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">filename:</th><td class="field-body"><p class="first">Filename for the output plot file.</p>
<p><em>Default</em>: &#8220;plot&#8221;</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">color:</th><td class="field-body"><p class="first">Keyword for plot coloring.  This can only be either <code class="docutils literal"><span class="pre">cell</span></code> or <code class="docutils literal"><span class="pre">mat</span></code>,
which colors regions by cells and materials, respectively. For voxel plots,
this determines which id (cell or material) is associated with each
position.</p>
<p><em>Default</em>: <code class="docutils literal"><span class="pre">cell</span></code></p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">level:</th><td class="field-body"><p class="first">Universe depth to plot at (optional).  This parameter controls how many
universe levels deep to pull cell and material ids from when setting plot
colors.  If a given location does not have as many levels as specified,
colors will be taken from the lowest level at that location. For example, if
<code class="docutils literal"><span class="pre">level</span></code> is set to zero colors will be taken from top-level (universe zero)
cells only.  However, if <code class="docutils literal"><span class="pre">level</span></code> is set to 1 colors will be taken from
cells in universes that fill top-level fill-cells, and from top-level cells
that contain materials.</p>
<p><em>Default</em>: Whatever the deepest universe is in the model</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">origin:</th><td class="field-body"><p class="first">Specifies the (x,y,z) coordinate of the center of the plot.  Should be three
floats separated by spaces.</p>
<p><em>Default</em>: None - Required entry</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">width:</th><td class="field-body"><p class="first">Specifies the width of the plot along each of the basis directions.  Should
be two or three floats separated by spaces for 2D plots and 3D plots,
respectively.</p>
<p><em>Default</em>: None - Required entry</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">type:</th><td class="field-body"><p class="first">Keyword for type of plot to be produced. Currently only &#8220;slice&#8221; and &#8220;voxel&#8221;
plots are implemented. The &#8220;slice&#8221; plot type creates 2D pixel maps saved in
the PPM file format. PPM files can be displayed in most viewers (e.g. the
default Gnome viewer, IrfanView, etc.).  The &#8220;voxel&#8221; plot type produces a
binary datafile containing voxel grid positioning and the cell or material
(specified by the <code class="docutils literal"><span class="pre">color</span></code> tag) at the center of each voxel. These
datafiles can be processed into 3D SILO files using the
<code class="docutils literal"><span class="pre">openmc-voxel-to-silovtk</span></code> utility provided with the OpenMC source, and
subsequently viewed with a 3D viewer such as VISIT or Paraview. See the
<a class="reference internal" href="output/voxel.html#usersguide-voxel"><span>Voxel Plot File Format</span></a> for information about the datafile structure.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Since the PPM format is saved without any kind of compression,
the resulting file sizes can be quite large.  Saving the image in
the PNG format can often times reduce the file size by orders of
magnitude without any loss of image quality. Likewise,
high-resolution voxel files produced by OpenMC can be quite large,
but the equivalent SILO files will be significantly smaller.</p>
</div>
<p class="last"><em>Default</em>: &#8220;slice&#8221;</p>
</td>
</tr>
</tbody>
</table>
</div></blockquote>
<p><code class="docutils literal"><span class="pre">&lt;plot&gt;</span></code> elements of <code class="docutils literal"><span class="pre">type</span></code> &#8220;slice&#8221; and &#8220;voxel&#8221; must contain the <code class="docutils literal"><span class="pre">pixels</span></code>
attribute or sub-element:</p>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">pixels:</th><td class="field-body"><p class="first">Specifies the number of pixels or voxels to be used along each of the basis
directions for &#8220;slice&#8221; and &#8220;voxel&#8221; plots, respectively. Should be two or
three integers separated by spaces.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">The <code class="docutils literal"><span class="pre">pixels</span></code> input determines the output file size.  For the
PPM format, 10 million pixels will result in a file just under
30 MB in size. A 10 million voxel binary file will be around
40 MB.</p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">If the aspect ratio defined in <code class="docutils literal"><span class="pre">pixels</span></code> does not match the
aspect ratio defined in <code class="docutils literal"><span class="pre">width</span></code> the plot may appear stretched
or squeezed.</p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Geometry features along a basis direction smaller than
<code class="docutils literal"><span class="pre">width</span></code>/<code class="docutils literal"><span class="pre">pixels</span></code> along that basis direction may not appear
in the plot.</p>
</div>
<p class="last"><em>Default</em>: None - Required entry for &#8220;slice&#8221; and &#8220;voxel&#8221; plots</p>
</td>
</tr>
</tbody>
</table>
</div></blockquote>
<p><code class="docutils literal"><span class="pre">&lt;plot&gt;</span></code> elements of <code class="docutils literal"><span class="pre">type</span></code> &#8220;slice&#8221; can also contain the following
attributes or sub-elements.  These are not used in &#8220;voxel&#8221; plots:</p>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">basis:</th><td class="field-body"><p class="first">Keyword specifying the plane of the plot for &#8220;slice&#8221; type plots.  Can be
one of: &#8220;xy&#8221;, &#8220;xz&#8221;, &#8220;yz&#8221;.</p>
<p><em>Default</em>: &#8220;xy&#8221;</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">background:</th><td class="field-body"><p class="first">Specifies the RGB color of the regions where no OpenMC cell can be found.
Should be three integers separated by spaces.</p>
<p><em>Default</em>: 0 0 0 (black)</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">col_spec:</th><td class="field-body"><p class="first">Any number of this optional tag may be included in each <code class="docutils literal"><span class="pre">&lt;plot&gt;</span></code> element,
which can override the default random colors for cells or materials. Each
<code class="docutils literal"><span class="pre">col_spec</span></code> element must contain <code class="docutils literal"><span class="pre">id</span></code> and <code class="docutils literal"><span class="pre">rgb</span></code> sub-elements.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">id:</th><td class="field-body">Specifies the cell or material unique id for the color specification.</td>
</tr>
<tr class="field-even field"><th class="field-name">rgb:</th><td class="field-body">Specifies the custom color for the cell or material. Should be 3 integers
separated by spaces.</td>
</tr>
</tbody>
</table>
<p>As an example, if your plot is colored by material and you want material 23
to be blue, the corresponding <code class="docutils literal"><span class="pre">col_spec</span></code> element would look like:</p>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;col_spec</span> <span class="na">id=</span><span class="s">&quot;23&quot;</span> <span class="na">rgb=</span><span class="s">&quot;0 0 255&quot;</span> <span class="nt">/&gt;</span>
</pre></div>
</div>
<p><em>Default</em>: None</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">mask:</th><td class="field-body"><p class="first">The special <code class="docutils literal"><span class="pre">mask</span></code> sub-element allows for the selective plotting of <em>only</em>
user-specified cells or materials. Only one <code class="docutils literal"><span class="pre">mask</span></code> element is allowed per
<code class="docutils literal"><span class="pre">plot</span></code> element, and it must contain as attributes or sub-elements a
background masking color and a list of cells or materials to plot:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">components:</th><td class="field-body">List of unique <code class="docutils literal"><span class="pre">id</span></code> numbers of the cells or materials to plot. Should be
any number of integers separated by spaces.</td>
</tr>
<tr class="field-even field"><th class="field-name">background:</th><td class="field-body">Color to apply to all cells or materials not in the <code class="docutils literal"><span class="pre">components</span></code> list of
cells or materials to plot. This overrides any <code class="docutils literal"><span class="pre">col_spec</span></code> color
specifications.</td>
</tr>
</tbody>
</table>
<p><em>Default</em>: None</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">meshlines:</th><td class="field-body"><p class="first">The <code class="docutils literal"><span class="pre">meshlines</span></code> sub-element allows for plotting the boundaries of
a tally mesh on top of a plot. Only one <code class="docutils literal"><span class="pre">meshlines</span></code> element is allowed per
<code class="docutils literal"><span class="pre">plot</span></code> element, and it must contain as attributes or sub-elements a mesh
type and a linewidth.  Optionally, a color may be specified for the overlay:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">meshtype:</th><td class="field-body"><p class="first">The type of the mesh to be plotted. Valid options are &#8220;tally&#8221;, &#8220;entropy&#8221;,
&#8220;ufs&#8221;, and &#8220;cmfd&#8221;.  If plotting &#8220;tally&#8221; meshes, the id of the mesh to plot
must be specified with the <code class="docutils literal"><span class="pre">id</span></code> sub-element.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">id:</th><td class="field-body"><p class="first">A single integer id number for the mesh specified on <code class="docutils literal"><span class="pre">tallies.xml</span></code> that
should be plotted. This element is only required for <code class="docutils literal"><span class="pre">meshtype=&quot;tally&quot;</span></code>.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">linewidth:</th><td class="field-body"><p class="first">A single integer number of pixels of linewidth to specify for the mesh
boundaries. Specifying this as 0 indicates that lines will be 1 pixel
thick, specifying 1 indicates 3 pixels thick, specifying 2 indicates
5 pixels thick, etc.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">color:</th><td class="field-body"><p class="first">Specifies the custom color for the meshlines boundaries. Should be 3
integers separated by whitespace.  This element is optional.</p>
<p class="last"><em>Default</em>: 0 0 0 (black)</p>
</td>
</tr>
</tbody>
</table>
<p class="last"><em>Default</em>: None</p>
</td>
</tr>
</tbody>
</table>
</div></blockquote>
</div>
</div>
<div class="section" id="cmfd-specification-cmfd-xml">
<span id="usersguide-cmfd"></span><h2>3.8. CMFD Specification &#8211; cmfd.xml<a class="headerlink" href="#cmfd-specification-cmfd-xml" title="Permalink to this headline">¶</a></h2>
<p>Coarse mesh finite difference acceleration method has been implemented in
OpenMC. Currently, it allows users to accelerate fission source convergence
during inactive neutron batches. To run CMFD, the <code class="docutils literal"><span class="pre">&lt;run_cmfd&gt;</span></code> element in
<code class="docutils literal"><span class="pre">settings.xml</span></code> should be set to &#8220;true&#8221;.</p>
<div class="section" id="begin-element">
<h3>3.8.1. <code class="docutils literal"><span class="pre">&lt;begin&gt;</span></code> Element<a class="headerlink" href="#begin-element" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal"><span class="pre">&lt;begin&gt;</span></code> element controls what batch CMFD calculations should begin.</p>
<blockquote>
<div><em>Default</em>: 1</div></blockquote>
</div>
<div class="section" id="dhat-reset-element">
<h3>3.8.2. <code class="docutils literal"><span class="pre">&lt;dhat_reset&gt;</span></code> Element<a class="headerlink" href="#dhat-reset-element" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal"><span class="pre">&lt;dhat_reset&gt;</span></code> element controls whether <img class="math" src="../_images/math/b82d559c8ea6a5545c0eef62e3197a25d38cc15a.png" alt="\widehat{D}"/> nonlinear
CMFD parameters should be reset to zero before solving CMFD eigenproblem.
It can be turned on with &#8220;true&#8221; and off with &#8220;false&#8221;.</p>
<blockquote>
<div><em>Default</em>: false</div></blockquote>
</div>
<div class="section" id="display-element">
<h3>3.8.3. <code class="docutils literal"><span class="pre">&lt;display&gt;</span></code> Element<a class="headerlink" href="#display-element" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal"><span class="pre">&lt;display&gt;</span></code> element sets one additional CMFD output column. Options are:</p>
<ul>
<li><p class="first">&#8220;balance&#8221; - prints the RMS [%] of the resdiual from the neutron balance
equation on CMFD tallies.</p>
</li>
<li><p class="first">&#8220;dominance&#8221; - prints the estimated dominance ratio from the CMFD iterations.
<strong>This will only work for power iteration eigensolver</strong>.</p>
</li>
<li><p class="first">&#8220;entropy&#8221; - prints the <em>entropy</em> of the CMFD predicted fission source.
<strong>Can only be used if OpenMC entropy is active as well</strong>.</p>
</li>
<li><p class="first">&#8220;source&#8221; - prints the RMS [%] between the OpenMC fission source and CMFD
fission source.</p>
<p><em>Default</em>: balance</p>
</li>
</ul>
</div>
<div class="section" id="downscatter-element">
<h3>3.8.4. <code class="docutils literal"><span class="pre">&lt;downscatter&gt;</span></code> Element<a class="headerlink" href="#downscatter-element" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal"><span class="pre">&lt;downscatter&gt;</span></code> element controls whether an effective downscatter cross
section should be used when using 2-group CMFD. It can be turned on with &#8220;true&#8221;
and off with &#8220;false&#8221;.</p>
<blockquote>
<div><em>Default</em>: false</div></blockquote>
</div>
<div class="section" id="feedback-element">
<h3>3.8.5. <code class="docutils literal"><span class="pre">&lt;feedback&gt;</span></code> Element<a class="headerlink" href="#feedback-element" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal"><span class="pre">&lt;feedback&gt;</span></code> element controls whether or not the CMFD diffusion result is
used to adjust the weight of fission source neutrons on the next OpenMC batch.
It can be turned on with &#8220;true&#8221; and off with &#8220;false&#8221;.</p>
<blockquote>
<div><em>Default</em>: false</div></blockquote>
</div>
<div class="section" id="gauss-seidel-tolerance-element">
<h3>3.8.6. <code class="docutils literal"><span class="pre">&lt;gauss_seidel_tolerance&gt;</span></code> Element<a class="headerlink" href="#gauss-seidel-tolerance-element" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal"><span class="pre">&lt;gauss_seidel_tolerance&gt;</span></code> element specifies two parameters. The first is
the absolute inner tolerance for Gauss-Seidel iterations when performing CMFD
and the second is the relative inner tolerance for Gauss-Seidel iterations
for CMFD calculations.</p>
<blockquote>
<div><em>Default</em>: 1.e-10 1.e-5</div></blockquote>
</div>
<div class="section" id="ktol-element">
<h3>3.8.7. <code class="docutils literal"><span class="pre">&lt;ktol&gt;</span></code> Element<a class="headerlink" href="#ktol-element" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal"><span class="pre">&lt;ktol&gt;</span></code> element specifies the tolerance on the eigenvalue when performing
CMFD power iteration.</p>
<blockquote>
<div><em>Default</em>: 1.e-8</div></blockquote>
</div>
<div class="section" id="id2">
<h3>3.8.8. <code class="docutils literal"><span class="pre">&lt;mesh&gt;</span></code> Element<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<p>The CMFD mesh is a structured Cartesian mesh. This element has the following
attributes/sub-elements:</p>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">lower_left:</th><td class="field-body"><p class="first">The lower-left corner of the structured mesh. If only two coordinates are
given, it is assumed that the mesh is an x-y mesh.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">upper_right:</th><td class="field-body"><p class="first">The upper-right corner of the structrued mesh. If only two coordinates are
given, it is assumed that the mesh is an x-y mesh.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">dimension:</th><td class="field-body"><p class="first">The number of mesh cells in each direction.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">width:</th><td class="field-body"><p class="first">The width of mesh cells in each direction.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">energy:</th><td class="field-body"><p class="first">Energy bins [in MeV], listed in ascending order (e.g. 0.0 0.625e-7 20.0)
for CMFD tallies and acceleration. If no energy bins are listed, OpenMC
automatically assumes a one energy group calculation over the entire
energy range.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">albedo:</th><td class="field-body"><p class="first">Surface ratio of incoming to outgoing partial currents on global boundary
conditions. They are listed in the following order: -x +x -y +y -z +z.</p>
<p><em>Default</em>: 1.0 1.0 1.0 1.0 1.0 1.0</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">map:</th><td class="field-body"><p class="first">An optional acceleration map can be specified to overlay on the coarse
mesh spatial grid. If this option is used, a <code class="docutils literal"><span class="pre">1</span></code> is used for a
non-accelerated region and a <code class="docutils literal"><span class="pre">2</span></code> is used for an accelerated region.
For a simple 4x4 coarse mesh with a 2x2 fuel lattice surrounded by
reflector, the map is:</p>
<blockquote>
<div><p><code class="docutils literal"><span class="pre">1</span> <span class="pre">1</span> <span class="pre">1</span> <span class="pre">1</span></code></p>
<p><code class="docutils literal"><span class="pre">1</span> <span class="pre">2</span> <span class="pre">2</span> <span class="pre">1</span></code></p>
<p><code class="docutils literal"><span class="pre">1</span> <span class="pre">2</span> <span class="pre">2</span> <span class="pre">1</span></code></p>
<p><code class="docutils literal"><span class="pre">1</span> <span class="pre">1</span> <span class="pre">1</span> <span class="pre">1</span></code></p>
</div></blockquote>
<p>Therefore a 2x2 system of equations is solved rather than a 4x4. This
is extremely important to use in reflectors as neutrons will not
contribute to any tallies far away from fission source neutron regions.
A <code class="docutils literal"><span class="pre">2</span></code> must be used to identify any fission source region.</p>
<div class="last admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Only two of the following three sub-elements are needed:
<code class="docutils literal"><span class="pre">lower_left</span></code>, <code class="docutils literal"><span class="pre">upper_right</span></code> and <code class="docutils literal"><span class="pre">width</span></code>. Any combination
of two of these will yield the third.</p>
</div>
</td>
</tr>
</tbody>
</table>
</div></blockquote>
</div>
<div class="section" id="norm-element">
<h3>3.8.9. <code class="docutils literal"><span class="pre">&lt;norm&gt;</span></code> Element<a class="headerlink" href="#norm-element" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal"><span class="pre">&lt;norm&gt;</span></code> element is used to normalize the CMFD fission source distribution
to a particular value. For example, if a fission source is calculated for a
17 x 17 lattice of pins, the fission source may be normalized to the number of
fission source regions, in this case 289. This is useful when visualizing this
distribution as the average peaking factor will be unity. This parameter will
not impact the calculation.</p>
<blockquote>
<div><em>Default</em>: 1.0</div></blockquote>
</div>
<div class="section" id="power-monitor-element">
<h3>3.8.10. <code class="docutils literal"><span class="pre">&lt;power_monitor&gt;</span></code> Element<a class="headerlink" href="#power-monitor-element" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal"><span class="pre">&lt;power_monitor&gt;</span></code> element is used to view the convergence of power
iteration. This option can be turned on with &#8220;true&#8221; and turned off with &#8220;false&#8221;.</p>
<blockquote>
<div><em>Default</em>: false</div></blockquote>
</div>
<div class="section" id="run-adjoint-element">
<h3>3.8.11. <code class="docutils literal"><span class="pre">&lt;run_adjoint&gt;</span></code> Element<a class="headerlink" href="#run-adjoint-element" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal"><span class="pre">&lt;run_adjoint&gt;</span></code> element can be turned on with &#8220;true&#8221; to have an adjoint
calculation be performed on the last batch when CMFD is active.</p>
<blockquote>
<div><em>Default</em>: false</div></blockquote>
</div>
<div class="section" id="shift-element">
<h3>3.8.12. <code class="docutils literal"><span class="pre">&lt;shift&gt;</span></code> Element<a class="headerlink" href="#shift-element" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal"><span class="pre">&lt;shift&gt;</span></code> element specifies an optional Wielandt shift parameter for
accelerating power iterations. It is by default very large so the impact of the
shift is effectively zero.</p>
<blockquote>
<div><em>Default</em>: 1e6</div></blockquote>
</div>
<div class="section" id="spectral-element">
<h3>3.8.13. <code class="docutils literal"><span class="pre">&lt;spectral&gt;</span></code> Element<a class="headerlink" href="#spectral-element" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal"><span class="pre">&lt;spectral&gt;</span></code> element specifies an optional spectral radius that can be set to
accelerate the convergence of Gauss-Seidel iterations during CMFD power iteration
solve.</p>
<blockquote>
<div><em>Default</em>: 0.0</div></blockquote>
</div>
<div class="section" id="stol-element">
<h3>3.8.14. <code class="docutils literal"><span class="pre">&lt;stol&gt;</span></code> Element<a class="headerlink" href="#stol-element" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal"><span class="pre">&lt;stol&gt;</span></code> element specifies the tolerance on the fission source when performing
CMFD power iteration.</p>
<blockquote>
<div><em>Default</em>: 1.e-8</div></blockquote>
</div>
<div class="section" id="tally-reset-element">
<h3>3.8.15. <code class="docutils literal"><span class="pre">&lt;tally_reset&gt;</span></code> Element<a class="headerlink" href="#tally-reset-element" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal"><span class="pre">&lt;tally_reset&gt;</span></code> element contains a list of batch numbers in which CMFD tallies
should be reset.</p>
<blockquote>
<div><em>Default</em>: None</div></blockquote>
</div>
<div class="section" id="write-matrices-element">
<h3>3.8.16. <code class="docutils literal"><span class="pre">&lt;write_matrices&gt;</span></code> Element<a class="headerlink" href="#write-matrices-element" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal"><span class="pre">&lt;write_matrices&gt;</span></code> element is used to write the sparse matrices created
when solving CMFD equations. This option can be turned on with &#8220;true&#8221; and off
with &#8220;false&#8221;.</p>
<blockquote>
<div><em>Default</em>: false</div></blockquote>
</div>
</div>
<div class="section" id="ersn-openmc-graphical-user-interface">
<h2>3.9. ERSN-OpenMC Graphical User Interface<a class="headerlink" href="#ersn-openmc-graphical-user-interface" title="Permalink to this headline">¶</a></h2>
<p>A third-party Java-based user-friendly graphical user interface for creating XML
input files called <a class="reference external" href="https://github.com/EL-Bakkali-Jaafar/ERSN-OpenMC">ERSN-OpenMC</a> is developed and maintained by members of the
Radiation and Nuclear Systems Group at the Faculty of Sciences Tetouan, Morocco.
The GUI also allows one to automatically download prerequisites for installing and
running OpenMC.</p>
</div>
</div>


      </div>
      <div class="bottomnav" role="navigation" aria-label="bottom navigation">
      
        <p>
        «&#160;&#160;<a href="install.html">2. Installation and Configuration</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="../index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="output/index.html">4. Output File Formats</a>&#160;&#160;»
        </p>

      </div>


    <div class="footer" role="contentinfo">
        &copy; Copyright 2011-2015, Massachusetts Institute of Technology.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.3.
    </div>
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-30411614-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>

  </body>
</html>