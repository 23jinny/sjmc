<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>3. Writing XML Input Files &mdash; OpenMC Documentation</title>
    <link rel="stylesheet" href="../_static/haiku.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/print.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.5.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/theme_extras.js"></script>
    <link rel="top" title="OpenMC Documentation" href="../index.html" />
    <link rel="up" title="User’s Guide" href="index.html" />
    <link rel="next" title="4. Data Processing and Visualization" href="processing.html" />
    <link rel="prev" title="2. Installation and Configuration" href="install.html" /> 
  </head>
  <body>
      <div class="header">
        <a href="../index.html">
          <img class="logo" src="../_static/openmc.png" alt="Logo"/>
        </a>
      </div>
      <div class="topnav">
      
        <p>
        «&#160;&#160;<a href="install.html">2. Installation and Configuration</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="../index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="processing.html">4. Data Processing and Visualization</a>&#160;&#160;»
        </p>

      </div>
      <div class="content">
        
        
  <div class="section" id="writing-xml-input-files">
<span id="usersguide-input"></span><h1>3. Writing XML Input Files<a class="headerlink" href="#writing-xml-input-files" title="Permalink to this headline">¶</a></h1>
<p>Unlike many other Monte Carlo codes which use an arbitrary-format ASCII file
with &#8220;cards&#8221; to specify a particular geometry, materials, and associated run
settings, the input files for OpenMC are structured in a set of <a class="reference external" href="http://www.w3.org/XML/">XML</a> files. XML,
which stands for eXtensible Markup Language, is a simple format that allows data
to be exchanged efficiently between different programs and interfaces.</p>
<p>Anyone who has ever seen webpages written in HTML will be familiar with the
structure of XML whereby &#8220;tags&#8221; enclosed in angle brackets denote that a
particular piece of data will follow. Let us examine the follow example:</p>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;person&gt;</span>
  <span class="nt">&lt;firstname&gt;</span>John<span class="nt">&lt;/firstname&gt;</span>
  <span class="nt">&lt;lastname&gt;</span>Smith<span class="nt">&lt;/lastname&gt;</span>
  <span class="nt">&lt;age&gt;</span>27<span class="nt">&lt;/age&gt;</span>
  <span class="nt">&lt;occupation&gt;</span>Health Physicist<span class="nt">&lt;/occupation&gt;</span>
<span class="nt">&lt;/person&gt;</span>
</pre></div>
</div>
<p>Here we see that the first tag indicates that the following data will describe a
person. The nested tags <em>firstname</em>, <em>lastname</em>, <em>age</em>, and <em>occupation</em>
indicate characteristics about the person being described.</p>
<p>In much the same way, OpenMC input uses XML tags to describe the geometry, the
materials, and settings for a Monte Carlo simulation.</p>
<div class="section" id="overview-of-files">
<h2>3.1. Overview of Files<a class="headerlink" href="#overview-of-files" title="Permalink to this headline">¶</a></h2>
<p>To assemble a complete model for OpenMC, one needs to create separate XML files
for the geometry, materials, and settings. Additionally, there are three optional
input files. The first is a tallies XML file that specifies physical quantities
to be tallied. The second is a plots XML file that specifies regions of geometry
which should be plotted. The third is a CMFD XML file that specifies coarse mesh
acceleration geometry and execution parameters. OpenMC expects that these
files are called:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">geometry.xml</span></tt></li>
<li><tt class="docutils literal"><span class="pre">materials.xml</span></tt></li>
<li><tt class="docutils literal"><span class="pre">settings.xml</span></tt></li>
<li><tt class="docutils literal"><span class="pre">tallies.xml</span></tt></li>
<li><tt class="docutils literal"><span class="pre">plots.xml</span></tt></li>
<li><tt class="docutils literal"><span class="pre">cmfd.xml</span></tt></li>
</ul>
</div>
<div class="section" id="settings-specification-settings-xml">
<h2>3.2. Settings Specification &#8211; settings.xml<a class="headerlink" href="#settings-specification-settings-xml" title="Permalink to this headline">¶</a></h2>
<p>All simulation parameters and miscellaneous options are specified in the
settings.xml file.</p>
<div class="section" id="confidence-intervals-element">
<h3>3.2.1. <tt class="docutils literal"><span class="pre">&lt;confidence_intervals&gt;</span></tt> Element<a class="headerlink" href="#confidence-intervals-element" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="docutils literal"><span class="pre">&lt;confidence_intervals&gt;</span></tt> element has no attributes and has an accepted
value of &#8220;true&#8221; or &#8220;false&#8221;. If set to &#8220;true&#8221;, uncertainties on tally results
will be reported as the half-width of the 95% two-sided confidence interval. If
set to &#8220;false&#8221;, uncertainties on tally results will be reported as the sample
standard deviation.</p>
<blockquote>
<em>Default</em>: false</blockquote>
</div>
<div class="section" id="cross-sections-element">
<span id="cross-sections"></span><h3>3.2.2. <tt class="docutils literal"><span class="pre">&lt;cross_sections&gt;</span></tt> Element<a class="headerlink" href="#cross-sections-element" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="docutils literal"><span class="pre">&lt;cross_sections&gt;</span></tt> element has no attributes and simply indicates the path
to an XML cross section listing file (usually named cross_sections.xml). If this
element is absent from the settings.xml file, the <span class="target" id="index-0"></span><tt class="xref std std-envvar docutils literal"><span class="pre">CROSS_SECTIONS</span></tt>
environment variable will be used to find the path to the XML cross section
listing.</p>
</div>
<div class="section" id="cutoff-element">
<h3>3.2.3. <tt class="docutils literal"><span class="pre">&lt;cutoff&gt;</span></tt> Element<a class="headerlink" href="#cutoff-element" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="docutils literal"><span class="pre">&lt;cutoff&gt;</span></tt> element indicates the weight cutoff used below which particles
undergo Russian roulette. Surviving particles are assigned a user-determined
weight. Note that weight cutoffs and Russian rouletting are not turned on by
default. This element has the following attributes/sub-elements:</p>
<blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">weight:</th><td class="field-body"><p class="first">The weight below which particles undergo Russian roulette.</p>
<p><em>Default</em>: 0.25</p>
</td>
</tr>
<tr class="field"><th class="field-name">weight_avg:</th><td class="field-body"><p class="first">The weight that is assigned to particles that are not killed after Russian
roulette.</p>
<p class="last"><em>Default</em>: 1.0</p>
</td>
</tr>
</tbody>
</table>
</blockquote>
</div>
<div class="section" id="eigenvalue-element">
<h3>3.2.4. <tt class="docutils literal"><span class="pre">&lt;eigenvalue&gt;</span></tt> Element<a class="headerlink" href="#eigenvalue-element" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="docutils literal"><span class="pre">&lt;eigenvalue&gt;</span></tt> element indicates that a <img class="math" src="../_images/math/8c325612684d41304b9751c175df7bcc0f61f64f.png" alt="k"/>-eigenvalue calculation
should be performed. It has the following attributes/sub-elements:</p>
<blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">batches:</th><td class="field-body"><p class="first">The total number of batches, where each batch corresponds to multiple
fission source iterations. Batching is done to eliminate correlation between
realizations of random variables.</p>
<p><em>Default</em>: None</p>
</td>
</tr>
<tr class="field"><th class="field-name" colspan="2">generations_per_batch:</th></tr>
<tr><td>&nbsp;</td><td class="field-body"><p class="first">The number of total fission source iterations per batch.</p>
<p><em>Default</em>: 1</p>
</td>
</tr>
<tr class="field"><th class="field-name">inactive:</th><td class="field-body"><p class="first">The number of inactive batches. In general, the starting cycles in a
criticality calculation can not be used to contribute to tallies since the
fission source distribution and eigenvalue are generally not converged
immediately.</p>
<p><em>Default</em>: None</p>
</td>
</tr>
<tr class="field"><th class="field-name">particles:</th><td class="field-body"><p class="first">The number of neutrons to simulate per fission source iteration.</p>
<p class="last"><em>Default</em>: None</p>
</td>
</tr>
</tbody>
</table>
</blockquote>
</div>
<div class="section" id="energy-grid-element">
<h3>3.2.5. <tt class="docutils literal"><span class="pre">&lt;energy_grid&gt;</span></tt> Element<a class="headerlink" href="#energy-grid-element" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="docutils literal"><span class="pre">&lt;energy_grid&gt;</span></tt> element determines the treatment of the energy grid during
a simulation. Setting this element to &#8220;nuclide&#8221; will cause OpenMC to use a
nuclide&#8217;s energy grid when determining what points to interpolate between for
determining cross sections (i.e. non-unionized energy grid). To use a unionized
energy grid, set this element to &#8220;union&#8221;. Note that the unionized energy grid
treatment is slightly different than that employed in Serpent.</p>
<blockquote>
<em>Default</em>: union</blockquote>
</div>
<div class="section" id="entropy-element">
<h3>3.2.6. <tt class="docutils literal"><span class="pre">&lt;entropy&gt;</span></tt> Element<a class="headerlink" href="#entropy-element" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="docutils literal"><span class="pre">&lt;entropy&gt;</span></tt> element describes a mesh that is used for calculating Shannon
entropy. This mesh should cover all possible fissionable materials in the
problem. It has the following attributes/sub-elements:</p>
<blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">dimension:</th><td class="field-body"><p class="first">The number of mesh cells in the x, y, and z directions, respectively.</p>
<dl class="docutils">
<dt><em>Default</em>: If this tag is not present, the number of mesh cells is</dt>
<dd><p class="first last">automatically determined by the code.</p>
</dd>
</dl>
</td>
</tr>
<tr class="field"><th class="field-name">lower_left:</th><td class="field-body"><p class="first">The Cartesian coordinates of the lower-left corner of the mesh.</p>
<p><em>Default</em>: None</p>
</td>
</tr>
<tr class="field"><th class="field-name">upper_right:</th><td class="field-body"><p class="first">The Cartesian coordinates of the upper-right corner of the mesh.</p>
<p class="last"><em>Default</em>: None</p>
</td>
</tr>
</tbody>
</table>
</blockquote>
</div>
<div class="section" id="fixed-source-element">
<h3>3.2.7. <tt class="docutils literal"><span class="pre">&lt;fixed_source&gt;</span></tt> Element<a class="headerlink" href="#fixed-source-element" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="docutils literal"><span class="pre">&lt;fixed_source&gt;</span></tt> element indicates that a fixed source calculation should be
performed. It has the following attributes/sub-elements:</p>
<blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">batches:</th><td class="field-body"><p class="first">The total number of batches. For fixed source calculations, each batch
represents a realization of random variables for tallies.</p>
<p><em>Default</em>: None</p>
</td>
</tr>
<tr class="field"><th class="field-name">particles:</th><td class="field-body"><p class="first">The number of particles to simulate per batch.</p>
<p class="last"><em>Default</em>: None</p>
</td>
</tr>
</tbody>
</table>
</blockquote>
</div>
<div class="section" id="no-reduce-element">
<h3>3.2.8. <tt class="docutils literal"><span class="pre">&lt;no_reduce&gt;</span></tt> Element<a class="headerlink" href="#no-reduce-element" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="docutils literal"><span class="pre">&lt;no_reduce&gt;</span></tt> element has no attributes and has an accepted value of
&#8220;true&#8221; or &#8220;false&#8221;. If set to &#8220;true&#8221;, all user-defined tallies and global tallies
will not be reduced across processors in a parallel calculation. This means that
the accumulate score in one batch on a single processor is considered as an
independent realization for the tally random variable. For a problem with large
tally data, this option can significantly improve the parallel efficiency.</p>
<blockquote>
<em>Default</em>: false</blockquote>
</div>
<div class="section" id="output-element">
<h3>3.2.9. <tt class="docutils literal"><span class="pre">&lt;output&gt;</span></tt> Element<a class="headerlink" href="#output-element" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="docutils literal"><span class="pre">&lt;output&gt;</span></tt> element determines what output files should be written to disk
during the run. This element has no attributes or sub-elements and should be set
to a list of strings separated by spaces. Valid options are &#8220;summary&#8221;,
&#8220;cross-sections&#8221;, and &#8220;tallies&#8221;. For example, if you want the summary and cross
sections summary file to be written, this element should be given as:</p>
<blockquote>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;output&gt;</span>summary cross_sections<span class="nt">&lt;/output&gt;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The tally results will be written to a binary/HDF5 state point file by
default.</p>
</div>
<p><em>Default</em>: &#8220;tallies&#8221;</p>
</blockquote>
</div>
<div class="section" id="ptables-element">
<h3>3.2.10. <tt class="docutils literal"><span class="pre">&lt;ptables&gt;</span></tt> Element<a class="headerlink" href="#ptables-element" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="docutils literal"><span class="pre">&lt;ptables&gt;</span></tt> element determines whether probability tables should be used
in the unresolved resonance range if available. This element has no attributes
or sub-elements and can be set to either &#8220;false&#8221; or &#8220;true&#8221;.</p>
<blockquote>
<em>Default</em>: true</blockquote>
</div>
<div class="section" id="run-cmfd-element">
<h3>3.2.11. <tt class="docutils literal"><span class="pre">&lt;run_cmfd&gt;</span></tt> Element<a class="headerlink" href="#run-cmfd-element" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="docutils literal"><span class="pre">&lt;run_cmfd&gt;</span></tt> element indicates whether or not CMFD acceleration should be
turned on or off. This element has no attributes or sub-elements and can be set
to either &#8220;false&#8221; or &#8220;true&#8221;.</p>
<blockquote>
<em>Defualt</em>: false</blockquote>
</div>
<div class="section" id="seed-element">
<h3>3.2.12. <tt class="docutils literal"><span class="pre">&lt;seed&gt;</span></tt> Element<a class="headerlink" href="#seed-element" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="docutils literal"><span class="pre">seed</span></tt> element is used to set the seed used for the linear congruential
pseudo-random number generator.</p>
<blockquote>
<em>Default</em>: 1</blockquote>
</div>
<div class="section" id="source-element">
<h3>3.2.13. <tt class="docutils literal"><span class="pre">&lt;source&gt;</span></tt> Element<a class="headerlink" href="#source-element" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="docutils literal"><span class="pre">source</span></tt> element gives information on an external source distribution to
be used either as the source for a fixed source calculation or the initial
source guess for criticality calculations. It takes the following
attributes/sub-elements:</p>
<blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">file:</th><td class="field-body"><p class="first">If this attribute is given, it indicates that the source is to be read from
a binary source file whose path is given by the value of this element</p>
<p><em>Default</em>: None</p>
</td>
</tr>
<tr class="field"><th class="field-name">space:</th><td class="field-body"><p class="first">An element specifying the spatial distribution of source sites. This element
has the following attributes:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">type:</th><td class="field-body"><p class="first">The type of spatial distribution. Valid options are &#8220;box&#8221; and &#8220;point&#8221;. A
&#8220;box&#8221; spatial distribution has coordinates sampled uniformly in a
parallelepiped. A &#8220;point&#8221; spatial distribution has coordinates specified
by a triplet.</p>
<p><em>Default</em>: None</p>
</td>
</tr>
<tr class="field"><th class="field-name">parameters:</th><td class="field-body"><p class="first">For a &#8220;box&#8221; spatial distribution, <tt class="docutils literal"><span class="pre">parameters</span></tt> should be given as six
real numbers, the first three of which specify the lower-left corner of a
parallelepiped and the last three of which specify the upper-right
corner. Source sites are sampled uniformly through that parallelepiped.</p>
<p>For a &#8220;point&#8221; spatial distribution, <tt class="docutils literal"><span class="pre">parameters</span></tt> should be given as
three real numbers which specify the (x,y,z) location of an isotropic
point source</p>
<p class="last"><em>Default</em>: None</p>
</td>
</tr>
</tbody>
</table>
</td>
</tr>
<tr class="field"><th class="field-name">angle:</th><td class="field-body"><p class="first">An element specifying the angular distribution of source sites. This element
has the following attributes:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">type:</th><td class="field-body"><p class="first">The type of angular distribution. Valid options are &#8220;isotropic&#8221; and
&#8220;monodirectional&#8221;. The angle of the particle emitted from a source site is
isotropic if the &#8220;isotropic&#8221; option is given. The angle of the particle
emitted from a source site is the direction specified in the &lt;parameters&gt;
attribute if &#8220;monodirectional&#8221; option is given.</p>
<p><em>Default</em>: isotropic</p>
</td>
</tr>
<tr class="field"><th class="field-name">parameters:</th><td class="field-body"><p class="first">For an &#8220;isotropic&#8221; angular distribution, <tt class="docutils literal"><span class="pre">parameters</span></tt> should not be
specified</p>
<p>For a &#8220;monodirectional&#8221; angular distribution, <tt class="docutils literal"><span class="pre">parameters</span></tt> should be
given as three real numbers which specify the angular cosines with respect
to each axis.</p>
<p class="last"><em>Default</em>: None</p>
</td>
</tr>
</tbody>
</table>
</td>
</tr>
<tr class="field"><th class="field-name">energy:</th><td class="field-body"><p class="first">An element specifying the energy distribution of source sites. This element
has the following attributes:</p>
<table class="last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">type:</th><td class="field-body"><p class="first">The type of energy distribution. Valid options are &#8220;monoenergetic&#8221;,
&#8220;watt&#8221;, and &#8220;maxwell&#8221;. The &#8220;monoenergetic&#8221; option produces source sites at
a single energy. The &#8220;watt&#8221; option produces source sites whose energy is
sampled from a Watt fission spectrum. The &#8220;maxwell&#8221; option produce source
sites whose energy is sampled from a Maxwell fission spectrum</p>
<p><em>Default</em>: watt</p>
</td>
</tr>
<tr class="field"><th class="field-name">parameters:</th><td class="field-body"><p class="first">For a &#8220;monoenergetic&#8221; energy distribution, <tt class="docutils literal"><span class="pre">parameters</span></tt> should be
given as the energy in MeV of the source sites.</p>
<p>For a &#8220;watt&#8221; energy distribution, <tt class="docutils literal"><span class="pre">parameters</span></tt> should be given as two
real numbers <img class="math" src="../_images/math/c7d457e388298246adb06c587bccd419ea67f7e8.png" alt="a"/> and <img class="math" src="../_images/math/8136a7ef6a03334a7246df9097e5bcc31ba33fd2.png" alt="b"/> that parameterize the distribution
<img class="math" src="../_images/math/08237a127a96bfc4531a8f04aec0c9811718f4bd.png" alt="p(E) dE = c e^{-E/a} \sinh \sqrt{b \, E} dE"/>.</p>
<p>For a &#8220;maxwell&#8221; energy distribution, <tt class="docutils literal"><span class="pre">parameters</span></tt> should be given as one
real number <img class="math" src="../_images/math/c7d457e388298246adb06c587bccd419ea67f7e8.png" alt="a"/> that parameterizes the distribution <img class="math" src="../_images/math/fa4cf565fe0c2b4c1e2e58d6b7faad24322d11cc.png" alt="p(E) dE =
c E e^{-E/a} dE"/>.</p>
<p class="last"><em>Default</em>: 0.988 2.249</p>
</td>
</tr>
</tbody>
</table>
</td>
</tr>
</tbody>
</table>
</blockquote>
</div>
<div class="section" id="state-point-element">
<h3>3.2.14. <tt class="docutils literal"><span class="pre">&lt;state_point&gt;</span></tt> Element<a class="headerlink" href="#state-point-element" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="docutils literal"><span class="pre">&lt;state_point&gt;</span></tt> element indicates at what batches a state point file
should be written. A state point file can be used to restart a run or to get
tally results at any batch. This element has the following
attributes/sub-elements:</p>
<blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">batches:</th><td class="field-body"><p class="first">A list of integers separated by spaces indicating at what batches a state
point file should be written.</p>
<p><em>Default</em>: Last batch only</p>
</td>
</tr>
<tr class="field"><th class="field-name">interval:</th><td class="field-body"><p class="first">A single integer <img class="math" src="../_images/math/174fadd07fd54c9afe288e96558c92e0c1da733a.png" alt="n"/> indicating that a state point should be written
every <img class="math" src="../_images/math/174fadd07fd54c9afe288e96558c92e0c1da733a.png" alt="n"/> batches. This option can be given in lieu of listing
batches explicitly.</p>
<p><em>Default</em>: None</p>
</td>
</tr>
<tr class="field"><th class="field-name" colspan="2">source_separate:</th></tr>
<tr><td>&nbsp;</td><td class="field-body"><p class="first">If this element is set to &#8220;true&#8221;, a separate binary source file will be
written. Otherwise, the source sites will be written in the state point
directly.</p>
<p><em>Default</em>: false</p>
</td>
</tr>
<tr class="field"><th class="field-name">source_write:</th><td class="field-body"><p class="first">If this element is set to &#8220;false&#8221;, source sites are not written
to the state point file. This can substantially reduce the size of state
points if large numbers of particles per batch are used.</p>
<p class="last"><em>Default</em>: true</p>
</td>
</tr>
</tbody>
</table>
</blockquote>
</div>
<div class="section" id="survival-biasing-element">
<h3>3.2.15. <tt class="docutils literal"><span class="pre">&lt;survival_biasing&gt;</span></tt> Element<a class="headerlink" href="#survival-biasing-element" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="docutils literal"><span class="pre">&lt;survival_biasing&gt;</span></tt> element has no attributes and has an accepted value
of &#8220;true&#8221; or &#8220;false&#8221;. If set to &#8220;true&#8221;, this option will enable the use of
survival biasing, otherwise known as implicit capture or absorption.</p>
<blockquote>
<em>Default</em>: false</blockquote>
</div>
<div class="section" id="trace-element">
<span id="trace"></span><h3>3.2.16. <tt class="docutils literal"><span class="pre">&lt;trace&gt;</span></tt> Element<a class="headerlink" href="#trace-element" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="docutils literal"><span class="pre">&lt;trace&gt;</span></tt> element can be used to print out detailed information about a
single particle during a simulation. This element should be followed by three
integers: the batch number, generation number, and particle number.</p>
<blockquote>
<em>Default</em>: None</blockquote>
</div>
<div class="section" id="uniform-fs-element">
<h3>3.2.17. <tt class="docutils literal"><span class="pre">&lt;uniform_fs&gt;</span></tt> Element<a class="headerlink" href="#uniform-fs-element" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="docutils literal"><span class="pre">&lt;uniform_fs&gt;</span></tt> element describes a mesh that is used for re-weighting
source sites at every generation based on the uniform fission site methodology
described in Kelly et al., &#8220;MC21 Analysis of the Nuclear Energy Agency Monte
Carlo Performance Benchmark Problem,&#8221; Proceedings of <em>Physor 2012</em>, Knoxville,
TN (2012). This mesh should cover all possible fissionable materials in the
problem. It has the following attributes/sub-elements:</p>
<blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">dimension:</th><td class="field-body"><p class="first">The number of mesh cells in the x, y, and z directions, respectively.</p>
<p><em>Default</em>: None</p>
</td>
</tr>
<tr class="field"><th class="field-name">lower_left:</th><td class="field-body"><p class="first">The Cartesian coordinates of the lower-left corner of the mesh.</p>
<p><em>Default</em>: None</p>
</td>
</tr>
<tr class="field"><th class="field-name">upper_right:</th><td class="field-body"><p class="first">The Cartesian coordinates of the upper-right corner of the mesh.</p>
<p class="last"><em>Default</em>: None</p>
</td>
</tr>
</tbody>
</table>
</blockquote>
</div>
<div class="section" id="verbosity-element">
<h3>3.2.18. <tt class="docutils literal"><span class="pre">&lt;verbosity&gt;</span></tt> Element<a class="headerlink" href="#verbosity-element" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="docutils literal"><span class="pre">&lt;verbosity&gt;</span></tt> element tells the code how much information to display to
the standard output. A higher verbosity corresponds to more information being
displayed. This element takes the following attributes:</p>
<blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">value:</th><td class="field-body"><p class="first">The specified verbosity between 1 and 10.</p>
<p class="last"><em>Default</em>: 5</p>
</td>
</tr>
</tbody>
</table>
</blockquote>
</div>
</div>
<div class="section" id="geometry-specification-geometry-xml">
<h2>3.3. Geometry Specification &#8211; geometry.xml<a class="headerlink" href="#geometry-specification-geometry-xml" title="Permalink to this headline">¶</a></h2>
<p>The geometry in OpenMC is described using <a class="reference external" href="http://en.wikipedia.org/wiki/Constructive_solid_geometry">constructive solid geometry</a> (CSG),
also sometimes referred to as combinatorial geometry. CSG allows a user to
create complex objects using Boolean operators on a set of simpler surfaces. In
the geometry model, each unique closed volume in defined by its bounding
surfaces. In OpenMC, most <a class="reference external" href="http://en.wikipedia.org/wiki/Quadric">quadratic surfaces</a> can be modeled and used as
bounding surfaces.</p>
<p>Every geometry.xml must have an XML declaration at the beginning of the file and
a root element named geometry. Within the root element the user can define any
number of cells, surfaces, and lattices. Let us look at the following example:</p>
<div class="highlight-xml"><div class="highlight"><pre><span class="cp">&lt;?xml version=&quot;1.0&quot;?&gt;</span>
<span class="nt">&lt;geometry&gt;</span>
  <span class="c">&lt;!-- This is a comment --&gt;</span>

  <span class="nt">&lt;surface&gt;</span>
    <span class="nt">&lt;id&gt;</span>1<span class="nt">&lt;/id&gt;</span>
    <span class="nt">&lt;type&gt;</span>sphere<span class="nt">&lt;/type&gt;</span>
    <span class="nt">&lt;coeffs&gt;</span>0.0 0.0 0.0 5.0<span class="nt">&lt;/coeffs&gt;</span>
    <span class="nt">&lt;boundary&gt;</span>vacuum<span class="nt">&lt;/boundary&gt;</span>
  <span class="nt">&lt;surface&gt;</span>

  <span class="nt">&lt;cell&gt;</span>
    <span class="nt">&lt;id&gt;</span>1<span class="nt">&lt;/id&gt;</span>
    <span class="nt">&lt;universe&gt;</span>0<span class="nt">&lt;/universe&gt;</span>
    <span class="nt">&lt;material&gt;</span>1<span class="nt">&lt;/material&gt;</span>
    <span class="nt">&lt;surfaces&gt;</span>-1<span class="nt">&lt;/surfaces&gt;</span>
  <span class="nt">&lt;/cell&gt;</span>
<span class="nt">&lt;/geometry&gt;</span>
</pre></div>
</div>
<p>At the beginning of this file is a comment, denoted by a tag starting with
<tt class="docutils literal"><span class="pre">&lt;!--</span></tt> and ending with <tt class="docutils literal"><span class="pre">--&gt;</span></tt>. Comments, as well as any other type of input,
may span multiple lines. One convenient feature of the XML input format is that
sub-elements of the <tt class="docutils literal"><span class="pre">cell</span></tt> and <tt class="docutils literal"><span class="pre">surface</span></tt> elements can also be equivalently
expressed of attributes of the original element, e.g. the geometry file above
could be written as:</p>
<div class="highlight-xml"><div class="highlight"><pre><span class="cp">&lt;?xml version=&quot;1.0&quot;?&gt;</span>
<span class="nt">&lt;geometry&gt;</span>
  <span class="c">&lt;!-- This is a comment --&gt;</span>

  <span class="nt">&lt;surface</span> <span class="na">id=</span><span class="s">&quot;1&quot;</span> <span class="na">type=</span><span class="s">&quot;sphere&quot;</span> <span class="na">coeffs=</span><span class="s">&quot;0.0 0.0 0.0 5.0&quot;</span> <span class="na">boundary=</span><span class="s">&quot;vacuum&quot;</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;cell</span> <span class="na">id=</span><span class="s">&quot;1&quot;</span> <span class="na">universe=</span><span class="s">&quot;0&quot;</span> <span class="na">material=</span><span class="s">&quot;1&quot;</span> <span class="na">surfaces=</span><span class="s">&quot;-1&quot;</span> <span class="nt">/&gt;</span>

<span class="nt">&lt;/geometry&gt;</span>
</pre></div>
</div>
<div class="section" id="surface-element">
<span id="id1"></span><h3>3.3.1. <tt class="docutils literal"><span class="pre">&lt;surface&gt;</span></tt> Element<a class="headerlink" href="#surface-element" title="Permalink to this headline">¶</a></h3>
<p>Each <tt class="docutils literal"><span class="pre">&lt;surface&gt;</span></tt> element can have the following attributes or sub-elements:</p>
<blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">id:</th><td class="field-body"><p class="first">A unique integer that can be used to identify the surface.</p>
<p><em>Default</em>: None</p>
</td>
</tr>
<tr class="field"><th class="field-name">type:</th><td class="field-body"><p class="first">The type of the surfaces. This can be &#8220;x-plane&#8221;, &#8220;y-plane&#8221;, &#8220;z-plane&#8221;,
&#8220;plane&#8221;, &#8220;x-cylinder&#8221;, &#8220;y-cylinder&#8221;, &#8220;z-cylinder&#8221;, or &#8220;sphere&#8221;.</p>
<p><em>Default</em>: None</p>
</td>
</tr>
<tr class="field"><th class="field-name">coeffs:</th><td class="field-body"><p class="first">The corresponding coefficients for the given type of surface. See below for
a list a what coefficients to specify for a given surface</p>
<p><em>Default</em>: None</p>
</td>
</tr>
<tr class="field"><th class="field-name">boundary:</th><td class="field-body"><p class="first">The boundary condition for the surface. This can be &#8220;transmission&#8221;,
&#8220;vacuum&#8221;, or &#8220;reflective&#8221;.</p>
<p class="last"><em>Default</em>: &#8220;transmission&#8221;</p>
</td>
</tr>
</tbody>
</table>
</blockquote>
<p>The following quadratic surfaces can be modeled:</p>
<blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">x-plane:</th><td class="field-body">A plane perpendicular to the x axis, i.e. a surface of the form <img class="math" src="../_images/math/0dab540990e85667cd0415d1805d6e3f65be986a.png" alt="x -
x_0 = 0"/>. The coefficients specified are &#8220;<img class="math" src="../_images/math/17f1249ad95b7682b8316ad21de8ce4ee9fdcf93.png" alt="x_0"/>&#8220;.</td>
</tr>
<tr class="field"><th class="field-name">y-plane:</th><td class="field-body">A plane perpendicular to the y axis, i.e. a surface of the form <img class="math" src="../_images/math/8e5eed2beee65ae37c7422830ed72d18e4571fab.png" alt="y -
y_0 = 0"/>. The coefficients specified are &#8220;<img class="math" src="../_images/math/721e40b7e0ac4359611aebe48cfb63122a347798.png" alt="y_0"/>&#8220;.</td>
</tr>
<tr class="field"><th class="field-name">z-plane:</th><td class="field-body">A plane perpendicular to the z axis, i.e. a surface of the form <img class="math" src="../_images/math/cec8bbf54e84fba9217aeacb3d5e38d415a4ac7c.png" alt="z -
z_0 = 0"/>. The coefficients specified are &#8220;<img class="math" src="../_images/math/bab9abe98679312d2a3308c76188cf2cbc492f68.png" alt="z_0"/>&#8220;.</td>
</tr>
<tr class="field"><th class="field-name">plane:</th><td class="field-body">An arbitrary plane of the form <img class="math" src="../_images/math/eb8661ea00d3e9e10ef23de03755960eec4b554f.png" alt="Ax + By + Cz = D"/>. The coefficients
specified are &#8220;<img class="math" src="../_images/math/5d687cb5bc98aa30d5460e4d0f34feaa8ec52008.png" alt="A \: B \: C \: D"/>&#8220;.</td>
</tr>
<tr class="field"><th class="field-name">x-cylinder:</th><td class="field-body">An infinite cylinder whose length is parallel to the x-axis. This is a
quadratic surface of the form <img class="math" src="../_images/math/c70e001674ec3ce487852ca76aab6d872c634cbf.png" alt="(y - y_0)^2 + (z - z_0)^2 = R^2"/>. The
coefficients specified are &#8220;<img class="math" src="../_images/math/8f0dd3d5d7c73c87564b7aa9d05b3b933a107e6c.png" alt="y_0 \: z_0 \: R"/>&#8220;.</td>
</tr>
<tr class="field"><th class="field-name">y-cylinder:</th><td class="field-body">An infinite cylinder whose length is parallel to the y-axis. This is a
quadratic surface of the form <img class="math" src="../_images/math/883b49d218bf8cf809fae9decb62b4231ecf964f.png" alt="(x - x_0)^2 + (z - z_0)^2 = R^2"/>. The
coefficients specified are &#8220;<img class="math" src="../_images/math/c495d88c348c2f010641c13f26fdd9d841973a6b.png" alt="x_0 \: z_0 \: R"/>&#8220;.</td>
</tr>
<tr class="field"><th class="field-name">z-cylinder:</th><td class="field-body">An infinite cylinder whose length is parallel to the z-axis. This is a
quadratic surface of the form <img class="math" src="../_images/math/9486fcc643d149a10bc21b05ac1e123031f400da.png" alt="(x - x_0)^2 + (y - y_0)^2 = R^2"/>. The
coefficients specified are &#8220;<img class="math" src="../_images/math/d9efe2f18fee6e45486f86bf704b28646bcc2867.png" alt="x_0 \: y_0 \: R"/>&#8220;.</td>
</tr>
<tr class="field"><th class="field-name">sphere:</th><td class="field-body">A sphere of the form <img class="math" src="../_images/math/62a745995df775198e16354b6b1ed9887e88c8a2.png" alt="(x - x_0)^2 + (y - y_0)^2 + (z - z_0)^2 =
R^2"/>. The coefficients specified are &#8220;<img class="math" src="../_images/math/e13d971231512283e81d8480a218782f7d68b585.png" alt="x_0 \: y_0 \: z_0 \: R"/>&#8220;.</td>
</tr>
<tr class="field"><th class="field-name">x-cone:</th><td class="field-body">A cone parallel to the x-axis of the form <img class="math" src="../_images/math/48addcaae47a04de47d2a40f0095c771ec2ce891.png" alt="(y - y_0)^2 + (z - z_0)^2 =
R^2 (x - x_0)^2"/>. The coefficients specified are &#8220;<img class="math" src="../_images/math/0ef6215a44c46c244ccd86bf6aadaa33b87b4e6d.png" alt="x_0 \: y_0 \: z_0
\: R^2"/>&#8220;.</td>
</tr>
<tr class="field"><th class="field-name">y-cone:</th><td class="field-body">A cone parallel to the y-axis of the form <img class="math" src="../_images/math/d939cb7e10ed48f1e43b0dd6c646e423a581ab40.png" alt="(x - x_0)^2 + (z - z_0)^2 =
R^2 (y - y_0)^2"/>. The coefficients specified are &#8220;<img class="math" src="../_images/math/0ef6215a44c46c244ccd86bf6aadaa33b87b4e6d.png" alt="x_0 \: y_0 \: z_0
\: R^2"/>&#8220;.</td>
</tr>
<tr class="field"><th class="field-name">z-cone:</th><td class="field-body">A cone parallel to the x-axis of the form <img class="math" src="../_images/math/2d94d2e3228f1977c395a51961b7184af5514ca7.png" alt="(x - x_0)^2 + (y - y_0)^2 =
R^2 (z - z_0)^2"/>. The coefficients specified are &#8220;<img class="math" src="../_images/math/0ef6215a44c46c244ccd86bf6aadaa33b87b4e6d.png" alt="x_0 \: y_0 \: z_0
\: R^2"/>&#8220;.</td>
</tr>
</tbody>
</table>
</blockquote>
</div>
<div class="section" id="cell-element">
<h3>3.3.2. <tt class="docutils literal"><span class="pre">&lt;cell&gt;</span></tt> Element<a class="headerlink" href="#cell-element" title="Permalink to this headline">¶</a></h3>
<p>Each <tt class="docutils literal"><span class="pre">&lt;cell&gt;</span></tt> element can have the following attributes or sub-elements:</p>
<blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">id:</th><td class="field-body"><p class="first">A unique integer that can be used to identify the surface.</p>
<p><em>Default</em>: None</p>
</td>
</tr>
<tr class="field"><th class="field-name">universe:</th><td class="field-body"><p class="first">The <tt class="docutils literal"><span class="pre">id</span></tt> of the universe that this cell is contained in.</p>
<p><em>Default</em>: 0</p>
</td>
</tr>
<tr class="field"><th class="field-name">fill:</th><td class="field-body"><p class="first">The <tt class="docutils literal"><span class="pre">id</span></tt> of the universe that fills this cell.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If a fill is specified, no material should be given.</p>
</div>
<p><em>Default</em>: None</p>
</td>
</tr>
<tr class="field"><th class="field-name">material:</th><td class="field-body"><p class="first">The <tt class="docutils literal"><span class="pre">id</span></tt> of the material that this cell contains. If the cell should
contain no material, this can also be set to &#8220;void&#8221;.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If a material is specified, no fill should be given.</p>
</div>
<p><em>Default</em>: None</p>
</td>
</tr>
<tr class="field"><th class="field-name">surfaces:</th><td class="field-body"><p class="first">A list of the <tt class="docutils literal"><span class="pre">ids</span></tt> for surfaces that bound this cell, e.g. if the cell
is on the negative side of surface 3 and the positive side of surface 5, the
bounding surfaces would be given as &#8220;-3 5&#8221;.</p>
<p><em>Default</em>: None</p>
</td>
</tr>
<tr class="field"><th class="field-name">rotation:</th><td class="field-body"><p class="first">If the cell is filled with a universe, this element specifies the angles in
degrees about the x, y, and z axes that the filled universe should be
rotated. Should be given as three real numbers. For example, if you wanted
to rotate the filled universe by 90 degrees about the z-axis, the cell
element would look something like:</p>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;cell</span> <span class="na">fill=</span><span class="s">&quot;...&quot;</span> <span class="na">rotation=</span><span class="s">&quot;0 0 90&quot;</span> <span class="nt">/&gt;</span>
</pre></div>
</div>
<p><em>Default</em>: None</p>
</td>
</tr>
<tr class="field"><th class="field-name">translation:</th><td class="field-body"><p class="first">If the cell is filled with a universe, this element specifies a vector that
is used to translate (shift) the universe. Should be given as three real
numbers.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Any translation operation is applied after a rotation, if also
specified.</p>
</div>
<p class="last"><em>Default</em>: None</p>
</td>
</tr>
</tbody>
</table>
</blockquote>
</div>
<div class="section" id="lattice-element">
<h3>3.3.3. <tt class="docutils literal"><span class="pre">&lt;lattice&gt;</span></tt> Element<a class="headerlink" href="#lattice-element" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="docutils literal"><span class="pre">&lt;lattice&gt;</span></tt> can be used to represent repeating structures (e.g. fuel pins
in an assembly) or other geometry which naturally fits into a two-dimensional
structured mesh. Each cell within the lattice is filled with a specified
universe. A <tt class="docutils literal"><span class="pre">&lt;lattice&gt;</span></tt> accepts the following attributes or sub-elements:</p>
<blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">id:</th><td class="field-body"><p class="first">A unique integer that can be used to identify the surface.</p>
</td>
</tr>
<tr class="field"><th class="field-name">type:</th><td class="field-body"><p class="first">A string indicating the arrangement of lattice cells. Currently, the only
accepted option is &#8220;rectangular&#8221;.</p>
<p><em>Default</em>: rectangular</p>
</td>
</tr>
<tr class="field"><th class="field-name">dimension:</th><td class="field-body"><p class="first">Two integers representing the number of lattice cells in the x- and y-
directions, respectively.</p>
<p><em>Default</em>: None</p>
</td>
</tr>
<tr class="field"><th class="field-name">lower_left:</th><td class="field-body"><p class="first">The coordinates of the lower-left corner of the lattice.</p>
<p><em>Default</em>: None</p>
</td>
</tr>
<tr class="field"><th class="field-name">width:</th><td class="field-body"><p class="first">The width of the lattice cell in the x- and y- directions.</p>
<p><em>Default</em>: None</p>
</td>
</tr>
<tr class="field"><th class="field-name">universes:</th><td class="field-body"><p class="first">A list of the universe numbers that fill each cell of the lattice.</p>
<p class="last"><em>Default</em>: None</p>
</td>
</tr>
</tbody>
</table>
</blockquote>
</div>
</div>
<div class="section" id="materials-specification-materials-xml">
<h2>3.4. Materials Specification &#8211; materials.xml<a class="headerlink" href="#materials-specification-materials-xml" title="Permalink to this headline">¶</a></h2>
<div class="section" id="material-element">
<h3>3.4.1. <tt class="docutils literal"><span class="pre">&lt;material&gt;</span></tt> Element<a class="headerlink" href="#material-element" title="Permalink to this headline">¶</a></h3>
<p>Each <tt class="docutils literal"><span class="pre">material</span></tt> element can have the following attributes or sub-elements:</p>
<blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">id:</th><td class="field-body"><p class="first">A unique integer that can be used to identify the material.</p>
</td>
</tr>
<tr class="field"><th class="field-name">density:</th><td class="field-body"><p class="first">An element with attributes/sub-elements called <tt class="docutils literal"><span class="pre">value</span></tt> and <tt class="docutils literal"><span class="pre">units</span></tt>. The
<tt class="docutils literal"><span class="pre">value</span></tt> attribute is the numeric value of the density while the <tt class="docutils literal"><span class="pre">units</span></tt>
can be &#8220;g/cm3&#8221;, &#8220;kg/m3&#8221;, &#8220;atom/b-cm&#8221;, &#8220;atom/cm3&#8221;, or &#8220;sum&#8221;. The &#8220;sum&#8221; unit
indicates that the density should be calculated as the sum of the atom
fractions for each nuclide in the material. This should not be used in
conjunction with weight percents.</p>
<p><em>Default</em>: None</p>
</td>
</tr>
<tr class="field"><th class="field-name">nuclide:</th><td class="field-body"><p class="first">An element with attributes/sub-elements called <tt class="docutils literal"><span class="pre">name</span></tt>, <tt class="docutils literal"><span class="pre">xs</span></tt>, and <tt class="docutils literal"><span class="pre">ao</span></tt>
or <tt class="docutils literal"><span class="pre">wo</span></tt>. The <tt class="docutils literal"><span class="pre">name</span></tt> attribute is the name of the cross-section for a
desired nuclide while the <tt class="docutils literal"><span class="pre">xs</span></tt> attribute is the cross-section
identifier. Finally, the <tt class="docutils literal"><span class="pre">ao</span></tt> and <tt class="docutils literal"><span class="pre">wo</span></tt> attributes specify the atom or
weight percent of that nuclide within the material, respectively. One
example would be as follows:</p>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;nuclide</span> <span class="na">name=</span><span class="s">&quot;H-1&quot;</span> <span class="na">xs=</span><span class="s">&quot;70c&quot;</span> <span class="na">ao=</span><span class="s">&quot;2.0&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;nuclide</span> <span class="na">name=</span><span class="s">&quot;O-16&quot;</span> <span class="na">xs=</span><span class="s">&quot;70c&quot;</span> <span class="na">ao=</span><span class="s">&quot;1.0&quot;</span> <span class="nt">/&gt;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If one nuclide is specified in atom percent, all others must also
be given in atom percent. The same applies for weight percentages.</p>
</div>
<p><em>Default</em>: None</p>
</td>
</tr>
<tr class="field"><th class="field-name">element:</th><td class="field-body"><p class="first">Specifies that a natural element is present in the material. The natural
element is split up into individual isotopes based on IUPAC Isotopic
Compositions of the Elements 1997. This element has attributes/sub-elements
called <tt class="docutils literal"><span class="pre">name</span></tt>, <tt class="docutils literal"><span class="pre">xs</span></tt>, and <tt class="docutils literal"><span class="pre">ao</span></tt>. The <tt class="docutils literal"><span class="pre">name</span></tt> attribute is the atomic
symbol of the element while the <tt class="docutils literal"><span class="pre">xs</span></tt> attribute is the cross-section
identifier. Finally, the <tt class="docutils literal"><span class="pre">ao</span></tt> attribute specifies the atom percent of the
element within the material, respectively. One example would be as follows:</p>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;element</span> <span class="na">name=</span><span class="s">&quot;Al&quot;</span> <span class="na">ao=</span><span class="s">&quot;8.7115e-03&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;element</span> <span class="na">name=</span><span class="s">&quot;Mg&quot;</span> <span class="na">ao=</span><span class="s">&quot;1.5498e-04&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;element</span> <span class="na">name=</span><span class="s">&quot;Mn&quot;</span> <span class="na">ao=</span><span class="s">&quot;2.7426e-05&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;element</span> <span class="na">name=</span><span class="s">&quot;Cu&quot;</span> <span class="na">ao=</span><span class="s">&quot;1.6993e-04&quot;</span> <span class="nt">/&gt;</span>
</pre></div>
</div>
<p><em>Default</em>: None</p>
</td>
</tr>
<tr class="field"><th class="field-name">sab:</th><td class="field-body"><p class="first">Associates an S(a,b) table with the material. This element has
attributes/sub-elements called <tt class="docutils literal"><span class="pre">name</span></tt> and <tt class="docutils literal"><span class="pre">xs</span></tt>. The <tt class="docutils literal"><span class="pre">name</span></tt> attribute
is the name of the S(a,b) table that should be associated with the material,
and <tt class="docutils literal"><span class="pre">xs</span></tt> is the cross-section identifier for the table.</p>
<p class="last"><em>Default</em>: None</p>
</td>
</tr>
</tbody>
</table>
</blockquote>
</div>
<div class="section" id="default-xs-element">
<h3>3.4.2. <tt class="docutils literal"><span class="pre">&lt;default_xs&gt;</span></tt> Element<a class="headerlink" href="#default-xs-element" title="Permalink to this headline">¶</a></h3>
<p>In some circumstances, the cross-section identifier may be the same for many or
all nuclides in a given problem. In this case, rather than specifying the
<tt class="docutils literal"><span class="pre">xs=...</span></tt> attribute on every nuclide, a <tt class="docutils literal"><span class="pre">&lt;default_xs&gt;</span></tt> element can be used to
set the default cross-section identifier for any nuclide without an identifier
explicitly listed. This element has no attributes and accepts a 3-letter string
that indicates the default cross-section identifier, e.g. &#8220;70c&#8221;.</p>
<blockquote>
<em>Default</em>: None</blockquote>
</div>
</div>
<div class="section" id="tallies-specification-tallies-xml">
<h2>3.5. Tallies Specification &#8211; tallies.xml<a class="headerlink" href="#tallies-specification-tallies-xml" title="Permalink to this headline">¶</a></h2>
<p>The tallies.xml file allows the user to tell the code what results he/she is
interested in, e.g. the fission rate in a given cell or the current across a
given surface. There are two pieces of information that determine what
quantities should be scored. First, one needs to specify what region of phase
space should count towards the tally and secondly, the actual quantity to be
scored also needs to be specified. The first set of parameters we call <em>filters</em>
since they effectively serve to filter events, allowing some to score and
preventing others from scoring to the tally.</p>
<p>The structure of tallies in OpenMC is flexible in that any combination of
filters can be used for a tally. The following types of filter are available:
cell, universe, material, surface, birth region, pre-collision energy,
post-collision energy, and an arbitrary structured mesh.</p>
<p>The three valid elements in the tallies.xml file are <tt class="docutils literal"><span class="pre">&lt;tally&gt;</span></tt>, <tt class="docutils literal"><span class="pre">&lt;mesh&gt;</span></tt>,
and <tt class="docutils literal"><span class="pre">&lt;assume_separate&gt;</span></tt>.</p>
<div class="section" id="tally-element">
<h3>3.5.1. <tt class="docutils literal"><span class="pre">&lt;tally&gt;</span></tt> Element<a class="headerlink" href="#tally-element" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="docutils literal"><span class="pre">&lt;tally&gt;</span></tt> element accepts the following sub-elements:</p>
<blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">label:</th><td class="field-body"><p class="first">This is an optional sub-element specifying the name of this tally to be used
for output purposes. This string is limited to 52 characters for formatting
purposes.</p>
</td>
</tr>
<tr class="field"><th class="field-name">filter:</th><td class="field-body"><p class="first">Specify a filter that restricts contributions to the tally to particles
within certain regions of phase space. This element and its
attributes/sub-elements are described below.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You may specify zero, one, or multiple filters to apply to the tally. To
specify multiple filters, you must use multiple <tt class="docutils literal"><span class="pre">&lt;filter&gt;</span></tt> elements.</p>
</div>
<p>The <tt class="docutils literal"><span class="pre">filter</span></tt> element has the following attributes/sub-elements:</p>
<blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">type:</th><td class="field-body"><p class="first">The type of the filter. Accepted options are &#8220;cell&#8221;, &#8220;cellborn&#8221;, &#8220;material&#8221;,
&#8220;universe&#8221;, &#8220;energy&#8221;, &#8220;energyout&#8221;, and &#8220;mesh&#8221;.</p>
</td>
</tr>
<tr class="field"><th class="field-name">bins:</th><td class="field-body"><p class="first">For each filter type, the corresponding <tt class="docutils literal"><span class="pre">bins</span></tt> entry is given as follows:</p>
<table class="last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">cell:</th><td class="field-body">A list of cells in which the tally should be accumulated.</td>
</tr>
<tr class="field"><th class="field-name">cellborn:</th><td class="field-body">This filter allows the tally to be scored to only when particles were
originally born in a specified cell.</td>
</tr>
<tr class="field"><th class="field-name">surface:</th><td class="field-body">A list of surfaces for which the tally should be accumulated.</td>
</tr>
<tr class="field"><th class="field-name">material:</th><td class="field-body">A list of materials for which the tally should be accumulated.</td>
</tr>
<tr class="field"><th class="field-name">universe:</th><td class="field-body">A list of universes for which the tally should be accumulated.</td>
</tr>
<tr class="field"><th class="field-name">energy:</th><td class="field-body">A monotonically increasing list of bounding <strong>pre-collision</strong> energies
for a number of groups. For example, if this filter is specified as
<tt class="docutils literal"><span class="pre">&lt;filter</span> <span class="pre">type=&quot;energy&quot;</span> <span class="pre">bins=&quot;0.0</span> <span class="pre">1.0</span> <span class="pre">20.0&quot;</span> <span class="pre">/&gt;</span></tt>, then two energy bins
will be created, one with energies between 0 and 1 MeV and the other
with energies between 1 and 20 MeV.</td>
</tr>
<tr class="field"><th class="field-name">energyout:</th><td class="field-body">A monotonically increasing list of bounding <strong>post-collision</strong>
energies for a number of groups. For example, if this filter is
specified as <tt class="docutils literal"><span class="pre">&lt;filter</span> <span class="pre">type=&quot;energyout&quot;</span> <span class="pre">bins=&quot;0.0</span> <span class="pre">1.0</span> <span class="pre">20.0&quot;</span> <span class="pre">/&gt;</span></tt>, then
two post-collision energy bins will be created, one with energies
between 0 and 1 MeV and the other with energies between 1 and 20 MeV.</td>
</tr>
<tr class="field"><th class="field-name">mesh:</th><td class="field-body">The <tt class="docutils literal"><span class="pre">id</span></tt> of a structured mesh to be tallied over.</td>
</tr>
</tbody>
</table>
</td>
</tr>
</tbody>
</table>
</blockquote>
</td>
</tr>
<tr class="field"><th class="field-name">nuclides:</th><td class="field-body"><p class="first">If specified, the scores listed will be for particular nuclides, not the
summation of reactions from all nuclides. The format for nuclides should be
[Atomic symbol]-[Mass number], e.g. &#8220;U-235&#8221;. The reaction rate for all
nuclides can be obtained with &#8220;total&#8221;. For example, to obtain the reaction
rates for U-235, Pu-239, and all nuclides in a material, this element should
be:</p>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;nuclides&gt;</span>U-235 Pu-239 total<span class="nt">&lt;/nuclides&gt;</span>
</pre></div>
</div>
<p><em>Default</em>: total</p>
</td>
</tr>
<tr class="field"><th class="field-name">scores:</th><td class="field-body"><p class="first">A space-separated list of the desired responses to be accumulated. Accepted
options are &#8220;flux&#8221;, &#8220;total&#8221;, &#8220;scatter&#8221;, &#8220;nu-scatter&#8221;, &#8220;scatter-N&#8221;,
&#8220;scatter-PN&#8221;, &#8220;absorption&#8221;, &#8220;fission&#8221;, &#8220;nu-fission&#8221;, &#8220;kappa-fission&#8221;,
&#8220;current&#8221;, and &#8220;events&#8221;. These corresponding to the following physical
quantities.</p>
<table class="last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">flux:</th><td class="field-body"><p class="first">Total flux</p>
</td>
</tr>
<tr class="field"><th class="field-name">total:</th><td class="field-body"><p class="first">Total reaction rate</p>
</td>
</tr>
<tr class="field"><th class="field-name">scatter:</th><td class="field-body"><p class="first">Total scattering rate. Can also be identified with the <tt class="docutils literal"><span class="pre">scatter-0</span></tt>
response type.</p>
</td>
</tr>
<tr class="field"><th class="field-name">nu-scatter:</th><td class="field-body"><p class="first">Total production of neutrons due to scattering. This accounts for
multiplicity from (n,2n), (n,3n), and (n,4n) reactions and should be
slightly higher than the scattering rate.</p>
</td>
</tr>
<tr class="field"><th class="field-name">scatter-N:</th><td class="field-body"><p class="first">Tally the N<sup>th</sup> scattering moment, where N is the Legendre
expansion order.  N must be between 0 and 10. As an example, tallying the
2<sup>nd</sup> scattering moment would be specified as <tt class="docutils literal"><span class="pre">&lt;scores&gt;</span>
<span class="pre">scatter-2</span> <span class="pre">&lt;/scores&gt;</span></tt>.</p>
</td>
</tr>
<tr class="field"><th class="field-name">scatter-PN:</th><td class="field-body"><p class="first">Tally all of the scattering moments from order 0 to N, where N is the
Legendre expansion order.  That is, <tt class="docutils literal"><span class="pre">scatter-P1</span></tt> is equivalent to
requesting tallies of <tt class="docutils literal"><span class="pre">scatter-0</span></tt> and <tt class="docutils literal"><span class="pre">scatter-1</span></tt>.  N must be between
0 and 10. As an example, tallying up to the 2<sup>nd</sup> scattering
moment would be specified as <tt class="docutils literal"><span class="pre">&lt;scores&gt;</span> <span class="pre">scatter-P2</span> <span class="pre">&lt;/scores&gt;</span></tt>.</p>
</td>
</tr>
<tr class="field"><th class="field-name">absorption:</th><td class="field-body"><p class="first">Total absorption rate. This accounts for all reactions which do not
produce secondary neutrons.</p>
</td>
</tr>
<tr class="field"><th class="field-name">fission:</th><td class="field-body"><p class="first">Total fission rate</p>
</td>
</tr>
<tr class="field"><th class="field-name">nu-fission:</th><td class="field-body"><p class="first">Total production of neutrons due to fission</p>
</td>
</tr>
<tr class="field"><th class="field-name">kappa-fission:</th><td class="field-body"><p class="first">The recoverable energy production rate due to fission. The recoverable
energy is defined as the fission product kinetic energy, prompt and
delayed neutron kinetic energies, prompt and delayed <img class="math" src="../_images/math/66981fa3920210c6ad8dbe5e968783d5dd7520c3.png" alt="\gamma"/>-ray
total energies, and the total energy released by the delayed <img class="math" src="../_images/math/fdb63b9e51abe6bbb16acfb5d7b773ddbb5bf4a8.png" alt="\beta"/>
particles. The neutrino energy does not contribute to this response. The
prompt and delayed <img class="math" src="../_images/math/66981fa3920210c6ad8dbe5e968783d5dd7520c3.png" alt="\gamma"/>-rays are assumed to deposit their energy
locally.</p>
</td>
</tr>
<tr class="field"><th class="field-name">current:</th><td class="field-body"><p class="first">Partial currents on the boundaries of each cell in a mesh.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This score can only be used if a mesh filter has been
specified. Furthermore, it may not be used in conjunction with any
other score.</p>
</div>
</td>
</tr>
<tr class="field"><th class="field-name">events:</th><td class="field-body"><p class="first last">Number of scoring events</p>
</td>
</tr>
</tbody>
</table>
</td>
</tr>
</tbody>
</table>
</blockquote>
</div>
<div class="section" id="mesh-element">
<h3>3.5.2. <tt class="docutils literal"><span class="pre">&lt;mesh&gt;</span></tt> Element<a class="headerlink" href="#mesh-element" title="Permalink to this headline">¶</a></h3>
<p>If a structured mesh is desired as a filter for a tally, it must be specified in
a separate element with the tag name <tt class="docutils literal"><span class="pre">&lt;mesh&gt;</span></tt>. This element has the following
attributes/sub-elements:</p>
<blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">type:</th><td class="field-body">The type of structured mesh. Valid options include &#8220;rectangular&#8221; and
&#8220;hexagonal&#8221;.</td>
</tr>
<tr class="field"><th class="field-name">dimension:</th><td class="field-body">The number of mesh cells in each direction.</td>
</tr>
<tr class="field"><th class="field-name">lower_left:</th><td class="field-body">The lower-left corner of the structured mesh. If only two coordinates are
given, it is assumed that the mesh is an x-y mesh.</td>
</tr>
<tr class="field"><th class="field-name">upper_right:</th><td class="field-body">The upper-right corner of the structured mesh. If only two coordinates are
given, it is assumed that the mesh is an x-y mesh.</td>
</tr>
<tr class="field"><th class="field-name">width:</th><td class="field-body">The width of mesh cells in each direction.</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">One of <tt class="docutils literal"><span class="pre">&lt;upper_right&gt;</span></tt> or <tt class="docutils literal"><span class="pre">&lt;width&gt;</span></tt> must be specified, but not both
(even if they are consistent with one another).</p>
</div>
</blockquote>
</div>
<div class="section" id="assume-separate-element">
<h3>3.5.3. <tt class="docutils literal"><span class="pre">&lt;assume_separate&gt;</span></tt> Element<a class="headerlink" href="#assume-separate-element" title="Permalink to this headline">¶</a></h3>
<p>In cases where the user needs to specify many different tallies each of which
are spatially separate, this tag can be used to cut down on some of the tally
overhead. The effect of assuming all tallies are spatially separate is that once
one tally is scored to, the same event is assumed not to score to any other
tallies. This element should be followed by &#8220;true&#8221; or &#8220;false&#8221;.</p>
<blockquote>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">If used incorrectly, the assumption that all tallies are spatially
separate can lead to incorrect results.</p>
</div>
<p><em>Default</em>: false</p>
</blockquote>
</div>
</div>
<div class="section" id="geometry-plotting-specification-plots-xml">
<span id="usersguide-plotting"></span><h2>3.6. Geometry Plotting Specification &#8211; plots.xml<a class="headerlink" href="#geometry-plotting-specification-plots-xml" title="Permalink to this headline">¶</a></h2>
<p>Basic plotting capabilities are available in OpenMC by creating a plots.xml
file and subsequently running with the command-line flag <tt class="docutils literal"><span class="pre">-plot</span></tt>. The root
element of the plots.xml is simply <tt class="docutils literal"><span class="pre">&lt;plots&gt;</span></tt> and any number output plots can
be defined with <tt class="docutils literal"><span class="pre">&lt;plot&gt;</span></tt> sub-elements.  Two plot types are currently
implemented in openMC:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">slice</span></tt>  2D pixel plot along one of the major axes. Produces a PPM image file.</li>
<li><tt class="docutils literal"><span class="pre">voxel</span></tt>  3D voxel data dump. Produces a binary file containing voxel xyz position and cell or material id.</li>
</ul>
<div class="section" id="plot-element">
<h3>3.6.1. <tt class="docutils literal"><span class="pre">&lt;plot&gt;</span></tt> Element<a class="headerlink" href="#plot-element" title="Permalink to this headline">¶</a></h3>
<p>Each plot must contain a combination of the following attributes or
sub-elements:</p>
<blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">id:</th><td class="field-body"><p class="first">The unique <tt class="docutils literal"><span class="pre">id</span></tt> of the plot.</p>
<p><em>Default</em>: None - Required entry</p>
</td>
</tr>
<tr class="field"><th class="field-name">filename:</th><td class="field-body"><p class="first">Filename for the output plot file.</p>
<p><em>Default</em>: &#8220;plot&#8221;</p>
</td>
</tr>
<tr class="field"><th class="field-name">color:</th><td class="field-body"><p class="first">Keyword for plot coloring.  This can only be either <tt class="docutils literal"><span class="pre">cell</span></tt> or <tt class="docutils literal"><span class="pre">mat</span></tt>,
which colors regions by cells and materials, respectively. For voxel plots,
this determines which id (cell or material) is associated with each
position.</p>
<p><em>Default</em>: <tt class="docutils literal"><span class="pre">cell</span></tt></p>
</td>
</tr>
<tr class="field"><th class="field-name">origin:</th><td class="field-body"><p class="first">Specifies the (x,y,z) coordinate of the center of the plot.  Should be three
floats separated by spaces.</p>
<p><em>Default</em>: None - Required entry</p>
</td>
</tr>
<tr class="field"><th class="field-name">width:</th><td class="field-body"><p class="first">Specifies the width of the plot along each of the basis directions.  Should
be two or three floats separated by spaces for 2D plots and 3D plots,
respectively.</p>
<p><em>Default</em>: None - Required entry</p>
</td>
</tr>
<tr class="field"><th class="field-name">type:</th><td class="field-body"><p class="first">Keyword for type of plot to be produced. Currently only &#8220;slice&#8221; and
&#8220;voxel&#8221; plots are implemented. The &#8220;slice&#8221; plot type creates 2D pixel
maps saved in the PPM file format. PPM files can be displayed in most
viewers (e.g. the default Gnome viewer, IrfanView, etc.).  The &#8220;voxel&#8221;
plot type produces a binary datafile containing voxel grid positioning and
the cell or material (specified by the <tt class="docutils literal"><span class="pre">color</span></tt> tag) at the center of each
voxel. These datafiles can be processed into 3D SILO files using the
<tt class="docutils literal"><span class="pre">voxel.py</span></tt> utility provided with the OpenMC source, and subsequently
viewed with a 3D viewer such as VISIT or Paraview. See the
<a class="reference internal" href="../devguide/voxel.html#devguide-voxel"><em>Voxel Plot Binary File Specifications</em></a> for information about the datafile structure.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Since the PPM format is saved without any kind of compression,
the resulting file sizes can be quite large.  Saving the image in
the PNG format can often times reduce the file size by orders of
magnitude without any loss of image quality. Likewise,
high-resolution voxel files produced by OpenMC can be quite large,
but the equivalent SILO files will by significantly smaller.</p>
</div>
<p class="last"><em>Default</em>: &#8220;slice&#8221;</p>
</td>
</tr>
</tbody>
</table>
</blockquote>
<p><tt class="docutils literal"><span class="pre">&lt;plot&gt;</span></tt> elements of <tt class="docutils literal"><span class="pre">type</span></tt> &#8220;slice&#8221; and &#8220;voxel&#8221; must contain the <tt class="docutils literal"><span class="pre">pixels</span></tt>
attribute or sub-element:</p>
<blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">pixels:</th><td class="field-body"><p class="first">Specifies the number of pixes or voxels to be used along each of the basis
directions for &#8220;slice&#8221; and &#8220;voxel&#8221; plots, respectively. Should be two or
three integers separated by spaces.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">The <tt class="docutils literal"><span class="pre">pixels</span></tt> input determines the output file size.  For the
PPM format, 10 million pixels will result in a file just under
30 MB in size. A 10 million voxel binary file will be around
40 MB.</p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">If the aspect ratio defined in <tt class="docutils literal"><span class="pre">pixels</span></tt> does not match the
aspect ratio defined in <tt class="docutils literal"><span class="pre">width</span></tt> the plot may appear stretched
or squeezed.</p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Geometry features along a basis direction smaller than
<tt class="docutils literal"><span class="pre">width</span></tt>/<tt class="docutils literal"><span class="pre">pixels</span></tt> along that basis direction may not appear
in the plot.</p>
</div>
<p class="last"><em>Default</em>: None - Required entry for &#8220;slice&#8221; and &#8220;voxel&#8221; plots</p>
</td>
</tr>
</tbody>
</table>
</blockquote>
<p><tt class="docutils literal"><span class="pre">&lt;plot&gt;</span></tt> elements of <tt class="docutils literal"><span class="pre">type</span></tt> &#8220;slice&#8221; can also contain the following
attributes or sub-elements.  These are not used in &#8220;voxel&#8221; plots:</p>
<blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">basis:</th><td class="field-body"><p class="first">Keyword specifying the plane of the plot for &#8220;slice&#8221; type plots.  Can be
one of: &#8220;xy&#8221;, &#8220;xz&#8221;, &#8220;yz&#8221;.</p>
<p><em>Default</em>: &#8220;xy&#8221;</p>
</td>
</tr>
<tr class="field"><th class="field-name">background:</th><td class="field-body"><p class="first">Specifies the RGB color of the regions where no OpenMC cell can be found.
Should be three integers separated by spaces.</p>
<p><em>Default</em>: 0 0 0 (white)</p>
</td>
</tr>
<tr class="field"><th class="field-name">col_spec:</th><td class="field-body"><p class="first">Any number of this optional tag may be included in each <tt class="docutils literal"><span class="pre">&lt;plot&gt;</span></tt> element,
which can override the default random colors for cells or materials. Each
<tt class="docutils literal"><span class="pre">col_spec</span></tt> element must contain <tt class="docutils literal"><span class="pre">id</span></tt> and <tt class="docutils literal"><span class="pre">rgb</span></tt> sub-elements.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">id:</th><td class="field-body">Specifies the cell or material unique id for the color specification.</td>
</tr>
<tr class="field"><th class="field-name">rgb:</th><td class="field-body">Specifies the custom color for the cell or material. Should be 3 integers
separated by spaces.</td>
</tr>
</tbody>
</table>
<p>As an example, if your plot is colored by material and you want material 23
to be blue, the corresponding <tt class="docutils literal"><span class="pre">col_spec</span></tt> element would look like:</p>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;col_spec</span> <span class="na">id=</span><span class="s">&quot;23&quot;</span> <span class="na">rgb=</span><span class="s">&quot;0 0 255&quot;</span> <span class="nt">/&gt;</span>
</pre></div>
</div>
<p><em>Default</em>: None</p>
</td>
</tr>
<tr class="field"><th class="field-name">mask:</th><td class="field-body"><p class="first">The special <tt class="docutils literal"><span class="pre">mask</span></tt> sub-element allows for the selective plotting of <em>only</em>
user-specified cells or materials. Only one <tt class="docutils literal"><span class="pre">mask</span></tt> element is allowed per
<tt class="docutils literal"><span class="pre">plot</span></tt> element, and it must contain as attributes or sub-elements a
background masking color and a list of cells or materials to plot:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">components:</th><td class="field-body">List of unique <tt class="docutils literal"><span class="pre">id</span></tt> numbers of the cells or materials to plot. Should be
any number of integers separated by spaces.</td>
</tr>
<tr class="field"><th class="field-name">background:</th><td class="field-body">Color to apply to all cells or materials not in the <tt class="docutils literal"><span class="pre">components</span></tt> list of
cells or materials to plot. This overrides any <tt class="docutils literal"><span class="pre">col_spec</span></tt> color
specifications.</td>
</tr>
</tbody>
</table>
<p class="last"><em>Default</em>: None</p>
</td>
</tr>
</tbody>
</table>
</blockquote>
</div>
</div>
<div class="section" id="cmfd-specification-cmfd-xml">
<h2>3.7. CMFD Specification &#8211; cmfd.xml<a class="headerlink" href="#cmfd-specification-cmfd-xml" title="Permalink to this headline">¶</a></h2>
<p>Coarse mesh finite difference acceleration method has been implemented in OpenMC.
Currently, it allows users to accelerate fission source convergence during
inactive neutron batches. To run CMFD, the <tt class="docutils literal"><span class="pre">&lt;run_cmfd&gt;</span></tt> element in
<tt class="docutils literal"><span class="pre">settings.xml</span></tt> should be set to &#8220;true&#8221;.</p>
<div class="section" id="active-flush-element">
<h3>3.7.1. <tt class="docutils literal"><span class="pre">&lt;active_flush&gt;</span></tt> Element<a class="headerlink" href="#active-flush-element" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="docutils literal"><span class="pre">&lt;active_flush&gt;</span></tt> element controls the batch where CMFD tallies should be
reset. CMFD tallies should be reset before active batches so they are accumulated
without bias.</p>
<blockquote>
<em>Default</em>: 0</blockquote>
</div>
<div class="section" id="begin-element">
<h3>3.7.2. <tt class="docutils literal"><span class="pre">&lt;begin&gt;</span></tt> Element<a class="headerlink" href="#begin-element" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="docutils literal"><span class="pre">&lt;begin&gt;</span></tt> element controls what batch CMFD calculations should begin.</p>
<blockquote>
<em>Default</em>: 1</blockquote>
</div>
<div class="section" id="feedback-element">
<h3>3.7.3. <tt class="docutils literal"><span class="pre">&lt;feedback&gt;</span></tt> Element<a class="headerlink" href="#feedback-element" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="docutils literal"><span class="pre">&lt;feedback&gt;</span></tt> element controls whether or not the CMFD diffusion result is
used to adjust the weight of fission source neutrons on the next OpenMC batch.
It can be turned on with &#8220;true&#8221; and off with &#8220;false&#8221;.</p>
<blockquote>
<em>Default</em>: false</blockquote>
</div>
<div class="section" id="inactive-element">
<h3>3.7.4. <tt class="docutils literal"><span class="pre">&lt;inactive&gt;</span></tt> Element<a class="headerlink" href="#inactive-element" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="docutils literal"><span class="pre">&lt;inactive&gt;</span></tt> element controls if cmfd tallies should be accumulated
during inactive batches. For some applications, CMFD tallies may not be
needed until the start of active batches. This option can be turned on
with &#8220;true&#8221; and off with &#8220;false&#8221;</p>
<blockquote>
<em>Default</em>: true</blockquote>
</div>
<div class="section" id="keff-tol-element">
<h3>3.7.5. <tt class="docutils literal"><span class="pre">&lt;keff_tol&gt;</span></tt> Element<a class="headerlink" href="#keff-tol-element" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="docutils literal"><span class="pre">&lt;keff_tol&gt;</span></tt> element specifies acceptance criteria of a CMFD eigenvalue.
If the CMFD eigenvalue and OpenMC batch eigenvalue are within this tolerance,
CMFD is allowed to modify source neutron weights.</p>
<blockquote>
<em>Default</em>: 0.005</blockquote>
</div>
<div class="section" id="ksp-monitor-element">
<h3>3.7.6. <tt class="docutils literal"><span class="pre">&lt;ksp_monitor&gt;</span></tt> Element<a class="headerlink" href="#ksp-monitor-element" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="docutils literal"><span class="pre">&lt;ksp_monitor&gt;</span></tt> element is used to view the convergence of linear GMRES
iterations in PETSc. This option can be turned on with &#8220;true&#8221; and turned off
with &#8220;false&#8221;.</p>
<blockquote>
<em>Default</em>: false</blockquote>
</div>
<div class="section" id="id2">
<h3>3.7.7. <tt class="docutils literal"><span class="pre">&lt;mesh&gt;</span></tt> Element<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<p>If a structured mesh is desired as a filter for a tally, it must be specified in
a separate element with the tag name <tt class="docutils literal"><span class="pre">&lt;mesh&gt;</span></tt>. This element has the following
attributes/sub-elements:</p>
<blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">type:</th><td class="field-body"><p class="first">The type of structured mesh. Only &#8220;rectangular&#8221; is currently supported.</p>
</td>
</tr>
<tr class="field"><th class="field-name">lower_left:</th><td class="field-body"><p class="first">The lower-left corner of the structured mesh. If only two coordinate are
given, it is assumed that the mesh is an x-y mesh.</p>
</td>
</tr>
<tr class="field"><th class="field-name">upper_right:</th><td class="field-body"><p class="first">The upper-right corner of the structrued mesh. If only two coordinate are
given, it is assumed that the mesh is an x-y mesh.</p>
</td>
</tr>
<tr class="field"><th class="field-name">dimension:</th><td class="field-body"><p class="first">The number of mesh cells in each direction.</p>
</td>
</tr>
<tr class="field"><th class="field-name">width:</th><td class="field-body"><p class="first">The width of mesh cells in each direction.</p>
</td>
</tr>
<tr class="field"><th class="field-name">energy:</th><td class="field-body"><p class="first">Energy bins [in MeV], listed in ascending order (e.g. 0.0 0.625e-7 20.0)
for CMFD tallies and acceleration. If no energy bins are listed, OpenMC
automatically assumes a one energy group calculation over the entire
energy range.</p>
</td>
</tr>
<tr class="field"><th class="field-name">albedo:</th><td class="field-body"><p class="first">Surface ratio of incoming to outgoing partial currents on global boundary
conditions. They are listed in the following order: -x +x -y +y -z +z.</p>
<p><em>Default</em>: 1.0 1.0 1.0 1.0 1.0 1.0</p>
</td>
</tr>
<tr class="field"><th class="field-name">map:</th><td class="field-body"><p class="first">An optional acceleration map can be specified to overlay on the coarse
mesh spatial grid. If this option is used a <tt class="docutils literal"><span class="pre">1</span></tt> is used for a
non-accelerated region and a <tt class="docutils literal"><span class="pre">2</span></tt> is used for an accelerated region.
For a simple 4x4 coarse mesh with a 2x2 fuel lattice surrounded by
reflector, the map is:</p>
<blockquote>
<p><tt class="docutils literal"><span class="pre">1</span> <span class="pre">1</span> <span class="pre">1</span> <span class="pre">1</span></tt></p>
<p><tt class="docutils literal"><span class="pre">1</span> <span class="pre">2</span> <span class="pre">2</span> <span class="pre">1</span></tt></p>
<p><tt class="docutils literal"><span class="pre">1</span> <span class="pre">2</span> <span class="pre">2</span> <span class="pre">1</span></tt></p>
<p><tt class="docutils literal"><span class="pre">1</span> <span class="pre">1</span> <span class="pre">1</span> <span class="pre">1</span></tt></p>
</blockquote>
<p>Therefore a 2x2 system of equations is solved rather than a 4x4. This
is extremely important to use in reflectors as neutrons will not
contribute to any tallies far away from fission source neutron regions.
A <tt class="docutils literal"><span class="pre">2</span></tt> must be used to identify any fission source region.</p>
<div class="last admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Only two of the following three sub-elements are needed:
<tt class="docutils literal"><span class="pre">lower_left</span></tt>, <tt class="docutils literal"><span class="pre">upper_right</span></tt> and <tt class="docutils literal"><span class="pre">width</span></tt>. Any combination
of two of these will yield the third.</p>
</div>
</td>
</tr>
</tbody>
</table>
</blockquote>
</div>
<div class="section" id="norm-element">
<h3>3.7.8. <tt class="docutils literal"><span class="pre">&lt;norm&gt;</span></tt> Element<a class="headerlink" href="#norm-element" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="docutils literal"><span class="pre">&lt;norm&gt;</span></tt> element is used to normalize the CMFD fission source distribution
to a particular value. For example, if a fission source is calculated for a
17 x 17 lattice of pins, the fission source may be normalized to the number of
fission source regions, in this case 289. This is useful when visualizing this
distribution as the average peaking factor will be unity. This parameter will
not impact the calculation.</p>
<blockquote>
<em>Default</em>: 1.0</blockquote>
</div>
<div class="section" id="n-procs-cmfd-element">
<h3>3.7.9. <tt class="docutils literal"><span class="pre">&lt;n_procs_cmfd&gt;</span></tt> Element<a class="headerlink" href="#n-procs-cmfd-element" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="docutils literal"><span class="pre">&lt;n_procs_cmfd&gt;</span></tt> element is used to set the number of processors used
for CMFD calculation. It should be less than or equal to the number of
processors used during OpenMC.</p>
<blockquote>
<em>Default</em>: 1</blockquote>
</div>
<div class="section" id="power-monitor-element">
<h3>3.7.10. <tt class="docutils literal"><span class="pre">&lt;power_monitor&gt;</span></tt> Element<a class="headerlink" href="#power-monitor-element" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="docutils literal"><span class="pre">&lt;power_monitor&gt;</span></tt> element is used to view the convergence of power iteration.
This option can be turned on with &#8220;true&#8221; and turned off with &#8220;false&#8221;.</p>
<blockquote>
<em>Default</em>: false</blockquote>
</div>
<div class="section" id="write-balance-element">
<h3>3.7.11. <tt class="docutils literal"><span class="pre">&lt;write_balance&gt;</span></tt> Element<a class="headerlink" href="#write-balance-element" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="docutils literal"><span class="pre">&lt;write_balance&gt;</span></tt> element is used to view the balance of OpenMC tally
residuals for every coarse mesh region and energy group. This option can be
turned on with &#8220;true&#8221; and off with &#8220;false&#8221;.</p>
<blockquote>
<em>Default</em>: false</blockquote>
</div>
<div class="section" id="write-hdf5-element">
<h3>3.7.12. <tt class="docutils literal"><span class="pre">&lt;write_hdf5&gt;</span></tt> Element<a class="headerlink" href="#write-hdf5-element" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="docutils literal"><span class="pre">&lt;write_hdf5&gt;</span></tt> element can be turned on with &#8220;true&#8221; to get an
HDF5 output file of CMFD results.</p>
<blockquote>
<em>Default</em>: false</blockquote>
</div>
<div class="section" id="write-matrices-element">
<h3>3.7.13. <tt class="docutils literal"><span class="pre">&lt;write_matrices&gt;</span></tt> Element<a class="headerlink" href="#write-matrices-element" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="docutils literal"><span class="pre">&lt;write_matrices&gt;</span></tt> element is used to view the PETSc sparse matrices
created when solving CMFD equations. These binary output files can be imported
into MATLAB using PETSc-MATLAB utilities. This option can be
turned on with &#8220;true&#8221; and off with &#8220;false&#8221;.</p>
<blockquote>
<em>Default</em>: false</blockquote>
</div>
</div>
</div>


      </div>
      <div class="bottomnav">
      
        <p>
        «&#160;&#160;<a href="install.html">2. Installation and Configuration</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="../index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="processing.html">4. Data Processing and Visualization</a>&#160;&#160;»
        </p>

      </div>


    <div class="footer">
        &copy; Copyright 2011-2013, Massachusetts Institute of Technology.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.0.1.
    </div>
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-30411614-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>

  </body>
</html>
