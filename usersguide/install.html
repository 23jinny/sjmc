

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>2. Installation and Configuration &mdash; OpenMC Documentation</title>
    
    <link rel="stylesheet" href="../_static/haiku.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/print.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.4.3',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/theme_extras.js"></script>
    <link rel="top" title="OpenMC Documentation" href="../index.html" />
    <link rel="up" title="User’s Guide" href="index.html" />
    <link rel="next" title="3. Writing XML Input Files" href="input.html" />
    <link rel="prev" title="1. A Beginner’s Guide to OpenMC" href="beginners.html" /> 
  </head>
  <body>
      <div class="header">
        <a href="../index.html">
          <img class="logo" src="../_static/openmc.png" alt="Logo"/>
        </a>
      </div>
      <div class="topnav">
      
        <p>
        «&#160;&#160;<a href="beginners.html">1. A Beginner&#8217;s Guide to OpenMC</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="../index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="input.html">3. Writing XML Input Files</a>&#160;&#160;»
        </p>

      </div>
      <div class="content">
        
        
  <div class="section" id="installation-and-configuration">
<span id="usersguide-install"></span><h1>2. Installation and Configuration<a class="headerlink" href="#installation-and-configuration" title="Permalink to this headline">¶</a></h1>
<div class="section" id="prerequisites">
<h2>2.1. Prerequisites<a class="headerlink" href="#prerequisites" title="Permalink to this headline">¶</a></h2>
<p>In order to compile OpenMC, you will need to have a Fortran compiler installed
on your machine. Since a number of Fortran 2003 features are used in the code,
it is recommended that you use the latest version of whatever compiler you
choose. For <a class="reference external" href="http://gcc.gnu.org/wiki/GFortran">gfortran</a>, it is recommended that you use version 4.5.0 or above.</p>
<p>If you are using Debian or a Debian derivative such as Ubuntu, you can install
the gfortran compiler using the following command:</p>
<div class="highlight-python"><pre>sudo apt-get install gfortran</pre>
</div>
<p>To compile with support for parallel runs on a distributed-memory architecture,
you will need to have a valid implementation of MPI installed on your
machine. The code has been tested and is known to work with the latest versions
of both <a class="reference external" href="http://www.open-mpi.org">OpenMPI</a> and <a class="reference external" href="http://www.mcs.anl.gov/mpi/mpich/">MPICH2</a>. You may use older versions of MPI implementations
at your own risk. OpenMPI and/or MPICH2 can be installed on Debian derivatives
with:</p>
<div class="highlight-python"><pre>sudo apt-get install mpich2
sudo apt-get install openmpi-bin</pre>
</div>
<p>To compile with support for <a class="reference external" href="http://www.hdfgroup.org/HDF5/">HDF5</a> output (highly recommended), you will need to
have HDF5 installed on your computer. The installed version will need to have
been compiled with the same compiler you intend to compile OpenMC with.</p>
</div>
<div class="section" id="obtaining-the-source">
<h2>2.2. Obtaining the Source<a class="headerlink" href="#obtaining-the-source" title="Permalink to this headline">¶</a></h2>
<p>All OpenMC source code is hosted on <a class="reference external" href="https://github.com/mit-crpg/openmc">GitHub</a>. You can download the source code
directly from GitHub or, if you have the <a class="reference external" href="http://git-scm.com">git</a> version control software installed
on your computer, you can use git to obtain the source code. The latter method
has the benefit that it is easy to receive updates directly from the GitHub
repository. GitHub has a good set of <a class="reference external" href="http://help.github.com/set-up-git-redirect">instructions</a> for how to set up git to work
with GitHub since this involves setting up <a class="reference external" href="http://en.wikipedia.org/wiki/Secure_Shell">ssh</a> keys. With git installed and
setup, the following command will download the full source code from the GitHub
repository:</p>
<div class="highlight-python"><pre>git clone git@github.com:mit-crpg/openmc.git</pre>
</div>
</div>
<div class="section" id="build-configuration">
<h2>2.3. Build Configuration<a class="headerlink" href="#build-configuration" title="Permalink to this headline">¶</a></h2>
<p>All configuration for OpenMC is done within the Makefile located in
<tt class="docutils literal"><span class="pre">src/Makefile</span></tt>. In the Makefile, you will see that there are a number of User
Options which can be changed. It is recommended that you do not change anything
else in the Makefile unless you are experienced with compiling and building
software using Makefiles. The following parameters can be set from the User
Options sections in the Makefile:</p>
<dl class="docutils">
<dt>COMPILER</dt>
<dd>This variable tells the Makefile which compiler to use. Valid options are
gfortran, intel, pgi, ibm, and cray.</dd>
<dt>DEBUG</dt>
<dd>Enables debugging when compiling. The flags added are dependent on which
compiler is used.</dd>
<dt>PROFILE</dt>
<dd>Enables profiling using the GNU profiler, gprof.</dd>
<dt>OPTIMIZE</dt>
<dd>Enables high-optimization using compiler-dependent flags. For gfortran,
this compiles with -O3. For Intel Fortran, this compiles with -O3 as well as
interprocedural optimization.</dd>
<dt>USE_MPI</dt>
<dd>Enables parallel runs using the Message Passing Interface. Users should also
set the MPI_ROOT directory further down in the Makefile.</dd>
<dt>USE_HDF5</dt>
<dd>Enables HDF5 output in addition to normal screen and text file output. Users
should also set the HDF5_ROOT directory further down in the Makefile.</dd>
</dl>
<p>It is also possible to change these options from the command line itself. For
example, if you want to compile with DEBUG turned on without actually change the
Makefile, you can enter the following from a terminal:</p>
<div class="highlight-python"><pre>make DEBUG=yes</pre>
</div>
</div>
<div class="section" id="compiling-on-linux-and-mac-os-x">
<h2>2.4. Compiling on Linux and Mac OS X<a class="headerlink" href="#compiling-on-linux-and-mac-os-x" title="Permalink to this headline">¶</a></h2>
<p>To compile OpenMC on Linux or Max OS X, run the following commands from within
the root directory of the source code:</p>
<div class="highlight-sh"><div class="highlight"><pre><span class="nb">cd </span>src
make
</pre></div>
</div>
<p>This will build an executable named <tt class="docutils literal"><span class="pre">openmc</span></tt>.</p>
</div>
<div class="section" id="compiling-on-windows">
<h2>2.5. Compiling on Windows<a class="headerlink" href="#compiling-on-windows" title="Permalink to this headline">¶</a></h2>
<p>To compile OpenMC on a Windows operating system, you will need to first install
<a class="reference external" href="http://www.cygwin.com/">Cygwin</a>, a Linux-like environment for Windows. When configuring Cygwin, make
sure you install both the gfortran compiler as well as git. Once you have
obtained the source code, run the following commands from within the source code
root directory:</p>
<div class="highlight-sh"><div class="highlight"><pre><span class="nb">cd </span>src
make
</pre></div>
</div>
<p>This will build an executable named <tt class="docutils literal"><span class="pre">openmc</span></tt>.</p>
</div>
<div class="section" id="cross-section-configuration">
<h2>2.6. Cross-Section Configuration<a class="headerlink" href="#cross-section-configuration" title="Permalink to this headline">¶</a></h2>
<p>In order to run a simulation with OpenMC, you will need cross-section data for
each nuclide in your problem. Since OpenMC uses ACE format cross-sections, you
can use nuclear data distributed with <a class="reference external" href="http://mcnp.lanl.gov">MCNP</a> or <a class="reference external" href="http://montecarlo.vtt.fi">Serpent</a>.</p>
<p>To use cross sections distributed with MCNP, change the &lt;directory&gt; element in
the <tt class="docutils literal"><span class="pre">cross_sections.xml</span></tt> file in the root directory of the OpenMC distribution
to the location of the MCNP cross-sections. Then, either set the
<a class="reference internal" href="input.html#cross-sections"><em>&lt;cross_sections&gt; Element</em></a> in a settings.xml file or the <span class="target" id="index-0"></span><tt class="xref std std-envvar docutils literal"><span class="pre">CROSS_SECTIONS</span></tt>
environment variable to the absolute path of the <tt class="docutils literal"><span class="pre">cross_sections.xml</span></tt> file.</p>
<p>Similarly, to use cross-sections distributed with Serpent, change the
&lt;directory&gt; element in the <tt class="docutils literal"><span class="pre">cross_sections_serpent.xml</span></tt> file in the root
directory of the OpenMC distribution to the location of the Serpent
cross-sections. Then, either set the <a class="reference internal" href="input.html#cross-sections"><em>&lt;cross_sections&gt; Element</em></a> in a settings.xml
file or the <span class="target" id="index-1"></span><tt class="xref std std-envvar docutils literal"><span class="pre">CROSS_SECTIONS</span></tt> environment variable to the absolute path
of the <tt class="docutils literal"><span class="pre">cross_sections_serpent.xml</span></tt> file.</p>
</div>
<div class="section" id="running-openmc">
<h2>2.7. Running OpenMC<a class="headerlink" href="#running-openmc" title="Permalink to this headline">¶</a></h2>
<p>Once you have a model built (see <a class="reference internal" href="input.html#usersguide-input"><em>Writing XML Input Files</em></a>), you can either run
the openmc executable directly from the directory containing your XML input
files, or you can specify as a command-line argument the directory containing
the XML input files. For example, if the path of your OpenMC executable is
<tt class="docutils literal"><span class="pre">/home/username/openmc/src/openmc</span></tt> and your XML input files are in the
directory <tt class="docutils literal"><span class="pre">/home/username/somemodel/</span></tt>, one way to run the simulation would be:</p>
<div class="highlight-sh"><div class="highlight"><pre><span class="nb">cd</span> /home/username/somemodel
openmc
</pre></div>
</div>
<p>Alternatively, you could run from any directory:</p>
<div class="highlight-sh"><div class="highlight"><pre>openmc /home/username/somemodel
</pre></div>
</div>
<p>Note that in the latter case, any output files will be placed in the present
working directory which may be different from <tt class="docutils literal"><span class="pre">/home/username/somemodel</span></tt>.</p>
</div>
</div>


      </div>
      <div class="bottomnav">
      
        <p>
        «&#160;&#160;<a href="beginners.html">1. A Beginner&#8217;s Guide to OpenMC</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="../index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="input.html">3. Writing XML Input Files</a>&#160;&#160;»
        </p>

      </div>


    <div class="footer">
        &copy; Copyright 2011-2012, Massachusetts Institute of Technology.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-30411614-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>

  </body>
</html>