<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>2. Installation and Configuration &mdash; OpenMC Documentation</title>
    
    <link rel="stylesheet" href="../_static/haiku.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.7.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="OpenMC Documentation" href="../index.html" />
    <link rel="up" title="User’s Guide" href="index.html" />
    <link rel="next" title="3. Writing XML Input Files" href="input.html" />
    <link rel="prev" title="1. A Beginner’s Guide to OpenMC" href="beginners.html" /> 
  </head>
  <body role="document">
      <div class="header" role="banner">
        <a href="../index.html">
          <img class="logo" src="../_static/openmc.png" alt="Logo"/>
        </a>
      </div>
      <div class="topnav" role="navigation" aria-label="top navigation">
      
        <p>
        «&#160;&#160;<a href="beginners.html">1. A Beginner&#8217;s Guide to OpenMC</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="../index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="input.html">3. Writing XML Input Files</a>&#160;&#160;»
        </p>

      </div>
      <div class="content">
        
        
  <div class="section" id="installation-and-configuration">
<span id="usersguide-install"></span><h1>2. Installation and Configuration<a class="headerlink" href="#installation-and-configuration" title="Permalink to this headline">¶</a></h1>
<div class="section" id="installing-on-ubuntu-with-ppa">
<h2>2.1. Installing on Ubuntu with PPA<a class="headerlink" href="#installing-on-ubuntu-with-ppa" title="Permalink to this headline">¶</a></h2>
<p>For users with Ubuntu 15.04 or later, a binary package for OpenMC is available
through a Personal Package Archive (PPA) and can be installed through the APT
package manager. First, add the following PPA to the repository sources:</p>
<div class="highlight-sh"><div class="highlight"><pre>sudo apt-add-repository ppa:paulromano/staging
</pre></div>
</div>
<p>Next, resynchronize the package index files:</p>
<div class="highlight-sh"><div class="highlight"><pre>sudo apt-get update
</pre></div>
</div>
<p>Now OpenMC should be recognized within the repository and can be installed:</p>
<div class="highlight-sh"><div class="highlight"><pre>sudo apt-get install openmc
</pre></div>
</div>
<p>Binary packages from this PPA may exist for earlier versions of Ubuntu, but they
are no longer supported.</p>
</div>
<div class="section" id="building-from-source">
<h2>2.2. Building from Source<a class="headerlink" href="#building-from-source" title="Permalink to this headline">¶</a></h2>
<div class="section" id="prerequisites">
<h3>2.2.1. Prerequisites<a class="headerlink" href="#prerequisites" title="Permalink to this headline">¶</a></h3>
<div class="admonition-required admonition">
<p class="first admonition-title">Required</p>
<ul class="last">
<li><p class="first">A Fortran compiler such as <a class="reference external" href="http://gcc.gnu.org/wiki/GFortran">gfortran</a></p>
<p>In order to compile OpenMC, you will need to have a Fortran compiler
installed on your machine. Since a number of Fortran 2003/2008 features
are used in the code, it is recommended that you use the latest version of
whatever compiler you choose. For <a class="reference external" href="http://gcc.gnu.org/wiki/GFortran">gfortran</a>, it is necessary to use
version 4.6.0 or above.</p>
<p>If you are using Debian or a Debian derivative such as Ubuntu, you can
install the gfortran compiler using the following command:</p>
<div class="highlight-python"><div class="highlight"><pre>sudo apt-get install gfortran
</pre></div>
</div>
</li>
<li><p class="first"><a class="reference external" href="http://www.cmake.org">CMake</a> cross-platform build system</p>
<p>The compiling and linking of source files is handled by CMake in a
platform-independent manner. If you are using Debian or a Debian
derivative such as Ubuntu, you can install CMake using the following
command:</p>
<div class="highlight-python"><div class="highlight"><pre>sudo apt-get install cmake
</pre></div>
</div>
</li>
<li><p class="first"><a class="reference external" href="http://www.hdfgroup.org/HDF5/">HDF5</a> Library for portable binary output format</p>
<p>OpenMC uses HDF5 for binary output files. As such, you will need to have
HDF5 installed on your computer. The installed version will need to have
been compiled with the same compiler you intend to compile OpenMC with. If
you are using HDF5 in conjunction with MPI, we recommend that your HDF5
installation be built with parallel I/O features. An example of
configuring <a class="reference external" href="http://www.hdfgroup.org/HDF5/">HDF5</a> is listed below:</p>
<div class="highlight-python"><div class="highlight"><pre>FC=/opt/mpich/3.1/bin/mpif90 CC=/opt/mpich/3.1/bin/mpicc \
./configure --prefix=/opt/hdf5/1.8.12 --enable-fortran \
            --enable-fortran2003 --enable-parallel
</pre></div>
</div>
<p>You may omit <code class="docutils literal"><span class="pre">--enable-parallel</span></code> if you want to compile <a class="reference external" href="http://www.hdfgroup.org/HDF5/">HDF5</a> in serial.</p>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last">OpenMC uses various parts of the HDF5 Fortran 2003 API; as such you
must include <code class="docutils literal"><span class="pre">--enable-fortran2003</span></code> or else OpenMC will not be able
to compile.</p>
</div>
<p>On Debian derivatives, HDF5 and/or parallel HDF5 can be installed through
the APT package manager:</p>
<div class="highlight-sh"><div class="highlight"><pre>sudo apt-get install libhdf5-8 libhdf5-dev hdf5-helpers
</pre></div>
</div>
<p>Note that the exact package names may vary depending on your particular
distribution and version.</p>
</li>
</ul>
</div>
<div class="admonition-optional admonition">
<p class="first admonition-title">Optional</p>
<ul class="last">
<li><p class="first">An MPI implementation for distributed-memory parallel runs</p>
<p>To compile with support for parallel runs on a distributed-memory
architecture, you will need to have a valid implementation of MPI
installed on your machine. The code has been tested and is known to work
with the latest versions of both <a class="reference external" href="http://www.open-mpi.org">OpenMPI</a> and <a class="reference external" href="http://www.mpich.org">MPICH</a>. OpenMPI and/or MPICH
can be installed on Debian derivatives with:</p>
<div class="highlight-python"><div class="highlight"><pre>sudo apt-get install mpich libmpich-dev
sudo apt-get install openmpi-bin libopenmpi1.6 libopenmpi-dev
</pre></div>
</div>
</li>
<li><p class="first"><a class="reference external" href="http://git-scm.com">git</a> version control software for obtaining source code</p>
</li>
</ul>
</div>
</div>
<div class="section" id="obtaining-the-source">
<h3>2.2.2. Obtaining the Source<a class="headerlink" href="#obtaining-the-source" title="Permalink to this headline">¶</a></h3>
<p>All OpenMC source code is hosted on <a class="reference external" href="https://github.com/mit-crpg/openmc">GitHub</a>. You can download the source code
directly from GitHub or, if you have the <a class="reference external" href="http://git-scm.com">git</a> version control software installed
on your computer, you can use git to obtain the source code. The latter method
has the benefit that it is easy to receive updates directly from the GitHub
repository. GitHub has a good set of <a class="reference external" href="http://help.github.com/set-up-git-redirect">instructions</a> for how to set up git to work
with GitHub since this involves setting up <a class="reference external" href="http://en.wikipedia.org/wiki/Secure_Shell">ssh</a> keys. With git installed and
setup, the following command will download the full source code from the GitHub
repository:</p>
<div class="highlight-python"><div class="highlight"><pre>git clone https://github.com/mit-crpg/openmc.git
</pre></div>
</div>
<p>By default, the cloned repository will be set to the development branch. To
switch to the source of the latest stable release, run the following commands:</p>
<div class="highlight-python"><div class="highlight"><pre>cd openmc
git checkout master
</pre></div>
</div>
</div>
<div class="section" id="build-configuration">
<h3>2.2.3. Build Configuration<a class="headerlink" href="#build-configuration" title="Permalink to this headline">¶</a></h3>
<p>Compiling OpenMC with CMake is carried out in two steps. First, <code class="docutils literal"><span class="pre">cmake</span></code> is run
to determine the compiler, whether optional packages (MPI, HDF5) are available,
to generate a list of dependencies between source files so that they may be
compiled in the correct order, and to generate a normal Makefile. The Makefile
is then used by <code class="docutils literal"><span class="pre">make</span></code> to actually carry out the compile and linking
commands. A typical out-of-source build would thus look something like the
following</p>
<div class="highlight-sh"><div class="highlight"><pre>mkdir build <span class="o">&amp;&amp;</span> <span class="nb">cd </span>build
cmake ..
make
</pre></div>
</div>
<p>Note that first a build directory is created as a subdirectory of the source
directory. The Makefile in the top-level directory will automatically perform an
out-of-source build with default options.</p>
<div class="section" id="cmakelists-txt-options">
<h4>2.2.3.1. CMakeLists.txt Options<a class="headerlink" href="#cmakelists-txt-options" title="Permalink to this headline">¶</a></h4>
<p>The following options are available in the CMakeLists.txt file:</p>
<dl class="docutils">
<dt>debug</dt>
<dd>Enables debugging when compiling. The flags added are dependent on which
compiler is used.</dd>
<dt>profile</dt>
<dd>Enables profiling using the GNU profiler, gprof.</dd>
<dt>optimize</dt>
<dd>Enables high-optimization using compiler-dependent flags. For gfortran and
Intel Fortran, this compiles with -O3.</dd>
<dt>openmp</dt>
<dd>Enables shared-memory parallelism using the OpenMP API. The Fortran compiler
being used must support OpenMP.</dd>
<dt>coverage</dt>
<dd>Compile and link code instrumented for coverage analysis. This is typically
used in conjunction with <a class="reference external" href="https://gcc.gnu.org/onlinedocs/gcc/Gcov.html">gcov</a>.</dd>
<dt>maxcoord</dt>
<dd>Maximum number of nested coordinate levels in geometry. Defaults to 10.</dd>
</dl>
<p>To set any of these options (e.g. turning on debug mode), the following form
should be used:</p>
<div class="highlight-sh"><div class="highlight"><pre>cmake -Ddebug<span class="o">=</span>on /path/to/openmc
</pre></div>
</div>
</div>
<div class="section" id="compiling-with-mpi">
<h4>2.2.3.2. Compiling with MPI<a class="headerlink" href="#compiling-with-mpi" title="Permalink to this headline">¶</a></h4>
<p>To compile with MPI, set the <span class="target" id="index-0"></span><code class="xref std std-envvar docutils literal"><span class="pre">FC</span></code> environment variable to the path to
the MPI Fortran wrapper. For example, in a bash shell:</p>
<div class="highlight-sh"><div class="highlight"><pre><span class="nb">export </span><span class="nv">FC</span><span class="o">=</span>mpif90
cmake /path/to/openmc
</pre></div>
</div>
<p>Note that in many shells, an environment variable can be set for a single
command, i.e.</p>
<div class="highlight-sh"><div class="highlight"><pre><span class="nv">FC</span><span class="o">=</span>mpif90 cmake /path/to/openmc
</pre></div>
</div>
</div>
<div class="section" id="selecting-hdf5-installation">
<h4>2.2.3.3. Selecting HDF5 Installation<a class="headerlink" href="#selecting-hdf5-installation" title="Permalink to this headline">¶</a></h4>
<p>CMakeLists.txt searches for the <code class="docutils literal"><span class="pre">h5fc</span></code> or <code class="docutils literal"><span class="pre">h5pfc</span></code> HDF5 Fortran wrapper on
your PATH environment variable and subsequently uses it to determine library
locations and compile flags. If you have multiple installations of HDF5 or one
that does not appear on your PATH, you can set the HDF5_ROOT environment
variable to the root directory of the HDF5 installation, e.g.
.. code-block:: sh</p>
<blockquote>
<div>export HDF5_ROOT=/opt/hdf5/1.8.15
cmake /path/to/openmc</div></blockquote>
<p>This will cause CMake to search first in /opt/hdf5/1.8.15/bin for <code class="docutils literal"><span class="pre">h5fc</span></code> /
<code class="docutils literal"><span class="pre">h5pfc</span></code> before it searches elsewhere. As noted above, an environment variable
can typically be set for a single command, i.e.</p>
<div class="highlight-sh"><div class="highlight"><pre><span class="nv">HDF5_ROOT</span><span class="o">=</span>/opt/hdf5/1.8.15 cmake /path/to/openmc
</pre></div>
</div>
</div>
</div>
<div class="section" id="compiling-on-linux-and-mac-os-x">
<h3>2.2.4. Compiling on Linux and Mac OS X<a class="headerlink" href="#compiling-on-linux-and-mac-os-x" title="Permalink to this headline">¶</a></h3>
<p>To compile OpenMC on Linux or Max OS X, run the following commands from within
the root directory of the source code:</p>
<div class="highlight-sh"><div class="highlight"><pre>mkdir build <span class="o">&amp;&amp;</span> <span class="nb">cd </span>build
cmake ..
make
make install
</pre></div>
</div>
<p>This will build an executable named <code class="docutils literal"><span class="pre">openmc</span></code> and install it (by default in
/usr/local/bin). If you do not have administrative privileges, you can install
OpenMC locally by specifying an install prefix when running cmake:</p>
<div class="highlight-sh"><div class="highlight"><pre>cmake -DCMAKE_INSTALL_PREFIX<span class="o">=</span><span class="nv">$HOME</span>/.local ..
</pre></div>
</div>
<p>The <code class="docutils literal"><span class="pre">CMAKE_INSTALL_PREFIX</span></code> variable can be changed to any path for which you
have write-access.</p>
</div>
<div class="section" id="compiling-on-windows">
<h3>2.2.5. Compiling on Windows<a class="headerlink" href="#compiling-on-windows" title="Permalink to this headline">¶</a></h3>
<div class="section" id="using-cygwin">
<h4>2.2.5.1. Using Cygwin<a class="headerlink" href="#using-cygwin" title="Permalink to this headline">¶</a></h4>
<p>One option for compiling OpenMC on a Windows operating system is to use <a class="reference external" href="http://cygwin.com/">Cygwin</a>,
a Linux-like environment for Windows. You will need to first <a class="reference external" href="http://cygwin.com/setup.exe">install
Cygwin</a>. When you are asked to select packages, make sure the following are
selected:</p>
<ul class="simple">
<li>Devel: gcc-core</li>
<li>Devel: gcc-fortran</li>
<li>Devel: make</li>
<li>Devel: cmake</li>
</ul>
<p>If you plan on obtaining the source code directly using git, select the
following packages:</p>
<ul class="simple">
<li>Devel: git</li>
<li>Devel: git-completion (Optional)</li>
<li>Devel: gitk (Optional)</li>
</ul>
<p>In order to use the Python scripts provided with OpenMC, you will also need to
install Python. This can be done within Cygwin or directly in Windows. To
install within Cygwin, select the following packages:</p>
<ul class="simple">
<li>Python: python (Version &gt; 2.7 recommended)</li>
</ul>
<p>Once you have obtained the source code, run the following commands from within
the source code root directory:</p>
<div class="highlight-sh"><div class="highlight"><pre>mkdir build <span class="o">&amp;&amp;</span> <span class="nb">cd </span>build
cmake ..
make
</pre></div>
</div>
<p>This will build an executable named <code class="docutils literal"><span class="pre">openmc</span></code>.</p>
</div>
<div class="section" id="using-mingw">
<h4>2.2.5.2. Using MinGW<a class="headerlink" href="#using-mingw" title="Permalink to this headline">¶</a></h4>
<p>An alternate option for installing OpenMC on Windows is using <a class="reference external" href="http://www.mingw.org">MinGW</a>, which
stands for Minimalist GNU for Windows. An executable for installing the MinGW
distribution is available on <a class="reference external" href="http://sourceforge.net/projects/mingw">SourceForge</a>. When installing MinGW, make sure the
following components are selected:</p>
<ul class="simple">
<li>MinGW Compiler Suite: Fortran Compiler</li>
<li>MSYS Basic System</li>
</ul>
<p>Once MinGW is installed, copy the OpenMC source distribution to your MinGW home
directory (usually C:\MinGW\msys\1.0\home\YourUsername). Once you have
the source code in place, run the following commands from within the MinGW shell
in the root directory of the OpenMC distribution:</p>
<div class="highlight-sh"><div class="highlight"><pre>make
</pre></div>
</div>
<p>This will build an executable named <code class="docutils literal"><span class="pre">openmc</span></code>.</p>
</div>
</div>
<div class="section" id="compiling-for-the-intel-xeon-phi">
<h3>2.2.6. Compiling for the Intel Xeon Phi<a class="headerlink" href="#compiling-for-the-intel-xeon-phi" title="Permalink to this headline">¶</a></h3>
<p>In order to build OpenMC for the Intel Xeon Phi using the Intel Fortran
compiler, it is necessary to specify that all objects be compiled with the
<code class="docutils literal"><span class="pre">-mmic</span></code> flag as follows:</p>
<div class="highlight-sh"><div class="highlight"><pre>mkdir build <span class="o">&amp;&amp;</span> <span class="nb">cd </span>build
<span class="nv">FC</span><span class="o">=</span>ifort <span class="nv">FFLAGS</span><span class="o">=</span>-mmic cmake -Dopenmp<span class="o">=</span>on ..
make
</pre></div>
</div>
<p>Note that unless an HDF5 build for the Intel Xeon Phi is already on your target
machine, you will need to cross-compile HDF5 for the Xeon Phi. An <a class="reference external" href="https://github.com/paulromano/install-scripts/blob/master/install-hdf5-mic">example
script</a> to build zlib and HDF5 provides several necessary workarounds.</p>
</div>
<div class="section" id="testing-build">
<h3>2.2.7. Testing Build<a class="headerlink" href="#testing-build" title="Permalink to this headline">¶</a></h3>
<p>If you have ENDF/B-VII.1 cross sections from <a class="reference external" href="http://www.nndc.bnl.gov/endf/b7.1/acefiles.html">NNDC</a> you can test your build.
Make sure the <strong>CROSS_SECTIONS</strong> environmental variable is set to the
<em>cross_sections.xml</em> file in the <em>data/nndc</em> directory.
There are two ways to run tests. The first is to use the Makefile present in
the source directory and run the following:</p>
<div class="highlight-sh"><div class="highlight"><pre>make <span class="nb">test</span>
</pre></div>
</div>
<p>If you want more options for testing you can use <a class="reference external" href="http://www.cmake.org/cmake/help/v2.8.12/ctest.html">ctest</a> command. For example,
if we wanted to run only the plot tests with 4 processors, we run:</p>
<div class="highlight-sh"><div class="highlight"><pre><span class="nb">cd </span>build
ctest -j <span class="m">4</span> -R plot
</pre></div>
</div>
<p>If you want to run the full test suite with different build options please
refer to our <a class="reference internal" href="../devguide/workflow.html#test-suite"><span>OpenMC Test Suite</span></a> documentation.</p>
</div>
</div>
<div class="section" id="cross-section-configuration">
<h2>2.3. Cross Section Configuration<a class="headerlink" href="#cross-section-configuration" title="Permalink to this headline">¶</a></h2>
<p>In order to run a simulation with OpenMC, you will need cross section data for
each nuclide in your problem. Since OpenMC uses ACE format cross sections, you
can use nuclear data that was processed with <a class="reference external" href="http://t2.lanl.gov/nis/codes.shtml">NJOY</a>, such as that distributed
with <a class="reference external" href="http://mcnp.lanl.gov">MCNP</a> or <a class="reference external" href="http://montecarlo.vtt.fi">Serpent</a>. Several sources provide free processed ACE data as
described below. The TALYS-based evaluated nuclear data library, <a class="reference external" href="ftp://ftp.nrg.eu/pub/www/talys/tendl2012/tendl2012.html">TENDL</a>, is also
openly available in ACE format.</p>
<div class="section" id="using-endf-b-vii-1-cross-sections-from-nndc">
<h3>2.3.1. Using ENDF/B-VII.1 Cross Sections from NNDC<a class="headerlink" href="#using-endf-b-vii-1-cross-sections-from-nndc" title="Permalink to this headline">¶</a></h3>
<p>The <a class="reference external" href="http://www.nndc.bnl.gov/endf/b7.1/acefiles.html">NNDC</a> provides ACE data from the ENDF/B-VII.1 neutron and thermal scattering
sublibraries at four temperatures processed using <a class="reference external" href="http://t2.lanl.gov/nis/codes.shtml">NJOY</a>. To use this data with
OpenMC, a script is provided with OpenMC that will automatically download,
extract, and set up a confiuration file:</p>
<div class="highlight-sh"><div class="highlight"><pre><span class="nb">cd </span>openmc/data
python get_nndc_data.py
</pre></div>
</div>
<p>At this point, you should set the <span class="target" id="index-1"></span><code class="xref std std-envvar docutils literal"><span class="pre">CROSS_SECTIONS</span></code> environment variable
to the absolute path of the file <code class="docutils literal"><span class="pre">openmc/data/nndc/cross_sections.xml</span></code>. This
cross section set is used by the test suite.</p>
</div>
<div class="section" id="using-jeff-cross-sections-from-oecd-nea">
<h3>2.3.2. Using JEFF Cross Sections from OECD/NEA<a class="headerlink" href="#using-jeff-cross-sections-from-oecd-nea" title="Permalink to this headline">¶</a></h3>
<p>The <a class="reference external" href="http://www.oecd-nea.org">NEA</a> provides processed ACE data from the <a class="reference external" href="http://www.oecd-nea.org/dbdata/jeff/">JEFF</a> nuclear library upon
request. A DVD of the data can be requested <a class="reference external" href="http://www.oecd-nea.org/dbdata/pubs/jeff312-cd.html">here</a>. To use this data with OpenMC,
the following steps must be taken:</p>
<ol class="arabic">
<li><p class="first">Copy and unzip the data on the DVD to a directory on your computer.</p>
</li>
<li><p class="first">In the root directory, a file named <code class="docutils literal"><span class="pre">xsdir</span></code>, or some variant thereof,
should be present. This file contains a listing of all the cross sections and
is used by MCNP. This file should be converted to a <code class="docutils literal"><span class="pre">cross_sections.xml</span></code>
file for use with OpenMC. A utility is provided in the OpenMC distribution
for this purpose:</p>
<div class="highlight-sh"><div class="highlight"><pre>openmc/scripts/openmc-xsdir-to-xml xsdir31 cross_sections.xml
</pre></div>
</div>
</li>
<li><p class="first">In the converted <code class="docutils literal"><span class="pre">cross_sections.xml</span></code> file, change the contents of the
&lt;directory&gt; element to the absolute path of the directory containing the
actual ACE files.</p>
</li>
<li><p class="first">Additionally, you may need to change any occurrences of upper-case &#8220;ACE&#8221;
within the <code class="docutils literal"><span class="pre">cross_sections.xml</span></code> file to lower-case.</p>
</li>
<li><p class="first">Either set the <a class="reference internal" href="input.html#cross-sections"><span>&lt;cross_sections&gt; Element</span></a> in a settings.xml file or the
<span class="target" id="index-2"></span><code class="xref std std-envvar docutils literal"><span class="pre">CROSS_SECTIONS</span></code> environment variable to the absolute path of the
<code class="docutils literal"><span class="pre">cross_sections.xml</span></code> file.</p>
</li>
</ol>
</div>
<div class="section" id="using-cross-sections-from-mcnp">
<h3>2.3.3. Using Cross Sections from MCNP<a class="headerlink" href="#using-cross-sections-from-mcnp" title="Permalink to this headline">¶</a></h3>
<p>To use cross sections distributed with MCNP, change the &lt;directory&gt; element in
the <code class="docutils literal"><span class="pre">cross_sections.xml</span></code> file in the root directory of the OpenMC distribution
to the location of the MCNP cross sections. Then, either set the
<a class="reference internal" href="input.html#cross-sections"><span>&lt;cross_sections&gt; Element</span></a> in a settings.xml file or the <span class="target" id="index-3"></span><code class="xref std std-envvar docutils literal"><span class="pre">CROSS_SECTIONS</span></code>
environment variable to the absolute path of the <code class="docutils literal"><span class="pre">cross_sections.xml</span></code> file.</p>
</div>
<div class="section" id="using-cross-sections-from-serpent">
<h3>2.3.4. Using Cross Sections from Serpent<a class="headerlink" href="#using-cross-sections-from-serpent" title="Permalink to this headline">¶</a></h3>
<p>To use cross sections distributed with Serpent, change the &lt;directory&gt; element
in the <code class="docutils literal"><span class="pre">cross_sections_serpent.xml</span></code> file in the root directory of the OpenMC
distribution to the location of the Serpent cross sections. Then, either set the
<a class="reference internal" href="input.html#cross-sections"><span>&lt;cross_sections&gt; Element</span></a> in a settings.xml file or the <span class="target" id="index-4"></span><code class="xref std std-envvar docutils literal"><span class="pre">CROSS_SECTIONS</span></code>
environment variable to the absolute path of the <code class="docutils literal"><span class="pre">cross_sections_serpent.xml</span></code>
file.</p>
</div>
</div>
<div class="section" id="running-openmc">
<h2>2.4. Running OpenMC<a class="headerlink" href="#running-openmc" title="Permalink to this headline">¶</a></h2>
<p>Once you have a model built (see <a class="reference internal" href="input.html#usersguide-input"><span>Writing XML Input Files</span></a>), you can either run
the openmc executable directly from the directory containing your XML input
files, or you can specify as a command-line argument the directory containing
the XML input files. For example, if your XML input files are in the directory
<code class="docutils literal"><span class="pre">/home/username/somemodel/</span></code>, one way to run the simulation would be:</p>
<div class="highlight-sh"><div class="highlight"><pre><span class="nb">cd</span> /home/username/somemodel
openmc
</pre></div>
</div>
<p>Alternatively, you could run from any directory:</p>
<div class="highlight-sh"><div class="highlight"><pre>openmc /home/username/somemodel
</pre></div>
</div>
<p>Note that in the latter case, any output files will be placed in the present
working directory which may be different from <code class="docutils literal"><span class="pre">/home/username/somemodel</span></code>.</p>
<div class="section" id="command-line-flags">
<h3>2.4.1. Command-Line Flags<a class="headerlink" href="#command-line-flags" title="Permalink to this headline">¶</a></h3>
<p>OpenMC accepts the following command line flags:</p>
<table class="docutils option-list" frame="void" rules="none">
<col class="option" />
<col class="description" />
<tbody valign="top">
<tr><td class="option-group" colspan="2">
<kbd><span class="option">-g</span>, <span class="option">--geometry-debug</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Run in geometry debugging mode, where cell overlaps are
checked for after each move of a particle</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">-n</span>, <span class="option">--particles <var>N</var></span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Use <em>N</em> particles per generation or batch</td></tr>
<tr><td class="option-group">
<kbd><span class="option">-p</span>, <span class="option">--plot</span></kbd></td>
<td>Run in plotting mode</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">-r</span>, <span class="option">--restart <var>file</var></span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Restart a previous run from a state point or a particle
restart file</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">-s</span>, <span class="option">--threads <var>N</var></span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Run with <em>N</em> OpenMP threads</td></tr>
<tr><td class="option-group">
<kbd><span class="option">-t</span>, <span class="option">--track</span></kbd></td>
<td>Write tracks for all particles</td></tr>
<tr><td class="option-group">
<kbd><span class="option">-v</span>, <span class="option">--version</span></kbd></td>
<td>Show version information</td></tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="configuring-input-validation-with-gnu-emacs-nxml-mode">
<h2>2.5. Configuring Input Validation with GNU Emacs nXML mode<a class="headerlink" href="#configuring-input-validation-with-gnu-emacs-nxml-mode" title="Permalink to this headline">¶</a></h2>
<p>The <a class="reference external" href="http://www.gnu.org/software/emacs/">GNU Emacs</a> text editor has a built-in mode that extends functionality for
editing XML files. One of the features in nXML mode is the ability to perform
real-time <a class="reference external" href="http://en.wikipedia.org/wiki/XML_validation">validation</a> of XML files against a <a class="reference external" href="http://relaxng.org/">RELAX NG</a> schema. The OpenMC
source contains RELAX NG schemas for each type of user input file. In order for
nXML mode to know about these schemas, you need to tell emacs where to find a
&#8220;locating files&#8221; description. Adding the following lines to your <code class="docutils literal"><span class="pre">~/.emacs</span></code>
file will enable real-time validation of XML input files:</p>
<div class="highlight-common-lisp"><div class="highlight"><pre><span class="p">(</span><span class="nb">require</span> <span class="ss">&#39;rng-loc</span><span class="p">)</span>
<span class="p">(</span><span class="nv">add-to-list</span> <span class="ss">&#39;rng-schema-locating-files</span> <span class="s">&quot;~/openmc/schemas.xml&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Make sure to replace the last string on the second line with the path to the
schemas.xml file in your own OpenMC source directory.</p>
</div>
</div>


      </div>
      <div class="bottomnav" role="navigation" aria-label="bottom navigation">
      
        <p>
        «&#160;&#160;<a href="beginners.html">1. A Beginner&#8217;s Guide to OpenMC</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="../index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="input.html">3. Writing XML Input Files</a>&#160;&#160;»
        </p>

      </div>


    <div class="footer" role="contentinfo">
        &copy; Copyright 2011-2015, Massachusetts Institute of Technology.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.3.
    </div>
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-30411614-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>

  </body>
</html>